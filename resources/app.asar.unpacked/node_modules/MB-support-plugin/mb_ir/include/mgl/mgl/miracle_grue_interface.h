// Copyright: 2012 MakerBot Industries dev team <dev@makerbot.com>
#pragma once
#include <atomic>
#include <string>

#include "mgl/object_data/chunk_stack.h"

namespace Json {
class Value;
}

namespace mgl {

// Need to add MGL_API to expose function in Windows platform.
// Doesn't error out in Darwin / Linux but best to have.
// Takes full config, input modeln json / metadata are output


void MGL_API runMiracleGrue(const std::string & config_path,
                            const std::string & input_file_path,
                            std::ostream & progress_reporter,
                            const std::atomic_bool & cancel,
                            const std::string & json_output_file_path,
                            const std::string & metadata_file_path,
                            const std::string & gcode_output_file_path,
                            const std::string & accel_file_path);


ChunkStack MGL_API createBasicSlice(const std::string & config_path,
                                    const std::string & input_file_path,
                                    const std::atomic_bool & cancel);

ChunkStack MGL_API createRegionedSlice(const std::string & config_path,
                                       const std::string & input_file_path,
                                       const std::atomic_bool & cancel);

ChunkStack MGL_API createFilledSlice(const std::string & config_path,
                                     const std::string & input_file_path,
                                     const std::atomic_bool & cancel);

Json::Value MGL_API getMetadata(const std::string & config_path,
                                const std::string & input_file_path,
                                const std::atomic_bool & cancel);
}
