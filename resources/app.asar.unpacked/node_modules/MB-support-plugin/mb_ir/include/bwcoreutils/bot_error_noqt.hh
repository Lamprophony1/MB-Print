#ifndef BOT_ERROR_NOQT_HH
#define BOT_ERROR_NOQT_HH

#include <string>
#include <boost/format.hpp>
#include "bwcoreutils/all_errors.hh"

namespace bwcoreutils {

/*
 * This class takes an error code integer and provides details for UI
 * error handling.  Does not support string translation.
 * Requires C++11 and boost::format.
 */
class BotError {
public:
    typedef std::vector<std::string> MESSAGE_ARGS;
    enum TYPE {
        NONE = 0,
        TOOL_ERROR = 1,
        FILAMENT_ERROR = 2,
        GENERAL_ERROR = 3,
        ZPAUSE = 4,
        SAD_BOT = 5,
        CHAMBER_ERROR = 6,
    };

    enum ACTION {
        ACKNOWLEDGE = 0,
        CHANGE_FILAMENT = 1,
        PREHEAT_TIMEOUT = 2,
        ZPAUSED = 3,
        UNLOAD_FILAMENT = 4,
        ATTACH_TOOL = 5,
        CALIBRATE_Z = 6,
        ACKNOWLEDGE_OR_CONTINUE = 7,
    };

    explicit BotError(Error errorCode) :
        m_type(static_cast<TYPE>(0)),
        m_action(static_cast<ACTION>(0)),
        m_error(errorCode),
        m_messageArgs() {
        init();
    }

    // TODO(ted): Ideally we would do this with constructor delegation, like:
    // explicit BotError(int errorCode) : BotError(static_cast<Error>(errorCode)) {}
    // but MSVC 11 (2012) doesn't support that feature of c++11, so we'll have to
    // update this when we switch to a newer MSVC
    explicit BotError(int errorCode) :
        m_type(static_cast<TYPE>(0)),
        m_action(static_cast<ACTION>(0)),
        m_error(static_cast<Error>(errorCode)),
        m_messageArgs() {
        init();
    }

    // TODO(jacksonh): support custom error messages for toolhead-specific errors
    // BotError(Error errorCode, int toolhead_index, ToolheadType toolhead_type) {}

    ~BotError() {}

    std::string message() const {
        return m_message;
    }

    void setMessage(const std::string & newMessage) {
        m_message = newMessage;
    }

    // Used to determine what thumbnail to display to the user
    TYPE type() const {
        return m_type;
    }

    ACTION action() const {
        return m_action;
    }

    std::string title() const {
        return m_title;
    }

    Error error() const {
        return m_error;
    }

    MESSAGE_ARGS messageArgs() const {
        return m_messageArgs;
    }

private:

    enum ErrorBases {
        TOOL_PROBLEM,
        TOOL_CRITICAL,
        HOMING_PROBLEM,
        HOMING_PROBLEM_STUCK,
        PRINT_FILE_ERROR,
        FW_FUNDAMENTALLY_BROKEN,
        KAITEN_ERROR,
        CHAMBER_PROBLEM,
        MISC_ERROR,
        FILAMENT_BAY_ERROR,
    };

    struct ErrorDefaults {
        ErrorDefaults(const std::string& title, const std::string& message, TYPE type, ACTION action) :
        title(title),
        message(message),
        type(type),
        action(action) {}
        ErrorDefaults() {}
        ~ErrorDefaults() {}

        std::string title;
        std::string message;
        TYPE type;
        ACTION action;
    };

    static ErrorDefaults get_base_defaults(ErrorBases b) {
        switch (b) {
            case TOOL_PROBLEM:
                return ErrorDefaults("Extruder Error", "Oops, we have a problem with your Smart Extruder (Error %d: %s). Please disconnect and reconnect your Smart Extruder.", TOOL_ERROR, ACKNOWLEDGE);
            case TOOL_CRITICAL:
                return ErrorDefaults("Extruder Error", "Oops, we have a problem with your Smart Extruder (Error %d: %s). Please visit our Support page at Makerbot.com/support.", TOOL_ERROR, ACKNOWLEDGE);
            case HOMING_PROBLEM:
                return ErrorDefaults("Homing Error", "Homing failed (Error %d: %s). Please try again.", NONE, ACKNOWLEDGE);
            case HOMING_PROBLEM_STUCK:
                return ErrorDefaults("Homing Error", "Homing failed (Error %d: %s). Your extruder nozzle may be stuck. Please try again.", NONE, ACKNOWLEDGE);
            case PRINT_FILE_ERROR:
                return ErrorDefaults("Print Error", "Invalid print file (Error %d: %s). Please try to prepare again in MakerBot Desktop.", NONE, ACKNOWLEDGE);
            case FW_FUNDAMENTALLY_BROKEN:
                return ErrorDefaults("System Error", "Oops, we have a problem (Error %d: %s). Please update your firmware using MakerBot Desktop.", NONE, ACKNOWLEDGE);
            case KAITEN_ERROR:
                return ErrorDefaults("System Error", "Oops, we have a problem (Error %d: %s).", NONE, ACKNOWLEDGE);
            case CHAMBER_PROBLEM:
                return ErrorDefaults("Chamber Error", "There is a problem with your chamber heater (Error %d: %s). Please visit our Support page at Makerbot.com/support.", NONE, ACKNOWLEDGE);
            case MISC_ERROR:
                return ErrorDefaults("System Error", "Oops, we have a problem (Error %d: %s).", NONE, ACKNOWLEDGE);
            case FILAMENT_BAY_ERROR:
                return ErrorDefaults("Filament Bay Error", "Oops, we have a problem (Error %d: %s).", NONE, ACKNOWLEDGE);
        }
    return ErrorDefaults();
    }

    void init() {
        ErrorDefaults d;
        switch(m_error) {
            case kThermocoupleOutOfRange:
                d = get_base_defaults(TOOL_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Thermocouple Out Of Range").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kThermocoupleUnplugged:
                d = get_base_defaults(TOOL_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Thermocouple Unplugged").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kThermocoupleTooHot:
                d = get_base_defaults(TOOL_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Thermocouple Too Hot").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kThermocoupleDataUnchanging:
                d = get_base_defaults(TOOL_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Thermocouple Data Not Changing").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kThermocoupleDataInvalid:
                d = get_base_defaults(TOOL_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Thermocouple Data Invalid").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterShort:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Short").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kFilamentFanShort:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Filament Fan Short").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kFilamentFanOpen:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Filament Fan Open").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterTemperatureOverrunTriggered:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Temperature Overrun Triggered").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolShort:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Short").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kUnsupportedTool:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Unsupported Tool").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolFanShort:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Fan Short").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterTemperatureSagTriggered:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Temperature Sag Triggered").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolFanOpen:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Fan Open").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterRiseWatchdogTriggered:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Rise Watchdog Triggered").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kWatchdogTriggered:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Watchdog Triggered").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kMotorOverCurrent:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Motor Over Current").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadCommunicationError:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Communication Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadTimedOut:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Timed Out").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kCommandTooLong:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Command Too Long").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolChecksumFail:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Checksum Fail").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolReadError:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Read Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolOpen:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Open").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromChecksumFailure:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom Checksum Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNotConnected:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Not Connected").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kMismatchApiVersion:
                d = get_base_defaults(FW_FUNDAMENTALLY_BROKEN);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Mismatch Api Version").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kChamberHeaterFailure:
                d = get_base_defaults(CHAMBER_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Chamber Heater Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kChamberFanFailure:
                d = get_base_defaults(CHAMBER_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Chamber Fan Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kChamberHeaterDisconnected:
                d = get_base_defaults(CHAMBER_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Chamber Heater Disconnected").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kChamberThermistorDisconnected:
                d = get_base_defaults(CHAMBER_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Chamber Thermistor Disconnected").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterOverTemp:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Over Temp").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kChamberTemperatureOverrun:
                d = get_base_defaults(CHAMBER_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Chamber Temperature Overrun").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kI2CCommError:
                d = get_base_defaults(CHAMBER_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "I2C Communication Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHesLogFull:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "HES Log Full").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidToolIndex:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Tool Index").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kMalformedPacket:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Malformed Packet").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolBufferFull:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Buffer Full").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadBufferFull:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Buffer Full").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterOpen:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Open").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kDrawerNoFilament:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Drawer Out Of Filament").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidResponse:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Response").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromSlaveMissedValue:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom Slave Missed Value").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromFatalInternalError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom Fatal Internal Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidEncoderResolution:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Encoder Resolution").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromStartFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom Start Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromOutOfDate:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom Out Of Date").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNone:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "None").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kThermocoupleAdcBusy:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Thermocouple Adc Busy").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromUnknownVersion:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom Unknown Version").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromIdVerifyFail:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom Id Verify Fail").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kCommandIndexMismatch:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Command Index Mismatch").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromNoSlaveAck:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Eeprom No Slave Ack").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kAcPowerDisconnected:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "AC Power Disconnected").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kBusy:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Busy").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEmptyEepromCache:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Empty EEPROM Cache").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromWriteFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "EEPROM Write Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromVerifyFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "EEPROM Verify Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kProgramNotStarted:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Program Not Started").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kProgramCompleted:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Program Completed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kSeriousInternalError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Serious Internal Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNfcScanFailure:
                d = get_base_defaults(FILAMENT_BAY_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "NFC Scan Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNfcReadFailure:
                d = get_base_defaults(FILAMENT_BAY_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "NFC Read Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNfcWriteFailure:
                d = get_base_defaults(FILAMENT_BAY_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "NFC Write Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNfcUidMismatch:
                d = get_base_defaults(FILAMENT_BAY_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "NFC UID Mismatch").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kThermocoupleCommunicationFailure:
                m_title = "Extruder Error";
                m_message = (boost::format("Your Smart Extruder has been disconnected (Error %d). Please remove and reattach the Smart Extruder.") % static_cast<int>(m_error)).str();
                m_type = TOOL_ERROR;
                m_action = ACKNOWLEDGE;
                break;
            case kUnusualStallCondition:
                m_title = "Stall Condition Detected";
                m_message = "An unusual print error has occurred. To protect your extruder, the print was cancelled. Try the print again and this error will most likely not reoccur.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kNoFilament:
                m_title = "Out of Filament";
                m_message = (boost::format("This process requires filament to proceed. (Warning %d)") % static_cast<int>(m_error)).str();
                m_type = FILAMENT_ERROR;
                m_action = CHANGE_FILAMENT;
                break;
            case kDoorInterlockTriggered:
                m_title = "Chamber Open";
                m_message = (boost::format("The heated build chamber is open (Warning %d). Please close the door to continue.") % static_cast<int>(m_error)).str();
                m_type = CHAMBER_ERROR;
                m_action = ACKNOWLEDGE;
                break;
            case kLidInterlockTriggered:
                m_title = "Top Lid Open";
                m_message = (boost::format("The top lid is open (Warning %d). Please close the lid to continue.") % static_cast<int>(m_error)).str();
                m_type = CHAMBER_ERROR;
                m_action = ACKNOWLEDGE;
                break;
            case kHeaterHoldWatchdogTriggered:
                m_title = "Extruder Cooling";
                m_message = "Your extruder cools down if the printer stays idle for a few minutes.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kFilamentSlip:
                m_title = "Filament Jam";
                m_message = (boost::format("Your filament seems to be jammed (Error %d). Please unload your remaining filament, and then reload it to continue printing.") % static_cast<int>(m_error)).str();
                m_type = FILAMENT_ERROR;
                m_action = CHANGE_FILAMENT;
                break;
            case kNoToolConnected:
                m_title = "Extruder Error";
                m_message = (boost::format("Your Smart Extruder is not connected (Error %d). Please reconnect your Smart Extruder.") % static_cast<int>(m_error)).str();
                m_type = TOOL_ERROR;
                m_action = ATTACH_TOOL;
                break;
            case kBadToolConnected:
                m_title = "Extruder Error";
                m_message = (boost::format("Oops, we have a problem with your Smart Extruder (Error %d). Please detach and reattach your Smart Extruder.") % static_cast<int>(m_error)).str();
                m_type = TOOL_ERROR;
                m_action = ACKNOWLEDGE;
                break;
            case kChamberNotConnected:
                m_title = "Chamber Heater Disconnect";
                m_message = (boost::format("The build chamber heater controller is disconnected (Error %d). Please visit our Support page at Makerbot.com/support.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kCarriageNotConnected:
                m_title = "Carriage Disconnected";
                m_message = (boost::format("The extruder carriage is disconnected from the machine (Error %d). Please visit our Support page at Makerbot.com/support.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kToolheadNoResponse:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead No Response").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadMalformedPacket:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Malformed Packet").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadMismatchApiVersion:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Mismatch Api Version").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kCouldNotSendToolheadCommand:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Could Not Send Toolhead Command").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadNotInitialized:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Not Initialized").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadFeederSleepInterrupted:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Feeder Sleep Interrupted").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kEepromUpdateFailed:
                d = get_base_defaults(TOOL_CRITICAL);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Smart Extruder Update Failed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHomingNotCompleted:
                d = get_base_defaults(HOMING_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Homing Not Completed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHesNoContact:
                d = get_base_defaults(HOMING_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Hes made no contact").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kUnknownHomingMethod:
                d = get_base_defaults(HOMING_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Unknown Homing Method").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNoHesLog:
                d = get_base_defaults(HOMING_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "No Hes Log").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHomingTimedOut:
                d = get_base_defaults(HOMING_PROBLEM);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Homing Timed Out").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHesRebaseFailed:
                d = get_base_defaults(HOMING_PROBLEM_STUCK);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Hes Rebase Failed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHesLogOverflow:
                d = get_base_defaults(HOMING_PROBLEM_STUCK);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Hes Log Overflow").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kBadHesWaveforms:
                d = get_base_defaults(HOMING_PROBLEM_STUCK);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Bad Hes Waveforms").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNoValidHesSlope:
                d = get_base_defaults(HOMING_PROBLEM_STUCK);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "No Valid Hes Slope").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kJsonToolpathNothingParsed:
                d = get_base_defaults(PRINT_FILE_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Json Toolpath Nothing Parsed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kJsonToolpathParseError:
                d = get_base_defaults(PRINT_FILE_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Json Toolpath Parse Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kBadPrintFile:
                d = get_base_defaults(PRINT_FILE_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Print File Corrupt").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kDefaultConfigNotFound:
                d = get_base_defaults(FW_FUNDAMENTALLY_BROKEN);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Default Config Not Found").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kDefaultConfigMissingValue:
                d = get_base_defaults(FW_FUNDAMENTALLY_BROKEN);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Default Config Missing Value").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidEepromFilepath:
                d = get_base_defaults(FW_FUNDAMENTALLY_BROKEN);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Eeprom Filepath").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kDefaultConfigParseFailure:
                d = get_base_defaults(FW_FUNDAMENTALLY_BROKEN);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Default Config Parse Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kCriticalKaitenError:
                d = get_base_defaults(KAITEN_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Critical System Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kKaitenError:
                d = get_base_defaults(KAITEN_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "System Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kPruInitializationFailed:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Pru Initialization Failed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kUserConfigMissingValue:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "User Config Missing Value").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeatZeroTemperature:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heat Zero Temperature").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kSuspendNoValidLastMove:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Suspend No Valid Last Move").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNoMacAddressSet:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "No Mac Address Set").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterAddFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Add Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kKnobNotTightened:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Knob Not Tightened").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidActiveToolSetting:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Active Tool Setting").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kUnsupportedEepromVersion:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Upload candidate EEPROM map is unsupported by the current tool").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadSpiConfigError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Spi Config Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHeaterNotHeating:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Heater Not Heating").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolheadCommandTxFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Toolhead Command Tx Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kStopIteration:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Stop Iteration").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidFileType:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid File Type").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kUserConfigParseFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "User Config Parse Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNoToolheadsDetected:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "No Toolheads Detected").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kCorruptedFirmwareFile:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Corrupted Firmware File").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kZPauseValueNotFound:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Z Pause Value Not Found").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kDiagnosticsTestFailed:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Diagnostics Test Failed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidAccelerationBufferSize:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Acceleration Buffer Size").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kUserConfigNotFound:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "User Config Not Found").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kFileAlreadyOpen:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "File Already Open").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kBufferFull:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Buffer Full").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kExtrusionDistanceMissing:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Extrusion Distance Missing").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kParseMore:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Parse More").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidToolRequested:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Tool Requested").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kBadToolCountConfig:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Bad Tool Count Config").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kResumeComplete:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Resume Complete").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kSuspendIndexNotFound:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Suspend Index Not Found").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kPowerMonitorAdcFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Power Monitor ADC Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kDiagnosticsUnknownStateError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Diagnostics Unknown State Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidAxis:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Axis").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kOk:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Ok").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidFanDuty:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Fan Duty").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kTopBunkFanFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Top Bunk Fan Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kDiagnostisUknownTestError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Diagnostis Uknown Test Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidHeaterIndex:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Heater Index").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidProgramPath:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Program Path").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolProgramFailed:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Tool Program Failed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kZeroLengthMove:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Zero Length Move").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kFileTransferTimeout:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "File Transfer Timeout").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kMachineDriverClosed:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Machine Driver Closed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNotImplemented:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Not Implemented").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNotReady:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Not Ready").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kRemoteFull:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Remote Full").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kLocalEmpty:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Local Buffer Empty").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kKeepCalling:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Keep Calling").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kMachineDriverFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Machine Driver Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInvalidEndstopType:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Invalid Endstop Type").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kFileNotFound:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "File Not Found").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kInterfaceLedCommsError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Interface Led Comms Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kPowerMonitorI2CFailure:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Power Monitor I2C Failure").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kJsonConfigKeyError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Configuration Key Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kJsonConfigValueError:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Configuration Value Error").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kHesReversed:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Hes Magnet Reversed").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kLogHesTimedOut:
                d = get_base_defaults(MISC_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Log HES Data Timed Out").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kAssistMotorOverTemp:
                d = get_base_defaults(FILAMENT_BAY_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "Assist Motor is Over Temperature and has timed out.").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kNoNfcTagsFound:
                d = get_base_defaults(FILAMENT_BAY_ERROR);
                m_title = d.title;
                m_message = (boost::format(d.message) % static_cast<int>(m_error) % "No NFC Tags Found").str();
                m_type = d.type;
                m_action = d.action;
                break;
            case kToolNotCalibrated:
                m_title = "Run Calibration";
                m_message = "Please run Homing Calibration before printing with this Smart Extruder";
                m_type = TOOL_ERROR;
                m_action = CALIBRATE_Z;
                break;
            case kNoBuildPlate:
                m_title = "No Build Plate";
                m_message = (boost::format("Please ensure your build plate is properly attached (Warning %d).") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kCarriageProgramFailure:
                m_title = "Carriage Program Failed";
                m_message = (boost::format("The extruder carriage cannot be programmed (Error %d). Please visit our Support page at Makerbot.com/support.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kNoHesChange:
                m_title = "Homing Error";
                m_message = (boost::format("Homing failed (Error %d). Your Smart Extruder is not communicating. Please try again.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kBothSidesTooHigh:
                m_title = "Leveling Error";
                m_message = (boost::format("Leveling failed (Error %d). Your extruder nozzle may be stuck. Please try again.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kLevelingWithFilament:
                m_title = "Clear Filament";
                m_message = (boost::format("Please remove filament from the Smart Extruder before proceeding (Warning %d).") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = UNLOAD_FILAMENT;
                break;
            case kPrintToolConnectFailed:
                m_title = "Extruder Error";
                m_message = (boost::format("Smart Extruder Connect Failed (Error %d).  Please disconnect your Smart Extruder and try again.") % static_cast<int>(m_error)).str();
                m_type = TOOL_ERROR;
                m_action = ACKNOWLEDGE;
                break;
            case kChamberProgramFailure:
                m_title = "Chamber Program Failed";
                m_message = (boost::format("The build chamber heater controller cannot be programmed (Error %d). Please visit our Support page at Makerbot.com/support.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kZPause:
                m_title = "Print Paused";
                m_message = (boost::format("Paused your print. (TODO-This probably shouldn't be an error? #checkoutmysushitho %d)") % static_cast<int>(m_error)).str();
                m_type = ZPAUSE;
                m_action = ZPAUSED;
                break;
            case kMoveCommandOutsideAxisBounds:
                m_title = "File Error";
                m_message = (boost::format("Error %d: Please make sure that your .makerbot file is prepared for the correct printer type.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kToolheadNotHeating:
                m_title = "Heating Error";
                m_message = (boost::format("DO NOT touch the extruder as it may be very hot (Error %d). Please visit our Support page at Makerbot.com/support.") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kOutOfFilament:
                m_title = "Out of Filament";
                m_message = (boost::format("Please wait while your Smart Extruder unloads any leftover filament. (Warning %d)") % static_cast<int>(m_error)).str();
                m_type = FILAMENT_ERROR;
                m_action = CHANGE_FILAMENT;
                break;
            case kNoFilamentLoaded:
                m_title = "No Filament";
                m_message = (boost::format("Please load filament before starting your print. (Warning %d)") % static_cast<int>(m_error)).str();
                m_type = FILAMENT_ERROR;
                m_action = CHANGE_FILAMENT;
                break;
            case kRecoverableFilamentJam:
                m_title = "Temporary Filament Jam";
                m_message = (boost::format("Clearing extruder to resolve temporary filament jam.") % static_cast<int>(m_error)).str();
                m_type = FILAMENT_ERROR;
                m_action = ACKNOWLEDGE;
                break;
            case kPrintingNetworkError:
                m_title = "Network Error";
                m_message = (boost::format("There was a problem communicating with MakerBot Cloud Services. Please try your print again later. (Warning %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kCloudSlicingError:
                m_title = "Slicing Error";
                m_message = (boost::format("Failed to slice your layout for printing. Please try again later. (Warning %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kPrintExtruderMismatch:
                m_title = "Print File Error";
                m_message = "The selected print was sliced for a %1%, but a %2% is attached. Please reslice for a %2%. (Error 1048)";
                m_messageArgs.push_back("file_tool");
                m_messageArgs.push_back("current_tool");
                m_type = NONE;
                m_action = ACKNOWLEDGE_OR_CONTINUE;
                break;
            case kPrintMachineMismatch:
                m_title = "Print File Error";
                m_message = (boost::format("This print file was sliced for a different machine type. Please reslice for the correct printer. (Error %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kPrintVersionMismatch:
                m_title = "Print File Error";
                m_message = (boost::format("This print file is not compatible with this firmware version. Please upgrade firmware. (Error %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kPrintRaftDisabled:
                m_title = "Print File Error";
                m_message = (boost::format("The selected print was sliced without a raft, but a raft is recommended for this type of printer. Please reslice with a raft. (Error %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE_OR_CONTINUE;
                break;
            case kInsufficientUsbSpace:
                m_message = "There is not enough free space on the attached USB drive.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kOperationTimedOut:
                m_message = "Internal operation timed out. Please contact Support.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kFirmwareUpdateCheckError:
                m_message = "Could not check for firmware updates. Please contact Support.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kFirmwareDownloadError:
                m_message = "Could not download firmware. Please contact Support.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kInternetConnectionError:
                m_message = "Could not connect to the Internet.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kPrintingUrlError:
                m_title = "Invalid URL";
                m_message = "There was a problem downloading the .makerbot file from the URL provided.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kWifiEthernetConnected:
                m_title = "Wireless Configuration Error";
                m_message = "Wireless configuration cannot proceed while a network cable is plugged in.";
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kWifiNoSuchSsid:
                m_title = "Wireless Network Not Found";
                m_message = (boost::format("The specified wireless network could not be found (Error %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kWifiPasswordRequired:
                m_title = "Wireless Network Error";
                m_message = (boost::format("The specified wireless network requires a password (Error %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kWifiPasswordInvalid:
                m_title = "Wireless Network Error";
                m_message = (boost::format("The password specified for the wireless network is invalid (Error %d)") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kWifiSsidRequired:
                m_title = "Wireless Network Error";
                m_message = (boost::format("The SSID of the wireless network must be specified  (Error %d).") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            case kWifiGeneralError:
                m_title = "Wireless Network Error";
                m_message = (boost::format("There was a problem connecting to the network  (Error %d).") % static_cast<int>(m_error)).str();
                m_type = NONE;
                m_action = ACKNOWLEDGE;
                break;
            default:
                break;
        }
    }

    std::string m_message;
    TYPE m_type;
    ACTION m_action;
    std::string m_title;
    Error m_error;
    MESSAGE_ARGS m_messageArgs;

};

inline bool operator==(const BotError &lhs, const BotError &rhs) {return lhs.error() == rhs.error();}
inline bool operator==(const BotError &lhs, Error rhs) {return lhs.error() == rhs;}
inline bool operator==(Error lhs, const BotError &rhs) {return operator==(rhs, lhs);}
inline bool operator!=(const BotError &lhs, const BotError &rhs) {return !(lhs == rhs);}
inline bool operator!=(const BotError &lhs, Error rhs) {return !(lhs == rhs);}
inline bool operator!=(Error lhs, const BotError &rhs) {return !(lhs == rhs);}

} // namespace

#endif /* BOT_ERROR_NOQT_HH */
