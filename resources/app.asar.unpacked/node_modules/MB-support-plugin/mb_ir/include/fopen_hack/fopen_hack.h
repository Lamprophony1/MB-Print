
#ifndef FOPEN_HACK_H_
#define FOPEN_HACK_H_

#include <stdio.h>

// We use this in minizip, which is c code
#ifdef __cplusplus
extern "C" {
#endif  // __cplusplus

/// On windows if you want to open files with names outside the current ANSI
/// codepage (I think it's the codepage?) you have to use wide strings.
/// libthing will assume that we're receiving utf-8 encoded strings and use
/// this on windows to convert to wide string before calling _wfopen, the
/// wide string version of fopen.
FOPENHACK_API FILE* hacked_fopen(const char* filename, const char* mode);

#ifdef __cplusplus
}  // extern "C"

#include <string>

/// So it looks like fopen isn't the only function that windows does this with
/// and unfortunately one or more libraries we use (which is to say, which we
/// have modified and checked into our repos) use those other functions.
/// Probably I should've just been using a lightly wrapped boost::nowide for
/// all this stuff, but hey, it's got hack in the name, right?
FOPENHACK_API std::wstring widen(const std::string str);
#endif  // __cplusplus

#endif  // FOPEN_HACK_H_
