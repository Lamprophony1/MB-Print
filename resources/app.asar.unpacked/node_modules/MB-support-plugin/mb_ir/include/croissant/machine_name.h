// Copyright 2013 MakerBot Industries

#ifndef INCLUDE_CROISSANT_MACHINE_NAME_H_
#define INCLUDE_CROISSANT_MACHINE_NAME_H_

#include <memory>
#include <string>

namespace croissant {
class MachineNamePrivate;

/// Unique identifier for a machine
///
/// Currently it is in the form of VID:PID:ISERIAL, but this is not
/// guaranteed to remain true (do not depend on this format).
///
/// A valid machine name must be created with a string. No
/// restrictions are placed on that string. An invalid machine name
/// can be constructed with the zero-argument constructor.
class CROISSANT_API MachineName {
 public:
  /// Construct an invalid machine name
  MachineName();

  /// Construct a valid machine name
  explicit MachineName(const std::string &name);

  /// Construct a full copy
  MachineName(const MachineName &other);

  /// Copy another machine name
  MachineName &operator=(const MachineName &other);

  ~MachineName();

  /// Return whether the machine name is valid or not
  bool valid() const;

  bool operator==(const MachineName &other) const;

  bool operator<(const MachineName &other) const;

  /// Get the machine name, suitable for passing to the croissant server
  ///
  /// If the machine name is invalid, an empty string will be returned.
  const std::string &name() const;

 private:
  std::unique_ptr<MachineNamePrivate> m_private;
};

}

#endif  // INCLUDE_CROISSANT_MACHINE_NAME_H_
