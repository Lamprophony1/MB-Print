// THIS FILE IS AUTOGENERATED

#ifndef CROISSANT_METHODS_HACK_H_
#define CROISSANT_METHODS_HACK_H_

#include <string>

#include "croissant/asynchronous_method.h"
#include "croissant/future.h"

#include <jsonrpc/jsonrpc.h>
#include <boost/optional.hpp>

namespace croissant {
namespace methods {

{{#requests}}
class CROISSANT_API {{cppname}} : public AsynchronousMethod {
  public:
    {{#has_parameters}}
    class CROISSANT_API Parameters {
      public:
        explicit Parameters(
            {{#parameters}}
            {{^has_default}}
            {{{cpptype}}}{{cppname}}{{^lastparam}},{{/lastparam}}
            {{/has_default}}
            {{#has_default}}
            boost::optional<{{{cpptype}}}> {{cppname}}=boost::none{{^lastparam}},{{/lastparam}}
            {{/has_default}}
            {{/parameters}}
        );
        {{#parameters}}
        {{^has_default}}
        {{{cppstoretype}}}{{cppname}};
        {{/has_default}}
        {{#has_default}}
        boost::optional<{{{cppstoretype}}}> {{cppname}};
        {{/has_default}}
        {{/parameters}}
    };
    {{/has_parameters}}
    {{^has_parameters}}
    class CROISSANT_API Parameters {
      public:
        Parameters() {
        }
    };
    {{/has_parameters}}

    {{cppname}}();

    {{^has_parameters}}
    boost::future<{{{return_type}}}> invoke(JsonRpc &jsonRpc);

    inline boost::future<{{{return_type}}}> invoke(
            JsonRpc &jsonRpc, const Parameters &) {
        return invoke(jsonRpc);
    }
    {{/has_parameters}}
    {{#has_parameters}}
    boost::future<{{{return_type}}}> invoke(JsonRpc &jsonRpc, const Parameters &p);

    boost::future<{{{return_type}}}> invoke(
        JsonRpc &jsonRpc,
        {{#parameters}}
        {{^has_default}}
        {{{cpptype}}}{{cppname}}{{^lastparam}},{{/lastparam}}
        {{/has_default}}
        {{#has_default}}
        boost::optional<{{{cpptype}}}> {{cppname}}{{^lastparam}},{{/lastparam}}
        {{/has_default}}
        {{/parameters}}
    );
    {{/has_parameters}}
};


{{/requests}}

{{#notifications}}

{{^is_request}}
class CROISSANT_API {{cppname}} : public JsonRpcNotification {
{{/is_request}}
{{#is_request}}
class CROISSANT_API {{cppname}} : public JsonRpcMethod {
{{/is_request}}
  public:
    {{cppname}}(
        std::function <void(
            {{#parameters}}
            {{{cpptype}}}{{cppname}}{{^lastparam}},{{/lastparam}}
            {{/parameters}}
        )> & func);
{{^is_request}}
    void invoke(const Json::Value &);
{{/is_request}}
{{#is_request}}
    virtual void invoke(
        const Json::Value &,
        std::shared_ptr<JsonRpcMethod::Response>) override;
{{/is_request}}
  private:
    std::shared_ptr<std::function <void(
        {{#parameters}}
        {{{cpptype}}}{{cppname}}{{^lastparam}},{{/lastparam}}
        {{/parameters}}
    )> > m_func;
};

{{/notifications}}
}  // namespace methods
}  // namespace croissant

#endif  // CROISSANT_METHODS_HACK_H_
