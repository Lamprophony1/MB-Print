// Copyright 2015 MakerBot Industries

#ifndef INCLUDE_GEOMUTILS_UTILITIES_H_
#define INCLUDE_GEOMUTILS_UTILITIES_H_

#include <list>
#include <vector>

#include "geomutils/Loop.h"
#include "geomutils/OpenPath.h"
#include "geomutils/Scalar.h"

namespace geomutils {
/// given a point, finds the Path that starts the closest from that point
/// and return the distance. Also, the iterator to the closest Path is
/// "returned"
///
/// This code was writen by Hugo and should be treated as such.
GEOMUTILS_API Scalar findClosestPath(
    const Vector2& endOfPreviousPath,
    std::vector<OpenPath>::iterator startPathIt,
    std::vector<OpenPath>::iterator endPathIt,
    std::vector<OpenPath>::iterator &bestPathIt);

/// Turn a vector of open paths into loops added to the back of a list of loops
///
/// tol matters maybe kinda?
///
/// This code was writen by Hugo and should be treated as such.
GEOMUTILS_API void pathsToLoops(
    std::vector<OpenPath> &paths, const Scalar tol, std::list<Loop> &loopList);

/// Turn a vector of open paths into a loop
///
/// This is my second pass at replacing the two methods above. I need to write
/// unit tests before I feel comfortable using it anywhere though. -zap
GEOMUTILS_API std::list<Loop> pathsToLoops(
    std::vector<OpenPath> &paths, const Scalar tol);

}  // namespace geomutils

#endif  // INCLUDE_GEOMUTILS_UTILITIES_H_
