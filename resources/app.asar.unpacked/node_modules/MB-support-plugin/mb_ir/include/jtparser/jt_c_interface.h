// Copyright 2014 MakerBot Industries

#ifndef FIRMWARE_PARSER_SRC_JT_C_INTERFACE_H_
#define FIRMWARE_PARSER_SRC_JT_C_INTERFACE_H_

#include "jtparser/jt_parser.hh"
#include "jtparser/parser_interface.hh"

extern "C" {
// NOLINT

typedef BirdWing::JsonToolpathParser std_parser;

struct ParserInterface;

PARSER_API
std_parser *CreateJTParser(BirdWing::ParserInterface *machine,
                           char const *const filepath,
                           size_t axis_count,
                           int fd = -1);

PARSER_API
int DestroyJTParser(std_parser *jtparser);

PARSER_API
int ParseNext(std_parser *jtparser);

PARSER_API
int Resume(std_parser *jtparser);

// The suspended position array being passed here through the pointer
// must have atleast 3 elements holding the suspended positions for the
// axes x, y, z.
PARSER_API
int Suspend(std_parser *jtparser, int suspend_index,
                        double *suspend_pos_array);

PARSER_API
int GetSize(std_parser *jtparser);

PARSER_API
char const *const
GetTagsAsString(std_parser *jtparser);

PARSER_API
char const *const
GetError(std_parser *jtparser);

// NOLINT
}  // extern "C"

#endif  // FIRMWARE_PARSER_SRC_JT_C_INTERFACE_H_
