// Copyright 2013 Makerbot Industries

#ifndef INCLUDE_THING_THING_ERROR_H_
#define INCLUDE_THING_THING_ERROR_H_

#include <stdexcept>
#include <string>

#include "mbcoreutils/version.h"

namespace LibThing {

struct THING_API IOError : public std::runtime_error {
  enum Type {
    kOpenForReadFailed,
    kOpenForWriteFailed,

    kInvalidExportFormat,

    kZipFileEmpty,

    kThingManifestMissing,
    kThingManifestParseFailed,

    kOpenMeshWriteError
  };

  IOError(const Type p_type,
          const std::string &p_path);

  ~IOError() throw();

  /// Get an ASCII representation of the IOError
  ///
  /// The format will be "LibThing::IOError(typeString(), "path")"
  std::string formattedString() const;

  /// Get an ASCII representation of the type
  ///
  /// E.g. kOpenForReadFailed will return "kOpenForReadFailed". This
  /// is intended for logging, not user-facing messages.
  const char *typeString() const;

  const Type type;
  const std::string path;
};

struct THING_API VersionError : public std::runtime_error {
  const MakerBot::Version m_currentVersion;
  const MakerBot::Version m_thingVersion;

  explicit VersionError(const MakerBot::Version &thingVersion);

  ~VersionError() throw();
};

}  // namespace LibThing

#endif  // INCLUDE_THING_THING_ERROR_H_
