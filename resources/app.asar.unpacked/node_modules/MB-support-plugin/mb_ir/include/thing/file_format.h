// Copyright 2013 Makerbot Industries

#ifndef INCLUDE_THING_FILE_FORMAT_H_
#define INCLUDE_THING_FILE_FORMAT_H_

#include <string>
#include <vector>

namespace LibThing {

/// A supported export or import format
struct THING_API FileFormat {
  /// A human-friendly name for a file format
  ///
  /// E.g. "Binary STL"
  const std::string name;

  /// A lower-case string of the file-format extension
  ///
  /// E.g. "stl"
  const std::string extension;

  /// A lower-case string of the file-format extension including the '.'
  ///
  /// This is usefull when using boost::filesystem::extension
  const std::string dotExtension() const {
    return '.' + extension;
  }

  /// True if the format can be opened or imported
  const bool readable;

  /// True if the format can be saved or exported
  const bool writable;
};

/// All import and export formats
extern THING_API const FileFormat * const kFileFormatObj;
extern THING_API const FileFormat * const kFileFormatPlyAscii;
extern THING_API const FileFormat * const kFileFormatPlyBinary;
extern THING_API const FileFormat * const kFileFormatStlAscii;
extern THING_API const FileFormat * const kFileFormatStlBinary;
extern THING_API const FileFormat * const kFileFormatThing;
extern THING_API const FileFormat * const kFileFormatInvalid;

typedef std::vector<const FileFormat *> FileFormatGroup;
const THING_API FileFormatGroup &allFileFormats();

/// Returns true if the extension matches a readable file format
///
/// The extension must be lower case and should not contain the period
bool THING_API isExtensionReadable(const std::string &extension);
}

#endif  // INCLUDE_THING_FILE_FORMAT_H_
