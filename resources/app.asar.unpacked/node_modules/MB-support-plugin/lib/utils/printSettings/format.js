"use strict";

const R = require('ramda');

const {
  roundPrec
} = require('../../util');

const translate = (i18n, key) => i18n.t(`mb:printSettings.${key}`); // **********************************************************************
// This file handles additional UI formatting for pretty display.
// It converts schema values into contextual values, which may or may not
// include signifiers such as "Recommended", etc.
// **********************************************************************

/**
 * @callback formatHigherOrderFunc
 * @example
 * settings.map(v => v.value).map(percent(this.i18n))
 * @param {object} i18n - internationalization object
 * @returns {formatFunc}
 */

/**
 * @callback formatFunc
 * @param {any} value - value of the setting
 * @returns {string|number}
 */

/** @type formatHigherOrderFunc */
// Returns value as is.


const identity = () => v => `${v}`;
/** @type formatHigherOrderFunc */


const round = p => () => v => roundPrec(p, v);
/** @type formatHigherOrderFunc */


const millimeter = () => v => `${v} mm`;
/** @type formatHigherOrderFunc */


const roundMillimeter = () => x => millimeter()(round(2)()(x));
/** @type formatHigherOrderFunc */


const millimeterPerSecond = () => v => `${millimeter()(Math.round(v))}/s`;
/** @type formatHigherOrderFunc */


const percent = () => v => `${Math.round(v * 100)} %`;
/** @type formatHigherOrderFunc */


const degrees = () => v => `${Math.round(v)}Â°`;
/** @type formatHigherOrderFunc */


const celsius = () => v => `${degrees()(v)} C`;
/** @type formatHigherOrderFunc */


const seconds = () => v => `${roundPrec(1, v)} s`;
/** @type formatHigherOrderFunc */
// Returns pretty name from the "validStrings" object we get from sliceconfig.


const validString = i18n => (value, validStrings) => {
  return validStrings[value];
};
/** @type formatHigherOrderFunc */
// NOTE:  This i18n shows up as unused in linter, but is definitely necessary.
// Don't delete, or will get this.props.format undefined errors.


const layerHeight = i18n => v => `${millimeter()(roundPrec(2, v))}`;
/** @type formatHigherOrderFunc */


const printMode = i18n => v => `${translate(i18n, v)} - ${translate(i18n, `descriptions.${v}`)}`;
/** @type formatHigherOrderFunc */


const extruder = i18n => v => {
  // should fallback to just displaying the `extruderType` if there's
  // nothing specified in the translations file
  return i18n.t([`mb:printSettings.${v}`, v]);
};
/** @type formatHigherOrderFunc */


const shells = i18n => v => {
  switch (v) {
    case 1:
      return `1 Shell - ${translate(i18n, 'numberShellsHigh')}`;

    case 2:
      return `2 Shells - ${translate(i18n, 'numberShellsMedium')}`;

    case 5:
      return `5 Shells - ${translate(i18n, 'numberShellsLow')}`;

    default:
      return `${v} Shells`;
  }
};
/** @type formatHigherOrderFunc */


const ordinal_suffix = () => v => v + (10 > v || v > 20 ? [undefined, 'st', 'nd', 'rd'][v % 10] || 'th' : 'th');
/** @type formatHigherOrderFunc */


const layers = () => v => `${ordinal_suffix()(v)} layer`;
/**
 * Format a key into its path for the stupid ProjectStore. You'd think this function
 * is kind of superfluous, but try spelling "occurrence" 20 times in a row without
 * screwing it up.
 * @param {string} key - the final key of the "occurrence" or whatever... I don't understand
 * this diction.
 * @returns {string} - the formatted path
 */


const path = key => `occurrence:${key}`;
/**
 * Kind of the reverse of `path`. Really it's here to make the code more readable.
 * @param {string} path - the final path of the "occurrence" or whatever... I don't understand
 * this diction.
 * @returns {string} - the key extracted from the path
 */


const keyFromPath = R.pipe(R.split(':'), R.last);
module.exports = {
  translate,
  round,
  millimeter,
  roundMillimeter,
  millimeterPerSecond,
  percent,
  degrees,
  celsius,
  seconds,
  layerHeight,
  printMode,
  extruder,
  shells,
  layers,
  path,
  keyFromPath,
  identity,
  validString,
  noop: () => () => {}
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZvcm1hdC5qcyJdLCJuYW1lcyI6WyJSIiwicmVxdWlyZSIsInJvdW5kUHJlYyIsInRyYW5zbGF0ZSIsImkxOG4iLCJrZXkiLCJ0IiwiaWRlbnRpdHkiLCJ2Iiwicm91bmQiLCJwIiwibWlsbGltZXRlciIsInJvdW5kTWlsbGltZXRlciIsIngiLCJtaWxsaW1ldGVyUGVyU2Vjb25kIiwiTWF0aCIsInBlcmNlbnQiLCJkZWdyZWVzIiwiY2Vsc2l1cyIsInNlY29uZHMiLCJ2YWxpZFN0cmluZyIsInZhbHVlIiwidmFsaWRTdHJpbmdzIiwibGF5ZXJIZWlnaHQiLCJwcmludE1vZGUiLCJleHRydWRlciIsInNoZWxscyIsIm9yZGluYWxfc3VmZml4IiwidW5kZWZpbmVkIiwibGF5ZXJzIiwicGF0aCIsImtleUZyb21QYXRoIiwicGlwZSIsInNwbGl0IiwibGFzdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJub29wIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLENBQUMsR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBakI7O0FBRUEsTUFBTTtBQUFFQyxFQUFBQTtBQUFGLElBQWdCRCxPQUFPLENBQUMsWUFBRCxDQUE3Qjs7QUFFQSxNQUFNRSxTQUFTLEdBQUcsQ0FBQ0MsSUFBRCxFQUFPQyxHQUFQLEtBQWVELElBQUksQ0FBQ0UsQ0FBTCxDQUFRLG9CQUFtQkQsR0FBSSxFQUEvQixDQUFqQyxDLENBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUNBLE1BQU1FLFFBQVEsR0FBRyxNQUFNQyxDQUFDLElBQUssR0FBRUEsQ0FBRSxFQUFqQztBQUVBOzs7QUFDQSxNQUFNQyxLQUFLLEdBQUdDLENBQUMsSUFBSSxNQUFNRixDQUFDLElBQUlOLFNBQVMsQ0FBQ1EsQ0FBRCxFQUFJRixDQUFKLENBQXZDO0FBRUE7OztBQUNBLE1BQU1HLFVBQVUs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QixHQUFHLElBQUssY0FBYUEsR0FBSSxFQUF0QztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0EsTUFBTTBCLFdBQVcsR0FBRy9CLENBQUMsQ0FBQ2dDLElBQUYsQ0FBT2hDLENBQUMsQ0FBQ2lDLEtBQUYsQ0FBUSxHQUFSLENBQVAsRUFBcUJqQyxDQUFDLENBQUNrQyxJQUF2QixDQUFwQjtBQUVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDYmpDLEVBQUFBLFNBRGE7QUFFYk0sRUFBQUEsS0FGYTtBQUdiRSxFQUFBQSxVQUhhO0FBSWJDLEVBQUFBLGVBSmE7QUFLYkUsRUFBQUEsbUJBTGE7QUFNYkUsRUFBQUEsT0FOYTtBQU9iQyxFQUFBQSxPQVBhO0FBUWJDLEVBQUFBLE9BUmE7QUFTYkMsRUFBQUEsT0FUYTtBQVViSSxFQUFBQSxXQVZhO0FBV2JDLEVBQUFBLFNBWGE7QUFZYkMsRUFBQUEsUUFaYTtBQWFiQyxFQUFBQSxNQWJhO0FBY2JHLEVBQUFBLE1BZGE7QUFlYkMsRUFBQUEsSUFmYTtBQWdCYkMsRUFBQUEsV0FoQmE7QUFpQmJ4QixFQUFBQSxRQWpCYTtBQWtCYmEsRUFBQUEsV0FsQmE7QUFtQmJpQixFQUFBQSxJQUFJLEVBQUUsTUFBTSxNQUFNLENBQUU7QUFuQlAsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBSID0gcmVxdWlyZSgncmFtZGEnKTtcclxuXHJcbmNvbnN0IHsgcm91bmRQcmVjIH0gPSByZXF1aXJlKCcuLi8uLi91dGlsJyk7XHJcblxyXG5jb25zdCB0cmFuc2xhdGUgPSAoaTE4biwga2V5KSA9PiBpMThuLnQoYG1iOnByaW50U2V0dGluZ3MuJHtrZXl9YCk7XHJcblxyXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbi8vIFRoaXMgZmlsZSBoYW5kbGVzIGFkZGl0aW9uYWwgVUkgZm9ybWF0dGluZyBmb3IgcHJldHR5IGRpc3BsYXkuXHJcbi8vIEl0IGNvbnZlcnRzIHNjaGVtYSB2YWx1ZXMgaW50byBjb250ZXh0dWFsIHZhbHVlcywgd2hpY2ggbWF5IG9yIG1heSBub3RcclxuLy8gaW5jbHVkZSBzaWduaWZpZXJzIHN1Y2ggYXMgXCJSZWNvbW1lbmRlZFwiLCBldGMuXHJcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuXHJcbi8qKlxyXG4gKiBAY2FsbGJhY2sgZm9ybWF0SGlnaGVyT3JkZXJGdW5jXHJcbiAqIEBleGFtcGxlXHJcbiAqIHNldHRpbmdzLm1hcCh2ID0+IHYudmFsdWUpLm1hcChwZXJjZW50KHRoaXMuaTE4bikpXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBpMThuIC0gaW50ZXJuYXRpb25hbGl6YXRpb24gb2JqZWN0XHJcbiAqIEByZXR1cm5zIHtmb3JtYXRGdW5jfVxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBAY2FsbGJhY2sgZm9ybWF0RnVuY1xyXG4gKiBAcGFyYW0ge2FueX0gdmFsdWUgLSB2YWx1ZSBvZiB0aGUgc2V0dGluZ1xyXG4gKiBAcmV0dXJucyB7c3RyaW5nfG51bWJlcn1cclxuICovXHJcblxyXG4vKiogQHR5cGUgZm9ybWF0SGlnaGVyT3JkZXJGdW5jICovXHJcbi8vIFJldHVybnMgdmFsdWUgYXMgaXMuXHJcbmNvbnN0IGlkZW50aXR5ID0gKCkgPT4gdiA9PiBgJHt2fWA7XHJcblxyXG4vKiogQHR5cGUgZm9ybWF0SGlnaGVyT3JkZXJGdW5jICovXHJcbmNvbnN0IHJvdW5kID0gcCA9PiAoKSA9PiB2ID0+IHJvdW5kUHJlYyhwLCB2KTtcclxuXHJcbi8qKiBAdHlwZSBmb3JtYXRIaWdoZXJPcmRlckZ1bmMgKi9cclxuY29uc3QgbWlsbGltZXRlciA9ICgpID0+IHYgPT4gYCR7dn0gbW1gO1xyXG5cclxuLyoqIEB0eXBlIGZvcm1hdEhpZ2hlck9yZGVyRnVuYyAqL1xyXG5jb25zdCByb3VuZE1pbGxpbWV0ZXIgPSAoKSA9PiB4ID0+IG1pbGxpbWV0ZXIoKShyb3VuZCgyKSgpKHgpKTtcclxuXHJcbi8qKiBAdHlwZSBmb3JtYXRIaWdoZXJPcmRlckZ1bmMgKi9cclxuY29uc3QgbWlsbGltZXRlclBlclNlY29uZCA9ICgpID0+IHYgPT4gYCR7bWlsbGltZXRlcigpKE1hdGgucm91bmQodikpfS9zYDtcclxuXHJcbi8qKiBAdHlwZSBmb3JtYXRIaWdoZXJPcmRlckZ1bmMgKi9cclxuY29uc3QgcGVyY2VudCA9ICgpID0+IHYgPT4gYCR7TWF0aC5yb3VuZCh2ICogMTAwKX0gJWA7XHJcblxyXG4vKiogQHR5cGUgZm9ybWF0SGlnaGVyT3JkZXJGdW5jICovXHJcbmNvbnN0IGRlZ3JlZXMgPSAoKSA9PiB2ID0+IGAke01hdGgucm91bmQodil9wrBgO1xyXG5cclxuLyoqIEB0eXBlIGZvcm1hdEhpZ2hlck9yZGVyRnVuYyAqL1xyXG5jb25zdCBjZWxzaXVzID0gKCkgPT4gdiA9PiBgJHtkZWdyZWVzKCkodil9IENgO1xyXG5cclxuLyoqIEB0eXBlIGZvcm1hdEhpZ2hlck9yZGVyRnVuYyAqL1xyXG5jb25zdCBzZWNvbmRzID0gKCkgPT4gdiA9PiBgJHtyb3VuZFByZWMoMSwgdil9IHNgO1xyXG5cclxuLyoqIEB0eXBlIGZvcm1hdEhpZ2hlck9yZGVyRnVuYyAqL1xyXG4vLyBSZXR1cm5zIHByZXR0eSBuYW1lIGZyb20gdGhlIFwidmFsaWRTdHJpbmdzXCIgb2JqZWN0IHdlIGdldCBmcm9tIHNsaWNlY29uZmlnLlxyXG5jb25zdCB2YWxpZFN0cmluZyA9IGkxOG4gPT4gKHZhbHVlLCB2YWxpZFN0cmluZ3MpID0+IHtcclxuICAgIHJldHVybiB2YWxpZFN0cmluZ3NbdmFsdWVdO1xyXG59O1xyXG5cclxuLyoqIEB0eXBlIGZvcm1hdEhpZ2hlck9yZGVyRnVuYyAqL1xyXG4vLyBOT1RFOiAgVGhpcyBpMThuIHNob3dzIHVwIGFzIHVudXNlZCBpbiBsaW50ZXIsIGJ1dCBpcyBkZWZpbml0ZWx5IG5lY2Vzc2FyeS5cclxuLy8gRG9uJ3QgZGVsZXRlLCBvciB3aWxsIGdldCB0aGlzLnByb3BzLmZvcm1hdCB1bmRlZmluZWQgZXJyb3JzLlxyXG5jb25zdCBsYXllckhlaWdodCA9IGkxOG4gPT4gdiA9PiBgJHttaWxsaW1ldGVyKCkocm91bmRQcmVjKDIsIHYpKX1gO1xyXG5cclxuLyoqIEB0eXBlIGZvcm1hdEhpZ2hlck9yZGVyRnVuYyAqL1xyXG5jb25zdCBwcmludE1vZGUgPSBpMThuID0+IHYgPT4gYCR7dHJhbnNsYXRlKGkxOG4sIHYpfSAtICR7dHJhbnNsYXRlKGkxOG4sIGBkZXNjcmlwdGlvbnMuJHt2fWApfWA7XHJcblxyXG4vKiogQHR5cGUgZm9ybWF0SGlnaGVyT3JkZXJGdW5jICovXHJcbmNvbnN0IGV4dHJ1ZGVyID0gaTE4biA9PiB2ID0+IHtcclxuICAgIC8vIHNob3VsZCBmYWxsYmFjayB0byBqdXN0IGRpc3BsYXlpbmcgdGhlIGBleHRydWRlclR5cGVgIGlmIHRoZXJlJ3NcclxuICAgIC8vIG5vdGhpbmcgc3BlY2lmaWVkIGluIHRoZSB0cmFuc2xhdGlvbnMgZmlsZVxyXG4gICAgcmV0dXJuIGkxOG4udChbYG1iOnByaW50U2V0dGluZ3MuJHt2fWAsIHZdKTtcclxufTtcclxuXHJcbi8qKiBAdHlwZSBmb3JtYXRIaWdoZXJPcmRlckZ1bmMgKi9cclxuY29uc3Qgc2hlbGxzID0gaTE4biA9PiB2ID0+IHtcclxuICAgIHN3aXRjaCAodikge1xyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgcmV0dXJuIGAxIFNoZWxsIC0gJHt0cmFuc2xhdGUoaTE4biwgJ251bWJlclNoZWxsc0hpZ2gnKX1gO1xyXG4gICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgcmV0dXJuIGAyIFNoZWxscyAtICR7dHJhbnNsYXRlKGkxOG4sICdudW1iZXJTaGVsbHNNZWRpdW0nKX1gO1xyXG4gICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgcmV0dXJuIGA1IFNoZWxscyAtICR7dHJhbnNsYXRlKGkxOG4sICdudW1iZXJTaGVsbHNMb3cnKX1gO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBgJHt2fSBTaGVsbHNgO1xyXG4gICAgfVxyXG59O1xyXG5cclxuLyoqIEB0eXBlIGZvcm1hdEhpZ2hlck9yZGVyRnVuYyAqL1xyXG5jb25zdCBvcmRpbmFsX3N1ZmZpeCA9ICgpID0+IHYgPT4gdiArICgxMCA+IHYgfHwgdiA+IDIwID8gW3VuZGVmaW5lZCwgJ3N0JywgJ25kJywgJ3JkJ11bdiAlIDEwXSB8fCAndGgnIDogJ3RoJyk7XHJcblxyXG4vKiogQHR5cGUgZm9ybWF0SGlnaGVyT3JkZXJGdW5jICovXHJcbmNvbnN0IGxheWVycyA9ICgpID0+IHYgPT4gYCR7b3JkaW5hbF9zdWZmaXgoKSh2KX0gbGF5ZXJgO1xyXG5cclxuLyoqXHJcbiAqIEZvcm1hdCBhIGtleSBpbnRvIGl0cyBwYXRoIGZvciB0aGUgc3R1cGlkIFByb2plY3RTdG9yZS4gWW91J2QgdGhpbmsgdGhpcyBmdW5jdGlvblxyXG4gKiBpcyBraW5kIG9mIHN1cGVyZmx1b3VzLCBidXQgdHJ5IHNwZWxsaW5nIFwib2NjdXJyZW5jZVwiIDIwIHRpbWVzIGluIGEgcm93IHdpdGhvdXRcclxuICogc2NyZXdpbmcgaXQgdXAuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgLSB0aGUgZmluYWwga2V5IG9mIHRoZSBcIm9jY3VycmVuY2VcIiBvciB3aGF0ZXZlci4uLiBJIGRvbid0IHVuZGVyc3RhbmRcclxuICogdGhpcyBkaWN0aW9uLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSAtIHRoZSBmb3JtYXR0ZWQgcGF0aFxyXG4gKi9cclxuY29uc3QgcGF0aCA9IGtleSA9PiBgb2NjdXJyZW5jZToke2tleX1gO1xyXG5cclxuLyoqXHJcbiAqIEtpbmQgb2YgdGhlIHJldmVyc2Ugb2YgYHBhdGhgLiBSZWFsbHkgaXQncyBoZXJlIHRvIG1ha2UgdGhlIGNvZGUgbW9yZSByZWFkYWJsZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSB0aGUgZmluYWwgcGF0aCBvZiB0aGUgXCJvY2N1cnJlbmNlXCIgb3Igd2hhdGV2ZXIuLi4gSSBkb24ndCB1bmRlcnN0YW5kXHJcbiAqIHRoaXMgZGljdGlvbi5cclxuICogQHJldHVybnMge3N0cmluZ30gLSB0aGUga2V5IGV4dHJhY3RlZCBmcm9tIHRoZSBwYXRoXHJcbiAqL1xyXG5jb25zdCBrZXlGcm9tUGF0aCA9IFIucGlwZShSLnNwbGl0KCc6JyksIFIubGFzdCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIHRyYW5zbGF0ZSxcclxuICAgIHJvdW5kLFxyXG4gICAgbWlsbGltZXRlcixcclxuICAgIHJvdW5kTWlsbGltZXRlcixcclxuICAgIG1pbGxpbWV0ZXJQZXJTZWNvbmQsXHJcbiAgICBwZXJjZW50LFxyXG4gICAgZGVncmVlcyxcclxuICAgIGNlbHNpdXMsXHJcbiAgICBzZWNvbmRzLFxyXG4gICAgbGF5ZXJIZWlnaHQsXHJcbiAgICBwcmludE1vZGUsXHJcbiAgICBleHRydWRlcixcclxuICAgIHNoZWxscyxcclxuICAgIGxheWVycyxcclxuICAgIHBhdGgsXHJcbiAgICBrZXlGcm9tUGF0aCxcclxuICAgIGlkZW50aXR5LFxyXG4gICAgdmFsaWRTdHJpbmcsXHJcbiAgICBub29wOiAoKSA9PiAoKSA9PiB7fSxcclxufTtcclxuIl19
