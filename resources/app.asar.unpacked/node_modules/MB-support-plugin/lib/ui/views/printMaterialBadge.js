"use strict";

var _react = _interopRequireDefault(require("react"));

var _path = _interopRequireDefault(require("path"));

var _flux_component = _interopRequireDefault(require("eagle-print/views/flux_component"));

var _styles = require("./styles");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class PrintMaterialBadge extends _flux_component.default {
  constructor(props) {
    super(props);
  }

  _realRadius() {
    // pull them out to make code formatting nicer
    const {
      r,
      strokeWidth
    } = this.props;
    return r - (strokeWidth + strokeWidth / 2);
  }

  getRemainingMaterial() {
    const dashArray = this._realRadius() * Math.PI * 2;
    const dashOffset = dashArray - dashArray * this.props.materialRemainingPercentage / 100;
    const remainingStyle = Object.assign({}, (0, _styles.roundedCapCircle)(), {
      stroke: this.props.remainingMaterialColor,
      strokeWidth: this.props.strokeWidth,
      strokeDasharray: dashArray,
      strokeDashoffset: dashOffset
    });
    return /*#__PURE__*/_react.default.createElement("circle", {
      style: remainingStyle,
      cx: this.props.r,
      cy: this.props.r,
      r: this._realRadius()
    });
  } // this will stop the needed material display stroke from rotating beyond a full spool (aka 100%)


  materialDisplaySafeguard() {
    return this.props.materialNeededPercentage >= 100 ? 100 : this.props.materialNeededPercentage;
  }

  getNeededMaterial() {
    const dashArray = this._realRadius() * Math.PI * 2;
    const dashOffset = dashArray - dashArray * this.materialDisplaySafeguard() / 100; // const test = dashArray - (dashArray * this.props.materialRemainingPercentage) / 100;

    /* manipulating the transform property with a rudimentary calculation in the interest of time. this keeps the needed 
    display parked on the end of the remaining display while factoring in the diff so it doesn't extend beyond the remaining stroke. 
    TODO: find a smarter way. */

    const neededStyle = Object.assign({}, (0, _styles.roundedCapCircle)(), {
      stroke: this.props.neededMaterialColor,
      strokeWidth: this.props.strokeWidth,
      // transform: `rotate(${test}deg)`,
      strokeDasharray: dashArray,
      strokeDashoffset: dashOffset
    });
    return /*#__PURE__*/_react.default.createElement("circle", {
      style: neededStyle,
      cx: this.props.r,
      cy: this.props.r,
      r: this._realRadius()
    });
  }

  getFilamentError() {
    return this.props.showMaterialError ? /*#__PURE__*/_react.default.createElement("img", {
      className: "filament-error",
      src: _path.default.resolve(__dirname, 'images/error-triangle.svg')
    }) : null;
  }

  getSpoolCount() {
    return /*#__PURE__*/_react.default.createElement("span", {
      className: "spool-count"
    }, this.props.showSpoolCount);
  }

  getBackgroundCircle() {
    const style = {
      strokeWidth: '1px',
      fill: 'none',
      stroke: '#C4C4C4'
    };
    return /*#__PURE__*/_react.default.createElement("circle", {
      style: style,
      cx: this.props.r,
      cy: this.props.r,
      r: this.props.r - 1
    });
  }

  render() {
    const width = this.props.r * 2;
    const height = this.props.r * 2;
    const viewBox = `0 0 ${width} ${height}`;
    return /*#__PURE__*/_react.default.createElement("svg", Object.assign({}, this.props, {
      className: 'CircularProgress',
      width,
      height,
      viewBox
    }), this.getBackgroundCircle(), this.getRemainingMaterial(), this.getNeededMaterial(), this.getFilamentError(), this.getSpoolCount());
  }

}

PrintMaterialBadge.propTypes = Object.assign({}, PrintMaterialBadge.propTypes, {
  printer: _react.default.PropTypes.string.isRequired,
  strokeWidth: _react.default.PropTypes.number,
  r: _react.default.PropTypes.number
});
module.exports = PrintMaterialBadge;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaW50TWF0ZXJpYWxCYWRnZS5qcyJdLCJuYW1lcyI6WyJQcmludE1hdGVyaWFsQmFkZ2UiLCJGbHV4Q29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsIl9yZWFsUmFkaXVzIiwiciIsInN0cm9rZVdpZHRoIiwiZ2V0UmVtYWluaW5nTWF0ZXJpYWwiLCJkYXNoQXJyYXkiLCJNYXRoIiwiUEkiLCJkYXNoT2Zmc2V0IiwibWF0ZXJpYWxSZW1haW5pbmdQZXJjZW50YWdlIiwicmVtYWluaW5nU3R5bGUiLCJPYmplY3QiLCJhc3NpZ24iLCJzdHJva2UiLCJyZW1haW5pbmdNYXRlcmlhbENvbG9yIiwic3Ryb2tlRGFzaGFycmF5Iiwic3Ryb2tlRGFzaG9mZnNldCIsIm1hdGVyaWFsRGlzcGxheVNhZmVndWFyZCIsIm1hdGVyaWFsTmVlZGVkUGVyY2VudGFnZSIsImdldE5lZWRlZE1hdGVyaWFsIiwibmVlZGVkU3R5bGUiLCJuZWVkZWRNYXRlcmlhbENvbG9yIiwiZ2V0RmlsYW1lbnRFcnJvciIsInNob3dNYXRlcmlhbEVycm9yIiwicGF0aCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJnZXRTcG9vbENvdW50Iiwic2hvd1Nwb29sQ291bnQiLCJnZXRCYWNrZ3JvdW5kQ2lyY2xlIiwic3R5bGUiLCJmaWxsIiwicmVuZGVyIiwid2lkdGgiLCJoZWlnaHQiLCJ2aWV3Qm94IiwiY2xhc3NOYW1lIiwicHJvcFR5cGVzIiwicHJpbnRlciIsIlJlYWN0IiwiUHJvcFR5cGVzIiwic3RyaW5nIiwiaXNSZXF1aXJlZCIsIm51bWJlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFFQSxNQUFNQSxrQkFBTixTQUFpQ0MsdUJBQWpDLENBQStDO0FBQzNDQyxFQUFBQSxXQUFXLENBQUNDLEtBQUQsRUFBUTtBQUNmLFVBQU1BLEtBQU47QUFDSDs7QUFFREMsRUFBQUEsV0FBVyxHQUFHO0FBQ1Y7QUFDQSxV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LFdBQVcsRUFBRW9DLGVBQU1DLFNBQU4sQ0FBZ0JHLE1BRjhDO0FBRzNFekMsRUFBQUEsQ0FBQyxFQUFFcUMsZUFBTUMsU0FBTixDQUFnQkc7QUFId0QsQ0FBaEQsQ0FBL0I7QUFNQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCaEQsa0JBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCBGbHV4Q29tcG9uZW50IGZyb20gJ2VhZ2xlLXByaW50L3ZpZXdzL2ZsdXhfY29tcG9uZW50JztcclxuXHJcbmltcG9ydCB7IHJvdW5kZWRDYXBDaXJjbGUgfSBmcm9tICcuL3N0eWxlcyc7XHJcblxyXG5jbGFzcyBQcmludE1hdGVyaWFsQmFkZ2UgZXh0ZW5kcyBGbHV4Q29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZWFsUmFkaXVzKCkge1xyXG4gICAgICAgIC8vIHB1bGwgdGhlbSBvdXQgdG8gbWFrZSBjb2RlIGZvcm1hdHRpbmcgbmljZXJcclxuICAgICAgICBjb25zdCB7IHIsIHN0cm9rZVdpZHRoIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIHJldHVybiByIC0gKHN0cm9rZVdpZHRoICsgc3Ryb2tlV2lkdGggLyAyKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZW1haW5pbmdNYXRlcmlhbCgpIHtcclxuICAgICAgICBjb25zdCBkYXNoQXJyYXkgPSB0aGlzLl9yZWFsUmFkaXVzKCkgKiBNYXRoLlBJICogMjtcclxuICAgICAgICBjb25zdCBkYXNoT2Zmc2V0ID0gZGFzaEFycmF5IC0gKGRhc2hBcnJheSAqIHRoaXMucHJvcHMubWF0ZXJpYWxSZW1haW5pbmdQZXJjZW50YWdlKSAvIDEwMDtcclxuXHJcbiAgICAgICAgY29uc3QgcmVtYWluaW5nU3R5bGUgPSBPYmplY3QuYXNzaWduKHt9LCByb3VuZGVkQ2FwQ2lyY2xlKCksIHtcclxuICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLnByb3BzLnJlbWFpbmluZ01hdGVyaWFsQ29sb3IsXHJcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoOiB0aGlzLnByb3BzLnN0cm9rZVdpZHRoLFxyXG4gICAgICAgICAgICBzdHJva2VEYXNoYXJyYXk6IGRhc2hBcnJheSxcclxuICAgICAgICAgICAgc3Ryb2tlRGFzaG9mZnNldDogZGFzaE9mZnNldCxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxjaXJjbGUgc3R5bGU9e3JlbWFpbmluZ1N0eWxlfSBjeD17dGhpcy5wcm9wcy5yfSBjeT17dGhpcy5wcm9wcy5yfSByPXt0aGlzLl9yZWFsUmFkaXVzKCl9IC8+O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRoaXMgd2lsbCBzdG9wIHRoZSBuZWVkZWQgbWF0ZXJpYWwgZGlzcGxheSBzdHJva2UgZnJvbSByb3RhdGluZyBiZXlvbmQgYSBmdWxsIHNwb29sIChha2EgMTAwJSlcclxuICAgIG1hdGVyaWFsRGlzcGxheVNhZmVndWFyZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5tYXRlcmlhbE5lZWRlZFBlcmNlbnRhZ2UgPj0gMTAwID8gMTAwIDogdGhpcy5wcm9wcy5tYXRlcmlhbE5lZWRlZFBlcmNlbnRhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmVlZGVkTWF0ZXJpYWwoKSB7XHJcbiAgICAgICAgY29uc3QgZGFzaEFycmF5ID0gdGhpcy5fcmVhbFJhZGl1cygpICogTWF0aC5QSSAqIDI7XHJcbiAgICAgICAgY29uc3QgZGFzaE9mZnNldCA9IGRhc2hBcnJheSAtIChkYXNoQXJyYXkgKiB0aGlzLm1hdGVyaWFsRGlzcGxheVNhZmVndWFyZCgpKSAvIDEwMDtcclxuXHJcbiAgICAgICAgLy8gY29uc3QgdGVzdCA9IGRhc2hBcnJheSAtIChkYXNoQXJyYXkgKiB0aGlzLnByb3BzLm1hdGVyaWFsUmVtYWluaW5nUGVyY2VudGFnZSkgLyAxMDA7XHJcbiAgICAgICAgLyogbWFuaXB1bGF0aW5nIHRoZSB0cmFuc2Zvcm0gcHJvcGVydHkgd2l0aCBhIHJ1ZGltZW50YXJ5IGNhbGN1bGF0aW9uIGluIHRoZSBpbnRlcmVzdCBvZiB0aW1lLiB0aGlzIGtlZXBzIHRoZSBuZWVkZWQgXHJcbiAgICAgICAgZGlzcGxheSBwYXJrZWQgb24gdGhlIGVuZCBvZiB0aGUgcmVtYWluaW5nIGRpc3BsYXkgd2hpbGUgZmFjdG9yaW5nIGluIHRoZSBkaWZmIHNvIGl0IGRvZXNuJ3QgZXh0ZW5kIGJleW9uZCB0aGUgcmVtYWluaW5nIHN0cm9rZS4gXHJcbiAgICAgICAgVE9ETzogZmluZCBhIHNtYXJ0ZXIgd2F5LiAqL1xyXG5cclxuICAgICAgICBjb25zdCBuZWVkZWRTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIHJvdW5kZWRDYXBDaXJjbGUoKSwge1xyXG4gICAgICAgICAgICBzdHJva2U6IHRoaXMucHJvcHMubmVlZGVkTWF0ZXJpYWxDb2xvcixcclxuICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHRoaXMucHJvcHMuc3Ryb2tlV2lkdGgsXHJcbiAgICAgICAgICAgIC8vIHRyYW5zZm9ybTogYHJvdGF0ZSgke3Rlc3R9ZGVnKWAsXHJcbiAgICAgICAgICAgIHN0cm9rZURhc2hhcnJheTogZGFzaEFycmF5LFxyXG4gICAgICAgICAgICBzdHJva2VEYXNob2Zmc2V0OiBkYXNoT2Zmc2V0LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gPGNpcmNsZSBzdHlsZT17bmVlZGVkU3R5bGV9IGN4PXt0aGlzLnByb3BzLnJ9IGN5PXt0aGlzLnByb3BzLnJ9IHI9e3RoaXMuX3JlYWxSYWRpdXMoKX0gLz47XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmlsYW1lbnRFcnJvcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5zaG93TWF0ZXJpYWxFcnJvciA/IChcclxuICAgICAgICAgICAgPGltZyBjbGFzc05hbWU9J2ZpbGFtZW50LWVycm9yJyBzcmM9e3BhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdpbWFnZXMvZXJyb3ItdHJpYW5nbGUuc3ZnJyl9IC8+XHJcbiAgICAgICAgKSA6IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3Bvb2xDb3VudCgpIHtcclxuICAgICAgICByZXR1cm4gPHNwYW4gY2xhc3NOYW1lPSdzcG9vbC1jb3VudCc+e3RoaXMucHJvcHMuc2hvd1Nwb29sQ291bnR9PC9zcGFuPjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRCYWNrZ3JvdW5kQ2lyY2xlKCkge1xyXG4gICAgICAgIGNvbnN0IHN0eWxlID0ge1xyXG4gICAgICAgICAgICBzdHJva2VXaWR0aDogJzFweCcsXHJcbiAgICAgICAgICAgIGZpbGw6ICdub25lJyxcclxuICAgICAgICAgICAgc3Ryb2tlOiAnI0M0QzRDNCcsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxjaXJjbGUgc3R5bGU9e3N0eWxlfSBjeD17dGhpcy5wcm9wcy5yfSBjeT17dGhpcy5wcm9wcy5yfSByPXt0aGlzLnByb3BzLnIgLSAxfSAvPjtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLnByb3BzLnIgKiAyO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMucHJvcHMuciAqIDI7XHJcbiAgICAgICAgY29uc3Qgdmlld0JveCA9IGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHN2Z1xyXG4gICAgICAgICAgICAgICAgey4uLk9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvcHMsIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdDaXJjdWxhclByb2dyZXNzJyxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlld0JveCxcclxuICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5nZXRCYWNrZ3JvdW5kQ2lyY2xlKCl9XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5nZXRSZW1haW5pbmdNYXRlcmlhbCgpfVxyXG4gICAgICAgICAgICAgICAge3RoaXMuZ2V0TmVlZGVkTWF0ZXJpYWwoKX1cclxuICAgICAgICAgICAgICAgIHt0aGlzLmdldEZpbGFtZW50RXJyb3IoKX1cclxuICAgICAgICAgICAgICAgIHt0aGlzLmdldFNwb29sQ291bnQoKX1cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuUHJpbnRNYXRlcmlhbEJhZGdlLnByb3BUeXBlcyA9IE9iamVjdC5hc3NpZ24oe30sIFByaW50TWF0ZXJpYWxCYWRnZS5wcm9wVHlwZXMsIHtcclxuICAgIHByaW50ZXI6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcclxuICAgIHN0cm9rZVdpZHRoOiBSZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxyXG4gICAgcjogUmVhY3QuUHJvcFR5cGVzLm51bWJlcixcclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByaW50TWF0ZXJpYWxCYWRnZTtcclxuIl19
