'use strict';

const React = require('react');

const Isvg = require('react-inlinesvg');

const path = require('path');

const Tooltip = require('eagle-print/views/util/tooltip');

const util = require('../../util');

const StoreSidePanel = require('./storeSidePanel');

class MBLogosPanel extends React.Component {
  constructor(props) {
    super(props);
    this._handleThingiverseLink = this._handleThingiverseLink.bind(this);
    this._handleMakerBotLink = this._handleMakerBotLink.bind(this);
    this._handleMakerBotStoreLink = this._handleMakerBotStoreLink.bind(this);
    this._handleSupportLink = this._handleSupportLink.bind(this);
    this.i18n = this.props.flux.getService('TranslationService');
    this.state = {
      showMakerBotStorePanel: false
    };
  }

  _handleThingiverseLink() {
    const thingiverseLink = 'https://thingiverse.com/?utm_source=mbp&utm_campaign=tvlogo';
    util.sendPrinterAnalytics(this.props.flux, 'Sidebar Link Clicked Thingiverse');

    require('electron').remote.shell.openExternal(thingiverseLink);
  }

  _handleMakerBotLink() {
    const makerbotLink = 'https://makerbot.com/?utm_source=mbp&utm_campaign=mblogo';
    util.sendPrinterAnalytics(this.props.flux, 'Sidebar Link Clicked Makerbot');

    require('electron').remote.shell.openExternal(makerbotLink);
  }

  _handleMakerBotStoreLink() {
    // Send analytics only from side panel icon click
    this.props && util.sendPrinterAnalytics(this.props.flux, 'Sidebar Link Clicked Store'); // Expand StoreSidePanel Component

    this.setState({
      showMakerBotStorePanel: !this.state.showMakerBotStorePanel
    });
  }

  _handleSupportLink() {
    const makerbotSupportLink = 'https://support.makerbot.com/?utm_source=mbp&utm_campaign=mbsupport';
    util.sendPrinterAnalytics(this.props.flux, 'Sidebar Link Clicked Support');

    require('electron').remote.shell.openExternal(makerbotSupportLink);
  }

  renderIcon(link) {
    const {
      id,
      onClickHandler,
      iconSrcPath,
      contentTxt
    } = link;
    const icon = /*#__PURE__*/React.createElement("div", {
      className: "item logo"
    }, /*#__PURE__*/React.createElement("a", {
      onClick: onClickHandler
    }, /*#__PURE__*/React.createElement(Isvg, {
      src: util.getPathForIsvg(iconSrcPath)
    })));
    return /*#__PURE__*/React.createElement(Tooltip, {
      key: id,
      id: id,
      addTo: icon,
      placement: "right",
      content: contentTxt
    });
  }

  render() {
    const links = [{
      id: 'makerbotTooltip',
      onClickHandler: this._handleMakerBotLink,
      iconSrcPath: path.resolve(__dirname, 'images/nav-makerbot.svg'),
      contentTxt: this.i18n.t('mb:sidePanel.icons.makerbotIcon.context')
    }, {
      id: 'thingiverseTooltip',
      onClickHandler: this._handleThingiverseLink,
      iconSrcPath: path.resolve(__dirname, 'images/nav-thingiverse.svg'),
      contentTxt: this.i18n.t('mb:sidePanel.icons.thingiverseIcon.context')
    }, {
      id: 'makerbotStoreTooltip',
      onClickHandler: this._handleMakerBotStoreLink,
      iconSrcPath: path.resolve(__dirname, 'images/nav-logo-shop.svg'),
      contentTxt: this.i18n.t('mb:sidePanel.icons.storeIcon.context')
    }, {
      id: 'makerbotSupportTooltip',
      onClickHandler: this._handleSupportLink,
      iconSrcPath: path.resolve(__dirname, 'images/help-icon.svg'),
      contentTxt: this.i18n.t('mb:sidePanel.icons.supportIcon.context')
    }];
    return /*#__PURE__*/React.createElement("div", {
      className: "leftPanel"
    }, links.map(link => this.renderIcon(link)), this.state.showMakerBotStorePanel ? /*#__PURE__*/React.createElement(StoreSidePanel, {
      handleIconClick: this._handleMakerBotStoreLink,
      showPanel: this.state.showMakerBotStorePanel,
      i18n: this.i18n
    }) : null);
  }

}

MBLogosPanel.displayName = 'MBLogosPanel';
MBLogosPanel.propTypes = {
  flux: React.PropTypes.object.isRequired
};
module.exports = MBLogosPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1iTG9nb3NQYW5lbC5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJJc3ZnIiwicGF0aCIsIlRvb2x0aXAiLCJ1dGlsIiwiU3RvcmVTaWRlUGFuZWwiLCJNQkxvZ29zUGFuZWwiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiX2hhbmRsZVRoaW5naXZlcnNlTGluayIsImJpbmQiLCJfaGFuZGxlTWFrZXJCb3RMaW5rIiwiX2hhbmRsZU1ha2VyQm90U3RvcmVMaW5rIiwiX2hhbmRsZVN1cHBvcnRMaW5rIiwiaTE4biIsImZsdXgiLCJnZXRTZXJ2aWNlIiwic3RhdGUiLCJzaG93TWFrZXJCb3RTdG9yZVBhbmVsIiwidGhpbmdpdmVyc2VMaW5rIiwic2VuZFByaW50ZXJBbmFseXRpY3MiLCJyZW1vdGUiLCJzaGVsbCIsIm9wZW5FeHRlcm5hbCIsIm1ha2VyYm90TGluayIsInNldFN0YXRlIiwibWFrZXJib3RTdXBwb3J0TGluayIsInJlbmRlckljb24iLCJsaW5rIiwiaWQiLCJvbkNsaWNrSGFuZGxlciIsImljb25TcmNQYXRoIiwiY29udGVudFR4dCIsImljb24iLCJnZXRQYXRoRm9ySXN2ZyIsInJlbmRlciIsImxpbmtzIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInQiLCJtYXAiLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLE1BQU1DLElBQUksR0FBR0QsT0FBTyxDQUFDLGlCQUFELENBQXBCOztBQUNBLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBQ0EsTUFBTUcsT0FBTyxHQUFHSCxPQUFPLENBQUMsZ0NBQUQsQ0FBdkI7O0FBRUEsTUFBTUksSUFBSSxHQUFHSixPQUFPLENBQUMs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SGpCO0FBSUlOLE1BQUFBLFVBQVUsRUFBRSxLQUFLbEIsSUFBTCxDQUFVeUIsQ0FBVixDQUFZLHdDQUFaO0FBSmhCLEtBbkJVLENBQWQ7QUEyQkEsd0JBQ0k7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLE9BQ0tILEtBQUssQ0FBQ0ksR0FBTixDQUFVWixJQUFJLElBQUksS0FBS0QsVUFBTCxDQUFnQkMsSUFBaEIsQ0FBbEIsQ0FETCxFQUVLLEtBQUtYLEtBQUwsQ0FBV0Msc0JBQVgsZ0JBQ0csb0JBQUMsY0FBRDtBQUNJLE1BQUEsZUFBZSxFQUFFLEtBQUtOLHdCQUQxQjtBQUVJLE1BQUEsU0FBUyxFQUFFLEtBQUtLLEtBQUwsQ0FBV0Msc0JBRjFCO0FBR0ksTUFBQSxJQUFJLEVBQUUsS0FBS0o7QUFIZixNQURILEdBTUcsSUFSUixDQURKO0FBWUg7O0FBckZzQzs7QUF3RjNDVCxZQUFZLENBQUNvQyxXQUFiLEdBQTJCLGNBQTNCO0FBQ0FwQyxZQUFZLENBQUNxQyxTQUFiLEdBQXlCO0FBQ3JCM0IsRUFBQUEsSUFBSSxFQUFFakIsS0FBSyxDQUFDNkMsU0FBTixDQUFnQkMsTUFBaEIsQ0FBdUJDO0FBRFIsQ0FBekI7QUFJQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCMUMsWUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmNvbnN0IElzdmcgPSByZXF1aXJlKCdyZWFjdC1pbmxpbmVzdmcnKTtcclxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcclxuY29uc3QgVG9vbHRpcCA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL3V0aWwvdG9vbHRpcCcpO1xyXG5cclxuY29uc3QgdXRpbCA9IHJlcXVpcmUoJy4uLy4uL3V0aWwnKTtcclxuY29uc3QgU3RvcmVTaWRlUGFuZWwgPSByZXF1aXJlKCcuL3N0b3JlU2lkZVBhbmVsJyk7XHJcblxyXG5jbGFzcyBNQkxvZ29zUGFuZWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlVGhpbmdpdmVyc2VMaW5rID0gdGhpcy5faGFuZGxlVGhpbmdpdmVyc2VMaW5rLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTWFrZXJCb3RMaW5rID0gdGhpcy5faGFuZGxlTWFrZXJCb3RMaW5rLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlTWFrZXJCb3RTdG9yZUxpbmsgPSB0aGlzLl9oYW5kbGVNYWtlckJvdFN0b3JlTGluay5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1cHBvcnRMaW5rID0gdGhpcy5faGFuZGxlU3VwcG9ydExpbmsuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmkxOG4gPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnVHJhbnNsYXRpb25TZXJ2aWNlJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc2hvd01ha2VyQm90U3RvcmVQYW5lbDogZmFsc2UsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIF9oYW5kbGVUaGluZ2l2ZXJzZUxpbmsoKSB7XHJcbiAgICAgICAgY29uc3QgdGhpbmdpdmVyc2VMaW5rID0gJ2h0dHBzOi8vdGhpbmdpdmVyc2UuY29tLz91dG1fc291cmNlPW1icCZ1dG1fY2FtcGFpZ249dHZsb2dvJztcclxuICAgICAgICB1dGlsLnNlbmRQcmludGVyQW5hbHl0aWNzKHRoaXMucHJvcHMuZmx1eCwgJ1NpZGViYXIgTGluayBDbGlja2VkIFRoaW5naXZlcnNlJyk7XHJcbiAgICAgICAgcmVxdWlyZSgnZWxlY3Ryb24nKS5yZW1vdGUuc2hlbGwub3BlbkV4dGVybmFsKHRoaW5naXZlcnNlTGluayk7XHJcbiAgICB9XHJcbiAgICBfaGFuZGxlTWFrZXJCb3RMaW5rKCkge1xyXG4gICAgICAgIGNvbnN0IG1ha2VyYm90TGluayA9ICdodHRwczovL21ha2VyYm90LmNvbS8/dXRtX3NvdXJjZT1tYnAmdXRtX2NhbXBhaWduPW1ibG9nbyc7XHJcbiAgICAgICAgdXRpbC5zZW5kUHJpbnRlckFuYWx5dGljcyh0aGlzLnByb3BzLmZsdXgsICdTaWRlYmFyIExpbmsgQ2xpY2tlZCBNYWtlcmJvdCcpO1xyXG4gICAgICAgIHJlcXVpcmUoJ2VsZWN0cm9uJykucmVtb3RlLnNoZWxsLm9wZW5FeHRlcm5hbChtYWtlcmJvdExpbmspO1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZU1ha2VyQm90U3RvcmVMaW5rKCkge1xyXG4gICAgICAgIC8vIFNlbmQgYW5hbHl0aWNzIG9ubHkgZnJvbSBzaWRlIHBhbmVsIGljb24gY2xpY2tcclxuICAgICAgICB0aGlzLnByb3BzICYmIHV0aWwuc2VuZFByaW50ZXJBbmFseXRpY3ModGhpcy5wcm9wcy5mbHV4LCAnU2lkZWJhciBMaW5rIENsaWNrZWQgU3RvcmUnKTtcclxuICAgICAgICAvLyBFeHBhbmQgU3RvcmVTaWRlUGFuZWwgQ29tcG9uZW50XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3dNYWtlckJvdFN0b3JlUGFuZWw6ICF0aGlzLnN0YXRlLnNob3dNYWtlckJvdFN0b3JlUGFuZWwgfSk7XHJcbiAgICB9XHJcbiAgICBfaGFuZGxlU3VwcG9ydExpbmsoKSB7XHJcbiAgICAgICAgY29uc3QgbWFrZXJib3RTdXBwb3J0TGluayA9ICdodHRwczovL3N1cHBvcnQubWFrZXJib3QuY29tLz91dG1fc291cmNlPW1icCZ1dG1fY2FtcGFpZ249bWJzdXBwb3J0JztcclxuICAgICAgICB1dGlsLnNlbmRQcmludGVyQW5hbHl0aWNzKHRoaXMucHJvcHMuZmx1eCwgJ1NpZGViYXIgTGluayBDbGlja2VkIFN1cHBvcnQnKTtcclxuICAgICAgICByZXF1aXJlKCdlbGVjdHJvbicpLnJlbW90ZS5zaGVsbC5vcGVuRXh0ZXJuYWwobWFrZXJib3RTdXBwb3J0TGluayk7XHJcbiAgICB9XHJcbiAgICByZW5kZXJJY29uKGxpbmspIHtcclxuICAgICAgICBjb25zdCB7IGlkLCBvbkNsaWNrSGFuZGxlciwgaWNvblNyY1BhdGgsIGNvbnRlbnRUeHQgfSA9IGxpbms7XHJcbiAgICAgICAgY29uc3QgaWNvbiA9IChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2l0ZW0gbG9nbyc+XHJcbiAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXtvbkNsaWNrSGFuZGxlcn0+XHJcbiAgICAgICAgICAgICAgICAgICAgPElzdmcgc3JjPXt1dGlsLmdldFBhdGhGb3JJc3ZnKGljb25TcmNQYXRoKX0gLz5cclxuICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxUb29sdGlwIGtleT17aWR9IGlkPXtpZH0gYWRkVG89e2ljb259IHBsYWNlbWVudD0ncmlnaHQnIGNvbnRlbnQ9e2NvbnRlbnRUeHR9IC8+O1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGxpbmtzID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ21ha2VyYm90VG9vbHRpcCcsXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogdGhpcy5faGFuZGxlTWFrZXJCb3RMaW5rLFxyXG4gICAgICAgICAgICAgICAgaWNvblNyY1BhdGg6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdpbWFnZXMvbmF2LW1ha2VyYm90LnN2ZycpLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR4dDogdGhpcy5pMThuLnQoJ21iOnNpZGVQYW5lbC5pY29ucy5tYWtlcmJvdEljb24uY29udGV4dCcpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ3RoaW5naXZlcnNlVG9vbHRpcCcsXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogdGhpcy5faGFuZGxlVGhpbmdpdmVyc2VMaW5rLFxyXG4gICAgICAgICAgICAgICAgaWNvblNyY1BhdGg6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICdpbWFnZXMvbmF2LXRoaW5naXZlcnNlLnN2ZycpLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR4dDogdGhpcy5pMThuLnQoJ21iOnNpZGVQYW5lbC5pY29ucy50aGluZ2l2ZXJzZUljb24uY29udGV4dCcpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZDogJ21ha2VyYm90U3RvcmVUb29sdGlwJyxcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiB0aGlzLl9oYW5kbGVNYWtlckJvdFN0b3JlTGluayxcclxuICAgICAgICAgICAgICAgIGljb25TcmNQYXRoOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnaW1hZ2VzL25hdi1sb2dvLXNob3Auc3ZnJyksXHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHh0OiB0aGlzLmkxOG4udCgnbWI6c2lkZVBhbmVsLmljb25zLnN0b3JlSWNvbi5jb250ZXh0JyksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkOiAnbWFrZXJib3RTdXBwb3J0VG9vbHRpcCcsXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogdGhpcy5faGFuZGxlU3VwcG9ydExpbmssXHJcbiAgICAgICAgICAgICAgICBpY29uU3JjUGF0aDogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2ltYWdlcy9oZWxwLWljb24uc3ZnJyksXHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHh0OiB0aGlzLmkxOG4udCgnbWI6c2lkZVBhbmVsLmljb25zLnN1cHBvcnRJY29uLmNvbnRleHQnKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbGVmdFBhbmVsJz5cclxuICAgICAgICAgICAgICAgIHtsaW5rcy5tYXAobGluayA9PiB0aGlzLnJlbmRlckljb24obGluaykpfVxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2hvd01ha2VyQm90U3RvcmVQYW5lbCA/IChcclxuICAgICAgICAgICAgICAgICAgICA8U3RvcmVTaWRlUGFuZWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlSWNvbkNsaWNrPXt0aGlzLl9oYW5kbGVNYWtlckJvdFN0b3JlTGlua31cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1BhbmVsPXt0aGlzLnN0YXRlLnNob3dNYWtlckJvdFN0b3JlUGFuZWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGkxOG49e3RoaXMuaTE4bn1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk1CTG9nb3NQYW5lbC5kaXNwbGF5TmFtZSA9ICdNQkxvZ29zUGFuZWwnO1xyXG5NQkxvZ29zUGFuZWwucHJvcFR5cGVzID0ge1xyXG4gICAgZmx1eDogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNQkxvZ29zUGFuZWw7XHJcbiJdfQ==
