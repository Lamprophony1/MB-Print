'use strict';

const React = require('react');

const Button = require('eagle-print/views/ui/button');

const PrintModes = require('../../../constants/print_settings').PrintModes;

const PrintModeElement = require('./printMode');

class PrintModesModal extends React.Component {
  constructor(props) {
    super(props);
    this.i18n = props.flux.getService('TranslationService');
    this._printSettingsStore = props.flux.store('PrintSettingsStore');
    this._printSettingsActions = props.flux.actions.PrintSettings;
    this._getCurrentPrinter = props.flux.store('PrinterStore').getSelectedPrinter();
    this.onChange = this.onChange.bind(this);
  }

  componentDidMount() {
    this._printSettingsStore.addListener('change', this.onChange);
  }

  componentWillUnmount() {
    this._printSettingsStore.removeListener('change', this.onChange);
  }

  onChange() {
    const state = this._printSettingsStore.getState();

    this.setState(state);
  }

  _getPrintModeOptions() {
    const options = [];

    if (this._getCurrentPrinter.isSixthGen()) {
      options.push(PrintModes.Balanced, PrintModes.Draft, PrintModes.HighQuality, PrintModes.Solid);
    } else {
      options.push(PrintModes.Balanced, PrintModes.Draft, PrintModes.Minfill);
    }

    return options;
  }

  _renderOptions() {
    const {
      printMode,
      currentPreset
    } = this._printSettingsStore.getState();

    const optionElements = this._getPrintModeOptions().map(opt => /*#__PURE__*/React.createElement(PrintModeElement, {
      i18n: this.i18n,
      opt: opt,
      key: opt,
      printer: this._getCurrentPrinter,
      selected: opt === printMode.selected && !currentPreset,
      disabled: !printMode.supported.includes(opt) //temp hack: user can only click on available print modes that aren't already selected -> UI should be a radial button not a checkbox
      ,
      onClick: () => printMode.supported.includes(opt) && !(opt === printMode.selected && !currentPreset) ? this.props.handlePrintModeChange(opt) : null
    }));

    return /*#__PURE__*/React.createElement("div", {
      className: "print-modes-modal__options"
    }, optionElements);
  }

  _renderFooter() {
    const addCustomSettingButton = /*#__PURE__*/React.createElement(Button, {
      id: "add-custom-print-setting",
      type: "secondary",
      label: "Custom Settings",
      onClick: () => this.props.launchAdvSettingsModal()
    });
    return /*#__PURE__*/React.createElement("div", {
      className: "print-modes-modal__footer"
    }, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      className: "text"
    }, this.i18n.t('mb:printModes.footer')), addCustomSettingButton), /*#__PURE__*/React.createElement(Button, {
      id: "doneButton",
      type: "secondary",
      label: this.i18n.t('mb:printModes.done'),
      onClick: () => {
        this.props.flux.getService('ModalService').hide();
      }
    }));
  }

  render() {
    return /*#__PURE__*/React.createElement("div", {
      className: "print-modes-modal"
    }, this._renderOptions(), this._renderFooter());
  }

}

PrintModesModal.displayName = 'PrintModesModal';
PrintModesModal.propTypes = {
  flux: React.PropTypes.object.isRequired,
  printModes: React.PropTypes.array.isRequired,
  handlePrintModeChange: React.PropTypes.func.isRequired,
  launchAdvSettingsModal: React.PropTypes.func
};
module.exports = PrintModesModal;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaW50TW9kZXNNb2RhbC5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJCdXR0b24iLCJQcmludE1vZGVzIiwiUHJpbnRNb2RlRWxlbWVudCIsIlByaW50TW9kZXNNb2RhbCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJpMThuIiwiZmx1eCIsImdldFNlcnZpY2UiLCJfcHJpbnRTZXR0aW5nc1N0b3JlIiwic3RvcmUiLCJfcHJpbnRTZXR0aW5nc0FjdGlvbnMiLCJhY3Rpb25zIiwiUHJpbnRTZXR0aW5ncyIsIl9nZXRDdXJyZW50UHJpbnRlciIsImdldFNlbGVjdGVkUHJpbnRlciIsIm9uQ2hhbmdlIiwiYmluZCIsImNvbXBvbmVudERpZE1vdW50IiwiYWRkTGlzdGVuZXIiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInJlbW92ZUxpc3RlbmVyIiwic3RhdGUiLCJnZXRTdGF0ZSIsInNldFN0YXRlIiwiX2dldFByaW50TW9kZU9wdGlvbnMiLCJvcHRpb25zIiwiaXNTaXh0aEdlbiIsInB1c2giLCJCYWxhbmNlZCIsIkRyYWZ0IiwiSGlnaFF1YWxpdHkiLCJTb2xpZCIsIk1pbmZpbGwiLCJfcmVuZGVyT3B0aW9ucyIsInByaW50TW9kZSIsImN1cnJlbnRQcmVzZXQiLCJvcHRpb25FbGVtZW50cyIsIm1hcCIsIm9wdCIsInNlbGVjdGVkIiwic3VwcG9ydGVkIiwiaW5jbHVkZXMiLCJoYW5kbGVQcmludE1vZGVDaGFuZ2UiLCJfcmVuZGVyRm9vdGVyIiwiYWRkQ3VzdG9tU2V0dGluZ0J1dHRvbiIsImxhdW5jaEFkdlNldHRpbmdzTW9kYWwiLCJ0IiwiaGlkZSIsInJlbmRlciIsImRpc3BsYXlOYW1lIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwib2JqZWN0IiwiaXNSZXF1aXJlZCIsInByaW50TW9kZXMiLCJhcnJheSIsImZ1bmMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxLQUFL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SDs7QUEzRnlDOztBQThGOUMxQyxlQUFlLENBQUNnRCxXQUFoQixHQUE4QixpQkFBOUI7QUFDQWhELGVBQWUsQ0FBQ2lELFNBQWhCLEdBQTRCO0FBQ3hCNUMsRUFBQUEsSUFBSSxFQUFFVixLQUFLLENBQUN1RCxTQUFOLENBQWdCQyxNQUFoQixDQUF1QkMsVUFETDtBQUV4QkMsRUFBQUEsVUFBVSxFQUFFMUQsS0FBSyxDQUFDdUQsU0FBTixDQUFnQkksS0FBaEIsQ0FBc0JGLFVBRlY7QUFHeEJYLEVBQUFBLHFCQUFxQixFQUFFOUMsS0FBSyxDQUFDdUQsU0FBTixDQUFnQkssSUFBaEIsQ0FBcUJILFVBSHBCO0FBSXhCUixFQUFBQSxzQkFBc0IsRUFBRWpELEtBQUssQ0FBQ3VELFNBQU4sQ0FBZ0JLO0FBSmhCLENBQTVCO0FBT0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnpELGVBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5jb25zdCBCdXR0b24gPSByZXF1aXJlKCdlYWdsZS1wcmludC92aWV3cy91aS9idXR0b24nKTtcclxuXHJcbmNvbnN0IFByaW50TW9kZXMgPSByZXF1aXJlKCcuLi8uLi8uLi9jb25zdGFudHMvcHJpbnRfc2V0dGluZ3MnKS5QcmludE1vZGVzO1xyXG5jb25zdCBQcmludE1vZGVFbGVtZW50ID0gcmVxdWlyZSgnLi9wcmludE1vZGUnKTtcclxuXHJcbmNsYXNzIFByaW50TW9kZXNNb2RhbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLmkxOG4gPSBwcm9wcy5mbHV4LmdldFNlcnZpY2UoJ1RyYW5zbGF0aW9uU2VydmljZScpO1xyXG4gICAgICAgIHRoaXMuX3ByaW50U2V0dGluZ3NTdG9yZSA9IHByb3BzLmZsdXguc3RvcmUoJ1ByaW50U2V0dGluZ3NTdG9yZScpO1xyXG4gICAgICAgIHRoaXMuX3ByaW50U2V0dGluZ3NBY3Rpb25zID0gcHJvcHMuZmx1eC5hY3Rpb25zLlByaW50U2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5fZ2V0Q3VycmVudFByaW50ZXIgPSBwcm9wcy5mbHV4LnN0b3JlKCdQcmludGVyU3RvcmUnKS5nZXRTZWxlY3RlZFByaW50ZXIoKTtcclxuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuX3ByaW50U2V0dGluZ3NTdG9yZS5hZGRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5vbkNoYW5nZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5fcHJpbnRTZXR0aW5nc1N0b3JlLnJlbW92ZUxpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLm9uQ2hhbmdlKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZSgpIHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuX3ByaW50U2V0dGluZ3NTdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoc3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRQcmludE1vZGVPcHRpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2dldEN1cnJlbnRQcmludGVyLmlzU2l4dGhHZW4oKSkge1xyXG4gICAgICAgICAgICBvcHRpb25zLnB1c2goUHJpbnRNb2Rlcy5CYWxhbmNlZCwgUHJpbnRNb2Rlcy5EcmFmdCwgUHJpbnRNb2Rlcy5IaWdoUXVhbGl0eSwgUHJpbnRNb2Rlcy5Tb2xpZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5wdXNoKFByaW50TW9kZXMuQmFsYW5jZWQsIFByaW50TW9kZXMuRHJhZnQsIFByaW50TW9kZXMuTWluZmlsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW5kZXJPcHRpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IHsgcHJpbnRNb2RlLCBjdXJyZW50UHJlc2V0IH0gPSB0aGlzLl9wcmludFNldHRpbmdzU3RvcmUuZ2V0U3RhdGUoKTtcclxuXHJcbiAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudHMgPSB0aGlzLl9nZXRQcmludE1vZGVPcHRpb25zKCkubWFwKG9wdCA9PiAoXHJcbiAgICAgICAgICAgIDxQcmludE1vZGVFbGVtZW50XHJcbiAgICAgICAgICAgICAgICBpMThuPXt0aGlzLmkxOG59XHJcbiAgICAgICAgICAgICAgICBvcHQ9e29wdH1cclxuICAgICAgICAgICAgICAgIGtleT17b3B0fVxyXG4gICAgICAgICAgICAgICAgcHJpbnRlcj17dGhpcy5fZ2V0Q3VycmVudFByaW50ZXJ9XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZD17b3B0ID09PSBwcmludE1vZGUuc2VsZWN0ZWQgJiYgIWN1cnJlbnRQcmVzZXR9XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17IXByaW50TW9kZS5zdXBwb3J0ZWQuaW5jbHVkZXMob3B0KX1cclxuICAgICAgICAgICAgICAgIC8vdGVtcCBoYWNrOiB1c2VyIGNhbiBvbmx5IGNsaWNrIG9uIGF2YWlsYWJsZSBwcmludCBtb2RlcyB0aGF0IGFyZW4ndCBhbHJlYWR5IHNlbGVjdGVkIC0+IFVJIHNob3VsZCBiZSBhIHJhZGlhbCBidXR0b24gbm90IGEgY2hlY2tib3hcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbnRNb2RlLnN1cHBvcnRlZC5pbmNsdWRlcyhvcHQpICYmICEob3B0ID09PSBwcmludE1vZGUuc2VsZWN0ZWQgJiYgIWN1cnJlbnRQcmVzZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5wcm9wcy5oYW5kbGVQcmludE1vZGVDaGFuZ2Uob3B0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApKTtcclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J3ByaW50LW1vZGVzLW1vZGFsX19vcHRpb25zJz57b3B0aW9uRWxlbWVudHN9PC9kaXY+O1xyXG4gICAgfVxyXG5cclxuICAgIF9yZW5kZXJGb290ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYWRkQ3VzdG9tU2V0dGluZ0J1dHRvbiA9IChcclxuICAgICAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgICAgICAgaWQ9J2FkZC1jdXN0b20tcHJpbnQtc2V0dGluZydcclxuICAgICAgICAgICAgICAgIHR5cGU9J3NlY29uZGFyeSdcclxuICAgICAgICAgICAgICAgIGxhYmVsPSdDdXN0b20gU2V0dGluZ3MnXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmxhdW5jaEFkdlNldHRpbmdzTW9kYWwoKX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbnQtbW9kZXMtbW9kYWxfX2Zvb3Rlcic+XHJcbiAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0ZXh0Jz57dGhpcy5pMThuLnQoJ21iOnByaW50TW9kZXMuZm9vdGVyJyl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge2FkZEN1c3RvbVNldHRpbmdCdXR0b259XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICBpZD0nZG9uZUJ1dHRvbidcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPSdzZWNvbmRhcnknXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3RoaXMuaTE4bi50KCdtYjpwcmludE1vZGVzLmRvbmUnKX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZmx1eC5nZXRTZXJ2aWNlKCdNb2RhbFNlcnZpY2UnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludC1tb2Rlcy1tb2RhbCc+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5fcmVuZGVyT3B0aW9ucygpfVxyXG4gICAgICAgICAgICAgICAge3RoaXMuX3JlbmRlckZvb3RlcigpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5QcmludE1vZGVzTW9kYWwuZGlzcGxheU5hbWUgPSAnUHJpbnRNb2Rlc01vZGFsJztcclxuUHJpbnRNb2Rlc01vZGFsLnByb3BUeXBlcyA9IHtcclxuICAgIGZsdXg6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIHByaW50TW9kZXM6IFJlYWN0LlByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxyXG4gICAgaGFuZGxlUHJpbnRNb2RlQ2hhbmdlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgbGF1bmNoQWR2U2V0dGluZ3NNb2RhbDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByaW50TW9kZXNNb2RhbDtcclxuIl19
