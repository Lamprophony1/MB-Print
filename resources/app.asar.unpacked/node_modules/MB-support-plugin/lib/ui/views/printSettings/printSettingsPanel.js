'use strict';

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

const React = require('react');

const R = require('ramda');

const Isvg = require('react-inlinesvg');

const q = require('q');

const path = require('path');

const EaglePrint = require('eagle-print');

const Dropdown = require('eagle-print/views/ui/input_dropdown');

const Button = require('eagle-print/views/ui/button');

const FluxComponent = EaglePrint.views.FluxComponent;
const PropTypes = EaglePrint.views.PropTypes;

const Widget = require('./advancedSettingWidget');

const PrintModesModal = require('./printModesModal');

const {
  ExtruderTypeEnum,
  DefaultExtruderPairs
} = require('../../../constants');

const Accordion = require('./advancedSettingsAccordion');

const ui = require('../../../utils/printSettings/uiUtils');

const {
  either
} = require('../../../utils/maybe');

const utils = require('../../../util');

const LinkClickUtils = require('../../../utils/linkClick');

const UrlConst = require('../../../constants/urls').url;

const ButtonWithDropdown = require('../buttonWithDropdown');

const UnknownMaterialString = 'generic_model';
const UnknownMaterial = 'Unknown Material';
/**
 *  This class retrieves and sets print setting for tray bodies as well as tray settings.
 *  Examples of tray body settings are layer Height, rafts, and infill Density.
 *  It is implemented by the right toolbar (propertiesToolbar.js) and is refered to as
 *  the material section.
 */

class PrintSettingsPanel extends FluxComponent {
  constructor(...args) {
    super(...args);

    _defineProperty(this, "_applyToAll", true);

    _defineProperty(this, "_trackingService", this.props.flux.getService('TrackingService'));

    _defineProperty(this, "_i18n", this.getFlux().getService('TranslationService'));

    _defineProperty(this, "_loggingService", this.props.flux.getService('LoggingService'));

    _defineProperty(this, "_store", this.getFlux().store('PrintSettingsStore'));

    _defineProperty(this, "_actions", this.getFlux().actions.PrintSettingsActions);

    _defineProperty(this, "savePropValue", ui.savePropValue(this.getFlux(), this.props.project));

    _defineProperty(this, "state", this._store.getState());

    _defineProperty(this, "componentWillMount", () => {
      super.componentWillMount(); // Add Listeners

      this._store.addListener('change', this.onChange);

      this._store.addListener('close_panel', this.closePanel);

      this._store.addListener('initialize_values', () => {
        this._actions.loadSchema({
          id: this.props.printer.getId()
        });
      });
    });

    _defineProperty(this, "componentDidMount", () => {
      super.componentDidMount();

      this._actions.loadSchema({
        id: this.props.printer.getId()
      });
    });

    _defineProperty(this, "componentWillUnmount", () => {
      super.componentWillUnmount(); // Remove Listeners

      this._store.removeListener('change', this.onChange);

      this._store.removeListener('close_panel', this.closePanel);

      this._store.removeListener('initialize_values', () => {
        this._actions.loadSchema({
          id: this.props.printer.getId()
        });
      });
    });

    _defineProperty(this, "closePanel", () => {
      if (this.props.isActive) {
        // NOTE:  we need to solve this in a better way at some point
        // perhaps by implementing an app wide dispatch queue.
        // For now, this solves dispatch collision thats causing error
        // and resulting in panel not closing.
        q.delay(1).then(() => this.props.closePanel());
      }
    });

    _defineProperty(this, "onChange", () => {
      const state = this._store.getState();

      this.setState(state);
    });

    _defineProperty(this, "getSelectedOccIds", () => {
      return this.props.project.getOccurrences().toArray().map(occ => occ.getId());
    });

    _defineProperty(this, "handleExtruderChange", (val, index) => {
      const displayName = this.displayExtruder(val, index);
      const currentExtruders = this.props.printer.getAttachedExtruders();
      currentExtruders[index] = val;
      this.props.printer.setAttachedExtruders(currentExtruders); // Even though we're now storing extruders in the printer object, not the tray
      // we still need savePropValue because it has the side effect of correctly
      // clearing the build.

      this.savePropValue('occurrence:extruders', currentExtruders, 'array');
      return q(this._actions.updateExtruder()).then(() => this.trackChange(displayName)).catch(err => this._loggingService.error(err)).done();
    });

    _defineProperty(this, "handleMaterialChange", (val, index) => {
      const currentMaterials = this.state.materials.selected;
      currentMaterials[index] = val;
      this.savePropValue('occurrence:materials', currentMaterials, 'array');
      return q().then(() => this._actions.updateMaterial(index, val)).then(() => this.trackChange(val)).catch(err => this._loggingService.error(err)).done();
    });

    _defineProperty(this, "handlePrintModeChange", val => {
      const displayName = this.displayPrintMode(val);
      this.savePropValue('occurrence:printMode', val, 'string');
      return q().then(() => this._actions.updatePrintMode(val)).then(() => this.trackChange(displayName)).catch(err => this._loggingService.error(err)).done();
    });

    _defineProperty(this, "trackChange", displayName => {
      const merged = R.merge({
        name: `${this.label} Change`,
        change_to: displayName
      }, this.props.printer.getTrackingInfo());

      this._trackingService.addEvent(merged);
    });

    _defineProperty(this, "displayExtruder", extruderType => {
      if (!extruderType) return null; // should fallback to just displaying the `extruderType` if there's
      // nothing specified in the translation file

      return this.props.i18n([`mb:printSettings.${extruderType}`, extruderType]);
    });

    _defineProperty(this, "displayPrintMode", v => {
      return this.props.i18n(`mb:printSettings.${v}`);
    });

    _defineProperty(this, "launchAdvSettingsModal", () => {
      this._actions.launchAdvSettingsModal(this.props.flux, {
        project: this.props.project,
        onChangeProp: this.savePropValue.bind(this),
        i18n: this.props.i18n
      });
    });

    _defineProperty(this, "advancedSettings", () => {
      const settings = R.pipe(ui.sortForPanel, R.map(this._accordion.bind(this)))(this.state.settings);
      return /*#__PURE__*/React.createElement("div", {
        className: ".advanced-settings-widgets"
      }, settings);
    });

    _defineProperty(this, "_accordion", ([group, settings]) => {
      const setting = settings.map(this._buildWidget.bind(this));
      return /*#__PURE__*/React.createElement(Accordion, {
        key: group,
        accordionPosition: null,
        classParentString: group,
        trigger: group
      }, setting);
    });

    _defineProperty(this, "_buildWidget", ([k, v]) => {
      const options = Array.isArray(v.options) ? v.options : Object.keys(v.options);
      return /*#__PURE__*/React.createElement(Widget, {
        flux: this.props.flux,
        key: k,
        id: v.path,
        name: v.path,
        title: v.name,
        type: v.type // A temporary hack, to avoid testing errors caused by the fact that the
        // base layer surface temp setting's fields are not properly populated
        ,
        value: v.value === null || v.value === undefined ? 0 : v.value,
        format: v.format(this._i18n),
        options: options.map(option => ({
          value: option,
          label: v.format(this._i18n)(option, v.validStrings)
        })),
        sanitize: v.sanitize,
        step: v.step,
        min: v.min,
        max: v.max,
        units: v.unit,
        onChange: val => this.savePropValue(v.path, val, v.type)
      });
    });

    _defineProperty(this, "renderExtruderTypesView", () => {
      const attachedExtruders = this.props.printer.getAttachedExtruders();
      const isSketchPrinter = this.props.printer.isSketchPrinter();
      return attachedExtruders.length > 1 || isSketchPrinter ? this.renderExtendedExtruderView() : this.renderSimpleExtruderView();
    });

    _defineProperty(this, "renderExtendedExtruderView", () => {
      const attachedExtruders = this.props.printer.getAttachedExtruders();
      const supportedExtruders = this.getExtruderOptions(); // hack to avoid timing issue where extruder vals  don't keep up when switching bots

      if (attachedExtruders.length !== supportedExtruders.length) {
        return this.closePanel();
      }

      return /*#__PURE__*/React.createElement(Accordion, {
        key: "extruders",
        accordionPosition: null,
        classParentString: "extruders",
        trigger: "extruders"
      }, /*#__PURE__*/React.createElement("div", null, attachedExtruders.map((extruder, index) => {
        const extruderPath = `occurrence:attached_extruder${index}`;
        return /*#__PURE__*/React.createElement("div", {
          key: extruderPath,
          id: extruderPath,
          className: "padding-sides-20"
        }, /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("div", {
          className: "prop-hdr"
        }, `Extruder Slot ${index + 1}`), /*#__PURE__*/React.createElement(Dropdown, {
          name: `attached_extruder${index}`,
          value: attachedExtruders[index],
          options: supportedExtruders[index],
          onChange: event => this.handlePairExtruderChange(event.value, index) // used only here to prevent selections for live printers
          ,
          isLivePrinter: this.isLivePrinter()
        }), this.renderMaterialTypesView(index), /*#__PURE__*/React.createElement("br", null));
      })));
    });

    _defineProperty(this, "renderSimpleExtruderView", () => {
      const attachedExtruders = this.props.printer.getAttachedExtruders();
      const supportedExtruders = this.getExtruderOptions();
      const extruderPath = 'occurrence:attached_extruder0';
      return /*#__PURE__*/React.createElement("div", {
        className: "padding-sides-20"
      }, /*#__PURE__*/React.createElement("h4", {
        className: "prop-hdr"
      }, "Extruder Type"), /*#__PURE__*/React.createElement("div", {
        key: extruderPath,
        id: extruderPath
      }, /*#__PURE__*/React.createElement(Dropdown, {
        name: "attached_extruder0",
        value: attachedExtruders[0],
        options: supportedExtruders[0],
        onChange: event => this.handleExtruderChange(event.value, 0) // used only here to prevent selections for live printers
        ,
        isLivePrinter: this.isLivePrinter()
      })));
    });

    _defineProperty(this, "getMaterialOptions", extruderIndex => {
      const {
        supported,
        spoolMaterials,
        translations
      } = this.state.materials;
      const isBotLive = this.props.printer.isConnected() && this.props.printer.isAuthenticated();
      const attachedExtruder = this.props.printer.getAttachedExtruders()[extruderIndex];
      const extruderIsLabs = attachedExtruder === ExtruderTypeEnum.mk14_e;
      const isSketchPrinter = this.props.printer.isSketchPrinter();
      const materialOptions = isBotLive && !extruderIsLabs && !isSketchPrinter ? [spoolMaterials[extruderIndex]] : supported[extruderIndex];
      return materialOptions.map(material => {
        const materialName = material || UnknownMaterialString; // To avoid crashing the panel, provide a fallback to material
        // translations

        const getMaterialTranslation = material => {
          if (!material) {
            return UnknownMaterial;
          } else {
            return translations[material] ? translations[material].name : material;
          }
        };

        return {
          value: materialName,
          label: getMaterialTranslation(material)
        };
      });
    });

    _defineProperty(this, "renderMaterialTypesView", extruderIndex => {
      const selected = this.state.materials.selected[extruderIndex] || UnknownMaterialString;
      const materialPath = `occurrence:material${extruderIndex}`;
      const numberOfExtruders = this.props.printer.getAttachedExtruders().length;
      const isSketchPrinter = this.props.printer.isSketchPrinter(); //there is no material selection for single-extrusion bots except 'sketch'
      //for those, material is always inferred from extruder

      if (!(numberOfExtruders > 1) && !isSketchPrinter) {
        return;
      }

      return /*#__PURE__*/React.createElement("div", {
        key: materialPath,
        id: materialPath
      }, /*#__PURE__*/React.createElement(Dropdown, {
        name: "materials",
        value: selected,
        options: this.getMaterialOptions(extruderIndex),
        onChange: event => this.handleMaterialChange(event.value, extruderIndex)
      }));
    });

    _defineProperty(this, "renderPrintModeView", () => {
      const isSixthGen = this.props.printer.isSixthGen();
      const printMode = this.state.printMode;
      const mode = either(printMode.selected, this.state.currentPreset).left(ui.withAsterisk(this.displayPrintMode.bind(this), this._store.hasOverridesForPrintMode)).right(ui.withAsterisk(utils.truncate('â€¦', 25), this._store.hasOverridesForPreset)).lift();
      return /*#__PURE__*/React.createElement("div", {
        className: "padding-sides-20",
        key: "occurrence:printMode",
        id: "occurrence:printMode"
      }, /*#__PURE__*/React.createElement("h4", {
        className: "prop-hdr"
      }, this.props.i18n('mb:printSettings.printMode')), /*#__PURE__*/React.createElement("div", {
        id: "printModesButton",
        onClick: () => {
          {
            this.props.flux.getService('ModalService').show( /*#__PURE__*/React.createElement(PrintModesModal, {
              flux: this.props.flux,
              printModes: printMode.supported,
              handlePrintModeChange: this.handlePrintModeChange.bind(this),
              launchAdvSettingsModal: () => this.launchAdvSettingsModal()
            }), {
              title: /*#__PURE__*/React.createElement("a", {
                className: "supportLink",
                onClick: () => {
                  LinkClickUtils.clickAction(this.props.flux, 'default_print_modes_link_clicked', UrlConst.defaultPrintModes);
                }
              }, this.props.i18n('mb:printModes.title'), /*#__PURE__*/React.createElement(Isvg, {
                className: "helperLinkIcon",
                src: "icons/helpful-link-white.svg"
              })),
              modalClass: isSixthGen ? 'w800' : 'w650'
            });
          }
        }
      }, mode));
    });

    _defineProperty(this, "renderCustomSettingsButton", () => {
      return /*#__PURE__*/React.createElement(Button, {
        id: "add-custom-print-setting",
        type: "secondary",
        label: "Custom Settings",
        onClick: () => this.launchAdvSettingsModal()
      });
    });

    _defineProperty(this, "renderResetDropdown", () => {
      return /*#__PURE__*/React.createElement(ButtonWithDropdown, {
        i18n: this._i18n,
        flux: this.props.flux,
        id: "resetSettingsButton",
        classes: "secondary1 resetSettingsButton",
        dropdownClasses: "secondary1",
        label: this._i18n.t('mb:printSettings.right_click.reset_all_to_default'),
        onClick: () => this._actions.resetAllToDefault(),
        menuItems: [{
          path: 'removeAllSettings',
          label: this._i18n.t('mb:printSettings.right_click.remove_all_settings'),
          action: () => this._actions.removeAllSettings()
        }]
      });
    });

    _defineProperty(this, "render", () => {
      const i18n = this.props.i18n;
      const selectionInfo = this.props.selectionInfo;
      const extruderCount = this.state.extruders.supported.length;
      const renderExtruder = (extruderCount || 0) >= 1;

      if (!selectionInfo || selectionInfo.activeTrayOccurrenceIds.length === 0) {
        return /*#__PURE__*/React.createElement("div", R.merge(this.props, {
          className: `${this.props.className || ''} section`
        }), /*#__PURE__*/React.createElement("div", R.merge(this.props, {
          className: `errorMessage`
        }), i18n('mb:printSettings.noModelPresent')));
      }

      if (R.keys(this.state.settings).length === 0) {
        return /*#__PURE__*/React.createElement("div", R.merge(this.props, {
          className: `${this.props.className || ''} section`
        }), /*#__PURE__*/React.createElement("div", R.merge(this.props, {
          className: `errorMessage`
        }), i18n('mb:printSettings.loadingSettings')));
      }

      return /*#__PURE__*/React.createElement("div", {
        className: `${this.props.className || ''} section padding-sides-20`
      }, this.state.extruders && renderExtruder ? this.renderExtruderTypesView() : null, this.state.printMode ? this.renderPrintModeView() : null, this.advancedSettings(), /*#__PURE__*/React.createElement("div", {
        className: "custom-btn-div"
      }, this.renderCustomSettingsButton()), /*#__PURE__*/React.createElement("div", {
        className: "reset-btn-div"
      }, this.renderResetDropdown()));
    });
  }

  /**
   * Handle pair extruders change by user to avoid
   * extruder mismatch configurations; ie [mk14, mk14_hot_s] or [mk14_hot, mk14_hot_s]
   * @param {string} val - selected extruder id ie. "mk14_hot_s" or "mk13_impla"
   */
  handlePairExtruderChange(val, index) {
    const {
      supportedExtruderPairConfigs
    } = this.state.extruders;
    const otherIndex = 1 - index;
    const newExtruderPair = this.props.printer.getAttachedExtruders();
    newExtruderPair[index] = val;
    const configsWithNewExtruder = supportedExtruderPairConfigs.filter(extruderPair => {
      if (R.contains(val, extruderPair)) {
        return extruderPair;
      }
    }).sort();

    const updateExtruderPair = extruderPair => {
      this.props.printer.setAttachedExtruders(extruderPair); // Even though we're now storing extruders in the printer object, not the tray
      // we still need savePropValue because it has the side effect of correctly
      // clearing the build.

      this.savePropValue('occurrence:extruders', extruderPair, 'array');
      return q(this._actions.updateExtruderPair()).then(() => this.trackChange(this.displayExtruder(val))).catch(err => this._loggingService.error(err)).done();
    };

    if (R.contains(newExtruderPair, configsWithNewExtruder)) {
      updateExtruderPair(newExtruderPair);
    } else {
      // If the user-chosen extruder conflicts with the other, non-changed extruder,
      // update that other extruder, using the default listed in constants
      const configWithDefaultExtruder = [];
      configWithDefaultExtruder[index] = val;
      configWithDefaultExtruder[otherIndex] = DefaultExtruderPairs[val];
      updateExtruderPair(configWithDefaultExtruder);
    }
  }
  /**
   * Handle material change by user.
   * @param{string} val - selected material
   */


  getExtruderOptions() {
    const {
      supportedExtrudersPerIndex
    } = this.state.extruders;
    const attachedExtruders = this.props.printer.getAttachedExtruders(); // Why? Well because Experimental Extruder is a fake mk13 extruder
    // that requires many logic statements to build out functionality
    // throughout the app

    if (attachedExtruders.length === 1 && attachedExtruders[0] === ExtruderTypeEnum.mk13_experimental) {
      return [[{
        value: attachedExtruders[0],
        label: this.displayExtruder(attachedExtruders[0])
      }]];
    }

    return supportedExtrudersPerIndex.map(supportedExtruders => {
      const sortedExtruders = supportedExtruders.sort((extruder1, extruder2) => {
        // A hack to make sure LABS extruder is always last in the list
        if (extruder1 === ExtruderTypeEnum.mk14_e) {
          return 1;
        } else {
          if (extruder2 === ExtruderTypeEnum.mk14_e) {
            return -1;
          }
        } // The order of the non-LABS extruders doesn't matter


        return 0;
      });
      return sortedExtruders.map(extruder => ({
        value: extruder,
        label: this.displayExtruder(extruder)
      }));
    });
  }

  isLivePrinter() {
    const {
      printer
    } = this.props;
    return printer && printer.isConnected() && printer.isAuthenticated();
  }

}

PrintSettingsPanel.displayName = 'PrintSettingsPanel';
PrintSettingsPanel.propTypes = R.merge(FluxComponent.propTypes, {
  flux: React.PropTypes.object.isRequired,
  i18n: React.PropTypes.func.isRequired,
  printer: React.PropTypes.object.isRequired,
  project: React.PropTypes.shape({
    getOccurrences: React.PropTypes.func.isRequired,
    getRootOccurrences: React.PropTypes.func.isRequired
  }).isRequired,
  tray: React.PropTypes.object.isRequired,
  selectionInfo: PropTypes.selectionInfo // optional selections

});
module.exports = PrintSettingsPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaW50U2V0dGluZ3NQYW5lbC5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJSIiwiSXN2ZyIsInEiLCJwYXRoIiwiRWFnbGVQcmludCIsIkRyb3Bkb3duIiwiQnV0dG9uIiwiRmx1eENvbXBvbmVudCIsInZpZXdzIiwiUHJvcFR5cGVzIiwiV2lkZ2V0IiwiUHJpbnRNb2Rlc01vZGFsIiwiRXh0cnVkZXJUeXBlRW51bSIsIkRlZmF1bHRFeHRydWRlclBhaXJzIiwiQWNjb3JkaW9uIiwidWkiLCJlaXRoZXIiLCJ1dGlscyIsIkxpbmtDbGlja1V0aWxzIiwiVXJsQ29uc3QiLCJ1cmwiLCJCdXR0b25XaXRoRHJvcGRvd24iLCJVbmtub3duTWF0ZXJpYWxTdHJpbmciLCJVbmtub3duTWF0ZXJpYWwiLCJQcmludFNldHRpbmdzUGFuZWwiLCJwcm9wcyIsImZsdXgiLCJnZXRTZXJ2aWNlIiwiZ2V0Rmx1eCIsInN0b3JlIiwiYWN0aW9ucyIsIlByaW50U2V0dGluZ3NBY3Rpb25zIiwic2F2ZVByb3BWYWx1ZSIsInByb2plY3QiLCJfc3RvcmUiLCJnZXRTdGF0ZSIsImNvbXBvbmVudFdpbGxNb3VudCIsImFkZExpc3RlbmVyIiwib25DaGFuZ2UiLCJjbG9zZVBhbmVsIiwiX2FjdGlvbnMiLCJsb2FkU2NoZW1hIiwiaWQiLCJwcmludGVyIiwiZ2V0SWQiLCJjb21wb25lbnREaWRNb3VudCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwicmVtb3ZlTGlzdGVuZXIiLCJpc0FjdGl2ZSIsImRlbGF5IiwidGhlbiIsInN0YXRlIiwic2V0U3RhdGUiLCJnZXRPY2N1cnJlbmNlcyIsInRvQXJyYXkiLCJtYXAiLCJvY2MiLCJ2YWwiLCJpbmRleCIsImRpc3BsYXlOYW1lIiwiZGlzcGxheUV4dHJ1ZGVyIiwiY3VycmVudEV4dHJ1ZGVycyIsImdldEF0dGFjaGVkRXh0cnVkZXJzIiwic2V0QXR0YWNoZWRFeHRydWRlcnMiLCJ1cGRhdGVFeHRydWRlciIsInRyYWNrQ2hhbmdlIiwiY2F0Y2giLCJlcnIiLCJfbG9nZ2luZ1NlcnZpY2UiLCJlcnJvciIsImRvbmUiLCJjdXJyZW50TWF0ZXJpYWxzIiwibWF0ZXJpYWxzIiwic2VsZWN0ZWQiLCJ1cGRhdGVNYXRlcmlhbCIsImRpc3BsYXlQcmludE1vZGUiLCJ1cGRhdGVQcmludE1vZGUiLCJtZXJnZWQiLCJtZXJnZSIsIm5hbWUiLCJsYWJlbCIsImNoYW5nZV90byIsImdldFRyYWNraW5nSW5mbyIsIl90cmFja2luZ1NlcnZpY2UiLCJhZGRFdmVudCIsImV4dHJ1ZGVyVHlwZSIsImkxOG4iLCJ2IiwibGF1bmNoQWR2U2V0dGluZ3NNb2RhbCIsIm9uQ2hhbmdlUHJvcCIsImJpbmQiLCJzZXR0aW5ncyIsInBpcGUiLCJzb3J0Rm9yUGFuZWwiLCJfYWNjb3JkaW9uIiwiZ3JvdXAiLCJzZXR0aW5nIiwiX2J1aWxkV2lkZ2V0IiwiayIsIm9wdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJPYmplY3QiLCJrZXlzIiwidHlwZSIsInZhbHVlIiwidW5kZWZpbmVkIiwiZm9ybWF0IiwiX2kxOG4iLCJvcHRpb24iLCJ2YWxpZFN0cmluZ3MiLCJzYW5pdGl6ZSIsInN0ZXAiLCJtaW4iLCJtYXgiLCJ1bml0IiwiYXR0YWNoZWRFeHRydWRlcnMiLCJpc1NrZXRjaFByaW50ZXIiLCJsZW5ndGgiLCJyZW5kZXJFeHRlbmRlZEV4dHJ1ZGVyVmlldyIsInJlbmRlclNpbXBsZUV4dHJ1ZGVyVmlldyIsInN1cHBvcnRlZEV4dHJ1ZGVycyIsImdldEV4dHJ1ZGVyT3B0aW9ucyIsImV4dHJ1ZGVyIiwiZXh0cnVkZXJQYXRoIiwiZXZlbnQiLCJoYW5kbGVQYWlyRXh0cnVkZXJDaGFuZ2UiLCJpc0xpdmVQcmludGVyIiwicmVuZGVyTWF0ZXJpYWxUeXBlc1ZpZXciLCJoYW5kbGVFeHRydWRlckNoYW5nZSIsImV4dHJ1ZGVySW5kZXgiLCJzdXBwb3J0ZWQiLCJzcG9vbE1hdGVyaWFscyIsInRyYW5zbGF0aW9ucyIsImlzQm90TGl2ZSIsImlzQ29ubmVjdGVkIiwiaXNBdXRoZW50aWNhdGVkIiwiYXR0YWNoZWRFeHRydWRlciIsImV4dHJ1ZGVySXNMYWJzIiwibWsxNF9lIiwibWF0ZXJpYWxPcHRpb25zIiwibWF0ZXJpYWwiLCJtYXRlcmlhbE5hbWUiLCJnZXRNYXRlcmlhbFRyYW5zbGF0aW9uIiwibWF0ZXJpYWxQYXRoIiwibnVtYmVyT2ZFeHRydWRlcnMiLCJnZXRNYXRlcmlhbE9wdGlvbnMiLCJoYW5kbGVNYXRlcmlhbENoYW5nZSIsImlzU2l4dGhHZW4iLCJwcmludE1vZGUiLCJtb2RlIiwiY3VycmVudFByZXNldCIsImxlZnQiLCJ3aXRoQXN0ZXJpc2siLCJoYXNPdmVycmlkZXNGb3JQcmludE1vZGUiLCJyaWdodCIsInRydW5jYXRlIiwiaGFzT3ZlcnJpZGVzRm9yUHJlc2V0IiwibGlmdCIsInNob3ciLCJoYW5kbGVQcmludE1vZGVDaGFuZ2UiLCJ0aXRsZSIsImNsaWNrQWN0aW9uIiwiZGVmYXVsdFByaW50TW9kZXMiLCJtb2RhbENsYXNzIiwidCIsInJlc2V0QWxsVG9EZWZhdWx0IiwiYWN0aW9uIiwicmVtb3ZlQWxsU2V0dGluZ3MiLCJzZWxlY3Rpb25JbmZvIiwiZXh0cnVkZXJDb3VudCIsImV4dHJ1ZGVycyIsInJlbmRlckV4dHJ1ZGVyIiwiYWN0aXZlVHJheU9jY3VycmVuY2VJZHMiLCJjbGFzc05hbWUiLCJyZW5kZXJFeHRydWRlclR5cGVzVmlldyIsInJlbmRlclByaW50TW9kZVZpZXciLCJhZHZhbmNlZFNldHRpbmdzIiwicmVuZGVyQ3VzdG9tU2V0dGluZ3NCdXR0b24iLCJyZW5kZXJSZXNldERyb3Bkb3duIiwic3VwcG9ydGVkRXh0cnVkZXJQYWlyQ29uZmlncyIsIm90aGVySW5kZXgiLCJuZXdFeHRydWRlclBhaXIiLCJjb25maWdzV2l0aE5ld0V4dHJ1ZGVyIiwiZmlsdGVyIiwiZXh0cnVkZXJQYWlyIiwiY29udGFpbnMiLCJzb3J0IiwidXBkYXRlRXh0cnVkZXJQYWlyIiwiY29uZmlnV2l0aERlZmF1bHRFeHRydWRlciIsInN1cHBvcnRlZEV4dHJ1ZGVyc1BlckluZGV4IiwibWsxM19leHBlcmltZW50YWwiLCJzb3J0ZWRFeHRydWRlcnMiLCJleHRydWRlcjEiLCJleHRydWRlcjIiLCJwcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwiZnVuYyIsInNoYXBlIiwiZ2V0Um9vdE9jY3VycmVuY2VzIiwidHJheSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxNQUFNQyxDQUFDLEdBQUdELE9BQU8sQ0FBQyxPQUFELENBQWpCOztBQUNBLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLGlCQUFELENBQXBCOztBQUNBLE1BQU1HLENBQUMsR0FBR0gsT0FBTyxDQUFDLEdBQUQsQ0FBakI7O0FBQ0EsTUFBTUksSUFBSSxHQUFHSixPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFDQSxNQUFNSyxVQUFVLEdBQUdMLE9BQU8sQ0FBQyxhQUFELENBQTFCOztBQUNBLE1BQU1NLFFBQVEsR0FBR04sT0FBTyxDQUFDLHFDQUFELENBQXhCOztBQUNBLE1BQU1PLE1BQU0sR0FBR1AsT0FBTyxDQUFDLDZCQUFELENBQXRCOztBQUVBLE1BQU1RLGFBQWEsR0FBR0gsVUFBVSxDQUFDSSxLQUFYLENBQWlCRCxhQUF2QztBQUNBLE1BQU1FLFNBQVMsR0FBR0wsVUFBVSxDQUFDSSxLQUFYLENBQWlCQyxTQUFuQzs7QUFDQSxNQUFNQyxNQUFNLEdBQUdYLE9BQU8sQ0FBQyx5QkFBRCxDQUF0Qjs7QUFDQSxNQUFNWSxlQUFlLEdBQUdaLE9BQU8sQ0FBQyxtQkFBRCxDQUEvQjs7QUFDQSxNQUFNO0FBQUVhLEVBQUFBLGdCQUFGO0FBQW9CQyxFQUFBQTtBQUFwQixJQUE2Q2QsT0FBTyxDQUFDLG9CQUFELENBQTFEOztBQUNBLE1BQU1lLFNBQVMsR0FBR2YsT0FBTyxDQUFDLDZCQUFELENBQXpCOztBQUNBLE1BQU1nQixFQUFFLEdBQUdoQixPQUFP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dCc7XHJcblxyXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmNvbnN0IFIgPSByZXF1aXJlKCdyYW1kYScpO1xyXG5jb25zdCBJc3ZnID0gcmVxdWlyZSgncmVhY3QtaW5saW5lc3ZnJyk7XHJcbmNvbnN0IHEgPSByZXF1aXJlKCdxJyk7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbmNvbnN0IEVhZ2xlUHJpbnQgPSByZXF1aXJlKCdlYWdsZS1wcmludCcpO1xyXG5jb25zdCBEcm9wZG93biA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL3VpL2lucHV0X2Ryb3Bkb3duJyk7XHJcbmNvbnN0IEJ1dHRvbiA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL3VpL2J1dHRvbicpO1xyXG5cclxuY29uc3QgRmx1eENvbXBvbmVudCA9IEVhZ2xlUHJpbnQudmlld3MuRmx1eENvbXBvbmVudDtcclxuY29uc3QgUHJvcFR5cGVzID0gRWFnbGVQcmludC52aWV3cy5Qcm9wVHlwZXM7XHJcbmNvbnN0IFdpZGdldCA9IHJlcXVpcmUoJy4vYWR2YW5jZWRTZXR0aW5nV2lkZ2V0Jyk7XHJcbmNvbnN0IFByaW50TW9kZXNNb2RhbCA9IHJlcXVpcmUoJy4vcHJpbnRNb2Rlc01vZGFsJyk7XHJcbmNvbnN0IHsgRXh0cnVkZXJUeXBlRW51bSwgRGVmYXVsdEV4dHJ1ZGVyUGFpcnMgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbnN0YW50cycpO1xyXG5jb25zdCBBY2NvcmRpb24gPSByZXF1aXJlKCcuL2FkdmFuY2VkU2V0dGluZ3NBY2NvcmRpb24nKTtcclxuY29uc3QgdWkgPSByZXF1aXJlKCcuLi8uLi8uLi91dGlscy9wcmludFNldHRpbmdzL3VpVXRpbHMnKTtcclxuY29uc3QgeyBlaXRoZXIgfSA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWxzL21heWJlJyk7XHJcbmNvbnN0IHV0aWxzID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbCcpO1xyXG5jb25zdCBMaW5rQ2xpY2tVdGlscyA9IHJlcXVpcmUoJy4uLy4uLy4uL3V0aWxzL2xpbmtDbGljaycpO1xyXG5jb25zdCBVcmxDb25zdCA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbnN0YW50cy91cmxzJykudXJsO1xyXG5jb25zdCBCdXR0b25XaXRoRHJvcGRvd24gPSByZXF1aXJlKCcuLi9idXR0b25XaXRoRHJvcGRvd24nKTtcclxuXHJcbmNvbnN0IFVua25vd25NYXRlcmlhbFN0cmluZyA9ICdnZW5lcmljX21vZGVsJztcclxuY29uc3QgVW5rbm93bk1hdGVyaWFsID0gJ1Vua25vd24gTWF0ZXJpYWwnO1xyXG5cclxuLyoqXHJcbiAqICBUaGlzIGNsYXNzIHJldHJpZXZlcyBhbmQgc2V0cyBwcmludCBzZXR0aW5nIGZvciB0cmF5IGJvZGllcyBhcyB3ZWxsIGFzIHRyYXkgc2V0dGluZ3MuXHJcbiAqICBFeGFtcGxlcyBvZiB0cmF5IGJvZHkgc2V0dGluZ3MgYXJlIGxheWVyIEhlaWdodCwgcmFmdHMsIGFuZCBpbmZpbGwgRGVuc2l0eS5cclxuICogIEl0IGlzIGltcGxlbWVudGVkIGJ5IHRoZSByaWdodCB0b29sYmFyIChwcm9wZXJ0aWVzVG9vbGJhci5qcykgYW5kIGlzIHJlZmVyZWQgdG8gYXNcclxuICogIHRoZSBtYXRlcmlhbCBzZWN0aW9uLlxyXG4gKi9cclxuY2xhc3MgUHJpbnRTZXR0aW5nc1BhbmVsIGV4dGVuZHMgRmx1eENvbXBvbmVudCB7XHJcbiAgICBfYXBwbHlUb0FsbCA9IHRydWU7XHJcbiAgICBfdHJhY2tpbmdTZXJ2aWNlID0gdGhpcy5wcm9wcy5mbHV4LmdldFNlcnZpY2UoJ1RyYWNraW5nU2VydmljZScpO1xyXG4gICAgX2kxOG4gPSB0aGlzLmdldEZsdXgoKS5nZXRTZXJ2aWNlKCdUcmFuc2xhdGlvblNlcnZpY2UnKTtcclxuICAgIF9sb2dnaW5nU2VydmljZSA9IHRoaXMucHJvcHMuZmx1eC5nZXRTZXJ2aWNlKCdMb2dnaW5nU2VydmljZScpO1xyXG4gICAgX3N0b3JlID0gdGhpcy5nZXRGbHV4KCkuc3RvcmUoJ1ByaW50U2V0dGluZ3NTdG9yZScpO1xyXG4gICAgX2FjdGlvbnMgPSB0aGlzLmdldEZsdXgoKS5hY3Rpb25zLlByaW50U2V0dGluZ3NBY3Rpb25zO1xyXG4gICAgc2F2ZVByb3BWYWx1ZSA9IHVpLnNhdmVQcm9wVmFsdWUodGhpcy5nZXRGbHV4KCksIHRoaXMucHJvcHMucHJvamVjdCk7XHJcbiAgICBzdGF0ZSA9IHRoaXMuX3N0b3JlLmdldFN0YXRlKCk7XHJcblxyXG4gICAgY29tcG9uZW50V2lsbE1vdW50ID0gKCkgPT4ge1xyXG4gICAgICAgIHN1cGVyLmNvbXBvbmVudFdpbGxNb3VudCgpO1xyXG5cclxuICAgICAgICAvLyBBZGQgTGlzdGVuZXJzXHJcbiAgICAgICAgdGhpcy5fc3RvcmUuYWRkTGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JlLmFkZExpc3RlbmVyKCdjbG9zZV9wYW5lbCcsIHRoaXMuY2xvc2VQYW5lbCk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmUuYWRkTGlzdGVuZXIoJ2luaXRpYWxpemVfdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3Rpb25zLmxvYWRTY2hlbWEoeyBpZDogdGhpcy5wcm9wcy5wcmludGVyLmdldElkKCkgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50ID0gKCkgPT4ge1xyXG4gICAgICAgIHN1cGVyLmNvbXBvbmVudERpZE1vdW50KCk7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucy5sb2FkU2NoZW1hKHsgaWQ6IHRoaXMucHJvcHMucHJpbnRlci5nZXRJZCgpIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCA9ICgpID0+IHtcclxuICAgICAgICBzdXBlci5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgTGlzdGVuZXJzXHJcbiAgICAgICAgdGhpcy5fc3RvcmUucmVtb3ZlTGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMub25DaGFuZ2UpO1xyXG4gICAgICAgIHRoaXMuX3N0b3JlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZV9wYW5lbCcsIHRoaXMuY2xvc2VQYW5lbCk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmUucmVtb3ZlTGlzdGVuZXIoJ2luaXRpYWxpemVfdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3Rpb25zLmxvYWRTY2hlbWEoeyBpZDogdGhpcy5wcm9wcy5wcmludGVyLmdldElkKCkgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNsb3NlUGFuZWwgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgLy8gTk9URTogIHdlIG5lZWQgdG8gc29sdmUgdGhpcyBpbiBhIGJldHRlciB3YXkgYXQgc29tZSBwb2ludFxyXG4gICAgICAgICAgICAvLyBwZXJoYXBzIGJ5IGltcGxlbWVudGluZyBhbiBhcHAgd2lkZSBkaXNwYXRjaCBxdWV1ZS5cclxuICAgICAgICAgICAgLy8gRm9yIG5vdywgdGhpcyBzb2x2ZXMgZGlzcGF0Y2ggY29sbGlzaW9uIHRoYXRzIGNhdXNpbmcgZXJyb3JcclxuICAgICAgICAgICAgLy8gYW5kIHJlc3VsdGluZyBpbiBwYW5lbCBub3QgY2xvc2luZy5cclxuICAgICAgICAgICAgcS5kZWxheSgxKS50aGVuKCgpID0+IHRoaXMucHJvcHMuY2xvc2VQYW5lbCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIG9uQ2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5fc3RvcmUuZ2V0U3RhdGUoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHN0YXRlKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gR2V0cyB0aGUgc2VsZWN0aW9uIElEcyBvZiBtb2RlbHMgb24gdHJheVxyXG4gICAgZ2V0U2VsZWN0ZWRPY2NJZHMgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucHJvamVjdFxyXG4gICAgICAgICAgICAuZ2V0T2NjdXJyZW5jZXMoKVxyXG4gICAgICAgICAgICAudG9BcnJheSgpXHJcbiAgICAgICAgICAgIC5tYXAob2NjID0+IG9jYy5nZXRJZCgpKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgZXh0cnVkZXIgY2hhbmdlIGJ5IHVzZXIuXHJcbiAgICAgKiBAcGFyYW17c3RyaW5nfSB2YWwgLSBzZWxlY3RlZCBleHRydWRlclxyXG4gICAgICovXHJcbiAgICBoYW5kbGVFeHRydWRlckNoYW5nZSA9ICh2YWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSB0aGlzLmRpc3BsYXlFeHRydWRlcih2YWwsIGluZGV4KTtcclxuICAgICAgICBjb25zdCBjdXJyZW50RXh0cnVkZXJzID0gdGhpcy5wcm9wcy5wcmludGVyLmdldEF0dGFjaGVkRXh0cnVkZXJzKCk7XHJcbiAgICAgICAgY3VycmVudEV4dHJ1ZGVyc1tpbmRleF0gPSB2YWw7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5wcmludGVyLnNldEF0dGFjaGVkRXh0cnVkZXJzKGN1cnJlbnRFeHRydWRlcnMpO1xyXG4gICAgICAgIC8vIEV2ZW4gdGhvdWdoIHdlJ3JlIG5vdyBzdG9yaW5nIGV4dHJ1ZGVycyBpbiB0aGUgcHJpbnRlciBvYmplY3QsIG5vdCB0aGUgdHJheVxyXG4gICAgICAgIC8vIHdlIHN0aWxsIG5lZWQgc2F2ZVByb3BWYWx1ZSBiZWNhdXNlIGl0IGhhcyB0aGUgc2lkZSBlZmZlY3Qgb2YgY29ycmVjdGx5XHJcbiAgICAgICAgLy8gY2xlYXJpbmcgdGhlIGJ1aWxkLlxyXG4gICAgICAgIHRoaXMuc2F2ZVByb3BWYWx1ZSgnb2NjdXJyZW5jZTpleHRydWRlcnMnLCBjdXJyZW50RXh0cnVkZXJzLCAnYXJyYXknKTtcclxuICAgICAgICByZXR1cm4gcSh0aGlzLl9hY3Rpb25zLnVwZGF0ZUV4dHJ1ZGVyKCkpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMudHJhY2tDaGFuZ2UoZGlzcGxheU5hbWUpKVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHRoaXMuX2xvZ2dpbmdTZXJ2aWNlLmVycm9yKGVycikpXHJcbiAgICAgICAgICAgIC5kb25lKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIHBhaXIgZXh0cnVkZXJzIGNoYW5nZSBieSB1c2VyIHRvIGF2b2lkXHJcbiAgICAgKiBleHRydWRlciBtaXNtYXRjaCBjb25maWd1cmF0aW9uczsgaWUgW21rMTQsIG1rMTRfaG90X3NdIG9yIFttazE0X2hvdCwgbWsxNF9ob3Rfc11cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWwgLSBzZWxlY3RlZCBleHRydWRlciBpZCBpZS4gXCJtazE0X2hvdF9zXCIgb3IgXCJtazEzX2ltcGxhXCJcclxuICAgICAqL1xyXG4gICAgaGFuZGxlUGFpckV4dHJ1ZGVyQ2hhbmdlKHZhbCwgaW5kZXgpIHtcclxuICAgICAgICBjb25zdCB7IHN1cHBvcnRlZEV4dHJ1ZGVyUGFpckNvbmZpZ3MgfSA9IHRoaXMuc3RhdGUuZXh0cnVkZXJzO1xyXG4gICAgICAgIGNvbnN0IG90aGVySW5kZXggPSAxIC0gaW5kZXg7XHJcbiAgICAgICAgY29uc3QgbmV3RXh0cnVkZXJQYWlyID0gdGhpcy5wcm9wcy5wcmludGVyLmdldEF0dGFjaGVkRXh0cnVkZXJzKCk7XHJcbiAgICAgICAgbmV3RXh0cnVkZXJQYWlyW2luZGV4XSA9IHZhbDtcclxuXHJcbiAgICAgICAgY29uc3QgY29uZmlnc1dpdGhOZXdFeHRydWRlciA9IHN1cHBvcnRlZEV4dHJ1ZGVyUGFpckNvbmZpZ3NcclxuICAgICAgICAgICAgLmZpbHRlcihleHRydWRlclBhaXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKFIuY29udGFpbnModmFsLCBleHRydWRlclBhaXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJ1ZGVyUGFpcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnNvcnQoKTtcclxuXHJcbiAgICAgICAgY29uc3QgdXBkYXRlRXh0cnVkZXJQYWlyID0gZXh0cnVkZXJQYWlyID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wcmludGVyLnNldEF0dGFjaGVkRXh0cnVkZXJzKGV4dHJ1ZGVyUGFpcik7XHJcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIHdlJ3JlIG5vdyBzdG9yaW5nIGV4dHJ1ZGVycyBpbiB0aGUgcHJpbnRlciBvYmplY3QsIG5vdCB0aGUgdHJheVxyXG4gICAgICAgICAgICAvLyB3ZSBzdGlsbCBuZWVkIHNhdmVQcm9wVmFsdWUgYmVjYXVzZSBpdCBoYXMgdGhlIHNpZGUgZWZmZWN0IG9mIGNvcnJlY3RseVxyXG4gICAgICAgICAgICAvLyBjbGVhcmluZyB0aGUgYnVpbGQuXHJcbiAgICAgICAgICAgIHRoaXMuc2F2ZVByb3BWYWx1ZSgnb2NjdXJyZW5jZTpleHRydWRlcnMnLCBleHRydWRlclBhaXIsICdhcnJheScpO1xyXG4gICAgICAgICAgICByZXR1cm4gcSh0aGlzLl9hY3Rpb25zLnVwZGF0ZUV4dHJ1ZGVyUGFpcigpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy50cmFja0NoYW5nZSh0aGlzLmRpc3BsYXlFeHRydWRlcih2YWwpKSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gdGhpcy5fbG9nZ2luZ1NlcnZpY2UuZXJyb3IoZXJyKSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKFIuY29udGFpbnMobmV3RXh0cnVkZXJQYWlyLCBjb25maWdzV2l0aE5ld0V4dHJ1ZGVyKSkge1xyXG4gICAgICAgICAgICB1cGRhdGVFeHRydWRlclBhaXIobmV3RXh0cnVkZXJQYWlyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgdXNlci1jaG9zZW4gZXh0cnVkZXIgY29uZmxpY3RzIHdpdGggdGhlIG90aGVyLCBub24tY2hhbmdlZCBleHRydWRlcixcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoYXQgb3RoZXIgZXh0cnVkZXIsIHVzaW5nIHRoZSBkZWZhdWx0IGxpc3RlZCBpbiBjb25zdGFudHNcclxuICAgICAgICAgICAgY29uc3QgY29uZmlnV2l0aERlZmF1bHRFeHRydWRlciA9IFtdO1xyXG4gICAgICAgICAgICBjb25maWdXaXRoRGVmYXVsdEV4dHJ1ZGVyW2luZGV4XSA9IHZhbDtcclxuICAgICAgICAgICAgY29uZmlnV2l0aERlZmF1bHRFeHRydWRlcltvdGhlckluZGV4XSA9IERlZmF1bHRFeHRydWRlclBhaXJzW3ZhbF07XHJcbiAgICAgICAgICAgIHVwZGF0ZUV4dHJ1ZGVyUGFpcihjb25maWdXaXRoRGVmYXVsdEV4dHJ1ZGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgbWF0ZXJpYWwgY2hhbmdlIGJ5IHVzZXIuXHJcbiAgICAgKiBAcGFyYW17c3RyaW5nfSB2YWwgLSBzZWxlY3RlZCBtYXRlcmlhbFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVNYXRlcmlhbENoYW5nZSA9ICh2YWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudE1hdGVyaWFscyA9IHRoaXMuc3RhdGUubWF0ZXJpYWxzLnNlbGVjdGVkO1xyXG4gICAgICAgIGN1cnJlbnRNYXRlcmlhbHNbaW5kZXhdID0gdmFsO1xyXG4gICAgICAgIHRoaXMuc2F2ZVByb3BWYWx1ZSgnb2NjdXJyZW5jZTptYXRlcmlhbHMnLCBjdXJyZW50TWF0ZXJpYWxzLCAnYXJyYXknKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHEoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9hY3Rpb25zLnVwZGF0ZU1hdGVyaWFsKGluZGV4LCB2YWwpKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLnRyYWNrQ2hhbmdlKHZhbCkpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gdGhpcy5fbG9nZ2luZ1NlcnZpY2UuZXJyb3IoZXJyKSlcclxuICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgcHJpbnQgbW9kZSBjaGFuZ2UgYnkgdXNlci5cclxuICAgICAqIEBwYXJhbXtzdHJpbmd9IHZhbCAtIHNlbGVjdGVkIHByaW50IG1vZGVcclxuICAgICAqL1xyXG4gICAgaGFuZGxlUHJpbnRNb2RlQ2hhbmdlID0gdmFsID0+IHtcclxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IHRoaXMuZGlzcGxheVByaW50TW9kZSh2YWwpO1xyXG4gICAgICAgIHRoaXMuc2F2ZVByb3BWYWx1ZSgnb2NjdXJyZW5jZTpwcmludE1vZGUnLCB2YWwsICdzdHJpbmcnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHEoKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9hY3Rpb25zLnVwZGF0ZVByaW50TW9kZSh2YWwpKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLnRyYWNrQ2hhbmdlKGRpc3BsYXlOYW1lKSlcclxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB0aGlzLl9sb2dnaW5nU2VydmljZS5lcnJvcihlcnIpKVxyXG4gICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRha2VzIHZhcmlhYmxlIGFuZCBzZW5kcyB0byBUcmFja2luZyBTZXJ2aWNlXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZGlzcGxheU5hbWUgLSBldmVudCBuYW1lIHRvIHRyYWNrXHJcbiAgICAgKi9cclxuICAgIHRyYWNrQ2hhbmdlID0gZGlzcGxheU5hbWUgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IFIubWVyZ2UoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGAke3RoaXMubGFiZWx9IENoYW5nZWAsXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VfdG86IGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnByaW50ZXIuZ2V0VHJhY2tpbmdJbmZvKClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICB0aGlzLl90cmFja2luZ1NlcnZpY2UuYWRkRXZlbnQobWVyZ2VkKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgVUkgZGlzcGxheSBwdXJwb3NlcyBvbmx5XHJcbiAgICAgKiBQYXJzZXMga2V5IHRvIGRpc3BsYXkgdmFsdWUgdGhyb3VnaCB0cmFuc2xhdGlvbnMuanNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHRydWRlclR5cGUgLSBzdHJpbmcgdG8gY29udmVydCB0byBkaXNwbGF5IHZhbHVlXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBkaXNwbGF5RXh0cnVkZXIgPSBleHRydWRlclR5cGUgPT4ge1xyXG4gICAgICAgIGlmICghZXh0cnVkZXJUeXBlKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAvLyBzaG91bGQgZmFsbGJhY2sgdG8ganVzdCBkaXNwbGF5aW5nIHRoZSBgZXh0cnVkZXJUeXBlYCBpZiB0aGVyZSdzXHJcbiAgICAgICAgLy8gbm90aGluZyBzcGVjaWZpZWQgaW4gdGhlIHRyYW5zbGF0aW9uIGZpbGVcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5pMThuKFtgbWI6cHJpbnRTZXR0aW5ncy4ke2V4dHJ1ZGVyVHlwZX1gLCBleHRydWRlclR5cGVdKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3IgVUkgZGlzcGxheSBwdXJwb3NlcyBvbmx5XHJcbiAgICAgKiBQYXJzZXMga2V5IHRvIGRpc3BsYXkgdmFsdWUgdGhyb3VnaCB0cmFuc2xhdGlvbnMuanNcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGRpc3BsYXlQcmludE1vZGUgPSB2ID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5pMThuKGBtYjpwcmludFNldHRpbmdzLiR7dn1gKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gT3BlbiB1cCB0aGUgYWR2YW5jZWQgc2V0dGluZ3MgbW9kYWxcclxuICAgIGxhdW5jaEFkdlNldHRpbmdzTW9kYWwgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucy5sYXVuY2hBZHZTZXR0aW5nc01vZGFsKHRoaXMucHJvcHMuZmx1eCwge1xyXG4gICAgICAgICAgICBwcm9qZWN0OiB0aGlzLnByb3BzLnByb2plY3QsXHJcbiAgICAgICAgICAgIG9uQ2hhbmdlUHJvcDogdGhpcy5zYXZlUHJvcFZhbHVlLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIGkxOG46IHRoaXMucHJvcHMuaTE4bixcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gSXRlcmF0ZSBhdmFpbGFibGUgc2V0dGluZ3MgJiBzcGl0IG91dCBhZHZhbmNlZCBzZXR0aW5ncyBpbiB0aGVpciByZXF1aXNpdGUgYWNjb3JkaW9uc1xyXG4gICAgYWR2YW5jZWRTZXR0aW5ncyA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IFIucGlwZSh1aS5zb3J0Rm9yUGFuZWwsIFIubWFwKHRoaXMuX2FjY29yZGlvbi5iaW5kKHRoaXMpKSkodGhpcy5zdGF0ZS5zZXR0aW5ncyk7XHJcblxyXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT0nLmFkdmFuY2VkLXNldHRpbmdzLXdpZGdldHMnPntzZXR0aW5nc308L2Rpdj47XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFdyYXAgYSBncm91cCBvZiBzZXR0aW5ncy93aWRnZXRzIGluIGFuIGFjY29yZGlvblxyXG4gICAgX2FjY29yZGlvbiA9IChbZ3JvdXAsIHNldHRpbmdzXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmcgPSBzZXR0aW5ncy5tYXAodGhpcy5fYnVpbGRXaWRnZXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxBY2NvcmRpb24ga2V5PXtncm91cH0gYWNjb3JkaW9uUG9zaXRpb249e251bGx9IGNsYXNzUGFyZW50U3RyaW5nPXtncm91cH0gdHJpZ2dlcj17Z3JvdXB9PlxyXG4gICAgICAgICAgICAgICAge3NldHRpbmd9XHJcbiAgICAgICAgICAgIDwvQWNjb3JkaW9uPlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIENvbnN0cnVjdCBhIHdpZGdldCBmcm9tIGEgc2V0dGluZ1xyXG4gICAgX2J1aWxkV2lkZ2V0ID0gKFtrLCB2XSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBBcnJheS5pc0FycmF5KHYub3B0aW9ucykgPyB2Lm9wdGlvbnMgOiBPYmplY3Qua2V5cyh2Lm9wdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxXaWRnZXRcclxuICAgICAgICAgICAgICAgIGZsdXg9e3RoaXMucHJvcHMuZmx1eH1cclxuICAgICAgICAgICAgICAgIGtleT17a31cclxuICAgICAgICAgICAgICAgIGlkPXt2LnBhdGh9XHJcbiAgICAgICAgICAgICAgICBuYW1lPXt2LnBhdGh9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17di5uYW1lfVxyXG4gICAgICAgICAgICAgICAgdHlwZT17di50eXBlfVxyXG4gICAgICAgICAgICAgICAgLy8gQSB0ZW1wb3JhcnkgaGFjaywgdG8gYXZvaWQgdGVzdGluZyBlcnJvcnMgY2F1c2VkIGJ5IHRoZSBmYWN0IHRoYXQgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBiYXNlIGxheWVyIHN1cmZhY2UgdGVtcCBzZXR0aW5nJ3MgZmllbGRzIGFyZSBub3QgcHJvcGVybHkgcG9wdWxhdGVkXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17di52YWx1ZSA9PT0gbnVsbCB8fCB2LnZhbHVlID09PSB1bmRlZmluZWQgPyAwIDogdi52YWx1ZX1cclxuICAgICAgICAgICAgICAgIGZvcm1hdD17di5mb3JtYXQodGhpcy5faTE4bil9XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXtvcHRpb25zLm1hcChvcHRpb24gPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB2LmZvcm1hdCh0aGlzLl9pMThuKShvcHRpb24sIHYudmFsaWRTdHJpbmdzKSxcclxuICAgICAgICAgICAgICAgIH0pKX1cclxuICAgICAgICAgICAgICAgIHNhbml0aXplPXt2LnNhbml0aXplfVxyXG4gICAgICAgICAgICAgICAgc3RlcD17di5zdGVwfVxyXG4gICAgICAgICAgICAgICAgbWluPXt2Lm1pbn1cclxuICAgICAgICAgICAgICAgIG1heD17di5tYXh9XHJcbiAgICAgICAgICAgICAgICB1bml0cz17di51bml0fVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3ZhbCA9PiB0aGlzLnNhdmVQcm9wVmFsdWUodi5wYXRoLCB2YWwsIHYudHlwZSl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyRXh0cnVkZXJUeXBlc1ZpZXcgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXR0YWNoZWRFeHRydWRlcnMgPSB0aGlzLnByb3BzLnByaW50ZXIuZ2V0QXR0YWNoZWRFeHRydWRlcnMoKTtcclxuICAgICAgICBjb25zdCBpc1NrZXRjaFByaW50ZXIgPSB0aGlzLnByb3BzLnByaW50ZXIuaXNTa2V0Y2hQcmludGVyKCk7XHJcbiAgICAgICAgcmV0dXJuIGF0dGFjaGVkRXh0cnVkZXJzLmxlbmd0aCA+IDEgfHwgaXNTa2V0Y2hQcmludGVyXHJcbiAgICAgICAgICAgID8gdGhpcy5yZW5kZXJFeHRlbmRlZEV4dHJ1ZGVyVmlldygpXHJcbiAgICAgICAgICAgIDogdGhpcy5yZW5kZXJTaW1wbGVFeHRydWRlclZpZXcoKTtcclxuICAgIH07XHJcblxyXG4gICAgZ2V0RXh0cnVkZXJPcHRpb25zKCkge1xyXG4gICAgICAgIGNvbnN0IHsgc3VwcG9ydGVkRXh0cnVkZXJzUGVySW5kZXggfSA9IHRoaXMuc3RhdGUuZXh0cnVkZXJzO1xyXG4gICAgICAgIGNvbnN0IGF0dGFjaGVkRXh0cnVkZXJzID0gdGhpcy5wcm9wcy5wcmludGVyLmdldEF0dGFjaGVkRXh0cnVkZXJzKCk7XHJcblxyXG4gICAgICAgIC8vIFdoeT8gV2VsbCBiZWNhdXNlIEV4cGVyaW1lbnRhbCBFeHRydWRlciBpcyBhIGZha2UgbWsxMyBleHRydWRlclxyXG4gICAgICAgIC8vIHRoYXQgcmVxdWlyZXMgbWFueSBsb2dpYyBzdGF0ZW1lbnRzIHRvIGJ1aWxkIG91dCBmdW5jdGlvbmFsaXR5XHJcbiAgICAgICAgLy8gdGhyb3VnaG91dCB0aGUgYXBwXHJcbiAgICAgICAgaWYgKGF0dGFjaGVkRXh0cnVkZXJzLmxlbmd0aCA9PT0gMSAmJiBhdHRhY2hlZEV4dHJ1ZGVyc1swXSA9PT0gRXh0cnVkZXJUeXBlRW51bS5tazEzX2V4cGVyaW1lbnRhbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF0dGFjaGVkRXh0cnVkZXJzWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5kaXNwbGF5RXh0cnVkZXIoYXR0YWNoZWRFeHRydWRlcnNbMF0pLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZEV4dHJ1ZGVyc1BlckluZGV4Lm1hcChzdXBwb3J0ZWRFeHRydWRlcnMgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzb3J0ZWRFeHRydWRlcnMgPSBzdXBwb3J0ZWRFeHRydWRlcnMuc29ydCgoZXh0cnVkZXIxLCBleHRydWRlcjIpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEEgaGFjayB0byBtYWtlIHN1cmUgTEFCUyBleHRydWRlciBpcyBhbHdheXMgbGFzdCBpbiB0aGUgbGlzdFxyXG4gICAgICAgICAgICAgICAgaWYgKGV4dHJ1ZGVyMSA9PT0gRXh0cnVkZXJUeXBlRW51bS5tazE0X2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4dHJ1ZGVyMiA9PT0gRXh0cnVkZXJUeXBlRW51bS5tazE0X2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgbm9uLUxBQlMgZXh0cnVkZXJzIGRvZXNuJ3QgbWF0dGVyXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzb3J0ZWRFeHRydWRlcnMubWFwKGV4dHJ1ZGVyID0+ICh7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZXh0cnVkZXIsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5kaXNwbGF5RXh0cnVkZXIoZXh0cnVkZXIpLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNMaXZlUHJpbnRlcigpIHtcclxuICAgICAgICBjb25zdCB7IHByaW50ZXIgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIHJldHVybiBwcmludGVyICYmIHByaW50ZXIuaXNDb25uZWN0ZWQoKSAmJiBwcmludGVyLmlzQXV0aGVudGljYXRlZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckV4dGVuZGVkRXh0cnVkZXJWaWV3ID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF0dGFjaGVkRXh0cnVkZXJzID0gdGhpcy5wcm9wcy5wcmludGVyLmdldEF0dGFjaGVkRXh0cnVkZXJzKCk7XHJcbiAgICAgICAgY29uc3Qgc3VwcG9ydGVkRXh0cnVkZXJzID0gdGhpcy5nZXRFeHRydWRlck9wdGlvbnMoKTtcclxuXHJcbiAgICAgICAgLy8gaGFjayB0byBhdm9pZCB0aW1pbmcgaXNzdWUgd2hlcmUgZXh0cnVkZXIgdmFscyAgZG9uJ3Qga2VlcCB1cCB3aGVuIHN3aXRjaGluZyBib3RzXHJcbiAgICAgICAgaWYgKGF0dGFjaGVkRXh0cnVkZXJzLmxlbmd0aCAhPT0gc3VwcG9ydGVkRXh0cnVkZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZVBhbmVsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8QWNjb3JkaW9uIGtleT0nZXh0cnVkZXJzJyBhY2NvcmRpb25Qb3NpdGlvbj17bnVsbH0gY2xhc3NQYXJlbnRTdHJpbmc9J2V4dHJ1ZGVycycgdHJpZ2dlcj0nZXh0cnVkZXJzJz5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7YXR0YWNoZWRFeHRydWRlcnMubWFwKChleHRydWRlciwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dHJ1ZGVyUGF0aCA9IGBvY2N1cnJlbmNlOmF0dGFjaGVkX2V4dHJ1ZGVyJHtpbmRleH1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17ZXh0cnVkZXJQYXRofSBpZD17ZXh0cnVkZXJQYXRofSBjbGFzc05hbWU9J3BhZGRpbmctc2lkZXMtMjAnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Byb3AtaGRyJz57YEV4dHJ1ZGVyIFNsb3QgJHtpbmRleCArIDF9YH08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtgYXR0YWNoZWRfZXh0cnVkZXIke2luZGV4fWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YXR0YWNoZWRFeHRydWRlcnNbaW5kZXhdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17c3VwcG9ydGVkRXh0cnVkZXJzW2luZGV4XX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldmVudCA9PiB0aGlzLmhhbmRsZVBhaXJFeHRydWRlckNoYW5nZShldmVudC52YWx1ZSwgaW5kZXgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlZCBvbmx5IGhlcmUgdG8gcHJldmVudCBzZWxlY3Rpb25zIGZvciBsaXZlIHByaW50ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpdmVQcmludGVyPXt0aGlzLmlzTGl2ZVByaW50ZXIoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTWF0ZXJpYWxUeXBlc1ZpZXcoaW5kZXgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L0FjY29yZGlvbj5cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXJTaW1wbGVFeHRydWRlclZpZXcgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXR0YWNoZWRFeHRydWRlcnMgPSB0aGlzLnByb3BzLnByaW50ZXIuZ2V0QXR0YWNoZWRFeHRydWRlcnMoKTtcclxuICAgICAgICBjb25zdCBzdXBwb3J0ZWRFeHRydWRlcnMgPSB0aGlzLmdldEV4dHJ1ZGVyT3B0aW9ucygpO1xyXG4gICAgICAgIGNvbnN0IGV4dHJ1ZGVyUGF0aCA9ICdvY2N1cnJlbmNlOmF0dGFjaGVkX2V4dHJ1ZGVyMCc7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLXNpZGVzLTIwJz5cclxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9J3Byb3AtaGRyJz5FeHRydWRlciBUeXBlPC9oND5cclxuICAgICAgICAgICAgICAgIDxkaXYga2V5PXtleHRydWRlclBhdGh9IGlkPXtleHRydWRlclBhdGh9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxEcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lPSdhdHRhY2hlZF9leHRydWRlcjAnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXthdHRhY2hlZEV4dHJ1ZGVyc1swXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17c3VwcG9ydGVkRXh0cnVkZXJzWzBdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZXZlbnQgPT4gdGhpcy5oYW5kbGVFeHRydWRlckNoYW5nZShldmVudC52YWx1ZSwgMCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZWQgb25seSBoZXJlIHRvIHByZXZlbnQgc2VsZWN0aW9ucyBmb3IgbGl2ZSBwcmludGVyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0xpdmVQcmludGVyPXt0aGlzLmlzTGl2ZVByaW50ZXIoKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIGdldE1hdGVyaWFsT3B0aW9ucyA9IGV4dHJ1ZGVySW5kZXggPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgc3VwcG9ydGVkLCBzcG9vbE1hdGVyaWFscywgdHJhbnNsYXRpb25zIH0gPSB0aGlzLnN0YXRlLm1hdGVyaWFscztcclxuICAgICAgICBjb25zdCBpc0JvdExpdmUgPSB0aGlzLnByb3BzLnByaW50ZXIuaXNDb25uZWN0ZWQoKSAmJiB0aGlzLnByb3BzLnByaW50ZXIuaXNBdXRoZW50aWNhdGVkKCk7XHJcbiAgICAgICAgY29uc3QgYXR0YWNoZWRFeHRydWRlciA9IHRoaXMucHJvcHMucHJpbnRlci5nZXRBdHRhY2hlZEV4dHJ1ZGVycygpW2V4dHJ1ZGVySW5kZXhdO1xyXG4gICAgICAgIGNvbnN0IGV4dHJ1ZGVySXNMYWJzID0gYXR0YWNoZWRFeHRydWRlciA9PT0gRXh0cnVkZXJUeXBlRW51bS5tazE0X2U7XHJcbiAgICAgICAgY29uc3QgaXNTa2V0Y2hQcmludGVyID0gdGhpcy5wcm9wcy5wcmludGVyLmlzU2tldGNoUHJpbnRlcigpO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsT3B0aW9ucyA9XHJcbiAgICAgICAgICAgIGlzQm90TGl2ZSAmJiAhZXh0cnVkZXJJc0xhYnMgJiYgIWlzU2tldGNoUHJpbnRlclxyXG4gICAgICAgICAgICAgICAgPyBbc3Bvb2xNYXRlcmlhbHNbZXh0cnVkZXJJbmRleF1dXHJcbiAgICAgICAgICAgICAgICA6IHN1cHBvcnRlZFtleHRydWRlckluZGV4XTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsT3B0aW9ucy5tYXAobWF0ZXJpYWwgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbE5hbWUgPSBtYXRlcmlhbCB8fCBVbmtub3duTWF0ZXJpYWxTdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAvLyBUbyBhdm9pZCBjcmFzaGluZyB0aGUgcGFuZWwsIHByb3ZpZGUgYSBmYWxsYmFjayB0byBtYXRlcmlhbFxyXG4gICAgICAgICAgICAvLyB0cmFuc2xhdGlvbnNcclxuICAgICAgICAgICAgY29uc3QgZ2V0TWF0ZXJpYWxUcmFuc2xhdGlvbiA9IG1hdGVyaWFsID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghbWF0ZXJpYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVW5rbm93bk1hdGVyaWFsO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRpb25zW21hdGVyaWFsXSA/IHRyYW5zbGF0aW9uc1ttYXRlcmlhbF0ubmFtZSA6IG1hdGVyaWFsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBtYXRlcmlhbE5hbWUsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2V0TWF0ZXJpYWxUcmFuc2xhdGlvbihtYXRlcmlhbCksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlck1hdGVyaWFsVHlwZXNWaWV3ID0gZXh0cnVkZXJJbmRleCA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnN0YXRlLm1hdGVyaWFscy5zZWxlY3RlZFtleHRydWRlckluZGV4XSB8fCBVbmtub3duTWF0ZXJpYWxTdHJpbmc7XHJcbiAgICAgICAgY29uc3QgbWF0ZXJpYWxQYXRoID0gYG9jY3VycmVuY2U6bWF0ZXJpYWwke2V4dHJ1ZGVySW5kZXh9YDtcclxuICAgICAgICBjb25zdCBudW1iZXJPZkV4dHJ1ZGVycyA9IHRoaXMucHJvcHMucHJpbnRlci5nZXRBdHRhY2hlZEV4dHJ1ZGVycygpLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBpc1NrZXRjaFByaW50ZXIgPSB0aGlzLnByb3BzLnByaW50ZXIuaXNTa2V0Y2hQcmludGVyKCk7XHJcbiAgICAgICAgLy90aGVyZSBpcyBubyBtYXRlcmlhbCBzZWxlY3Rpb24gZm9yIHNpbmdsZS1leHRydXNpb24gYm90cyBleGNlcHQgJ3NrZXRjaCdcclxuICAgICAgICAvL2ZvciB0aG9zZSwgbWF0ZXJpYWwgaXMgYWx3YXlzIGluZmVycmVkIGZyb20gZXh0cnVkZXJcclxuICAgICAgICBpZiAoIShudW1iZXJPZkV4dHJ1ZGVycyA+IDEpICYmICFpc1NrZXRjaFByaW50ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBrZXk9e21hdGVyaWFsUGF0aH0gaWQ9e21hdGVyaWFsUGF0aH0+XHJcbiAgICAgICAgICAgICAgICA8RHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICBuYW1lPSdtYXRlcmlhbHMnXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkfVxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e3RoaXMuZ2V0TWF0ZXJpYWxPcHRpb25zKGV4dHJ1ZGVySW5kZXgpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldmVudCA9PiB0aGlzLmhhbmRsZU1hdGVyaWFsQ2hhbmdlKGV2ZW50LnZhbHVlLCBleHRydWRlckluZGV4KX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlclByaW50TW9kZVZpZXcgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXNTaXh0aEdlbiA9IHRoaXMucHJvcHMucHJpbnRlci5pc1NpeHRoR2VuKCk7XHJcbiAgICAgICAgY29uc3QgcHJpbnRNb2RlID0gdGhpcy5zdGF0ZS5wcmludE1vZGU7XHJcbiAgICAgICAgY29uc3QgbW9kZSA9IGVpdGhlcihwcmludE1vZGUuc2VsZWN0ZWQsIHRoaXMuc3RhdGUuY3VycmVudFByZXNldClcclxuICAgICAgICAgICAgLmxlZnQodWkud2l0aEFzdGVyaXNrKHRoaXMuZGlzcGxheVByaW50TW9kZS5iaW5kKHRoaXMpLCB0aGlzLl9zdG9yZS5oYXNPdmVycmlkZXNGb3JQcmludE1vZGUpKVxyXG4gICAgICAgICAgICAucmlnaHQodWkud2l0aEFzdGVyaXNrKHV0aWxzLnRydW5jYXRlKCfigKYnLCAyNSksIHRoaXMuX3N0b3JlLmhhc092ZXJyaWRlc0ZvclByZXNldCkpXHJcbiAgICAgICAgICAgIC5saWZ0KCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYWRkaW5nLXNpZGVzLTIwJyBrZXk9J29jY3VycmVuY2U6cHJpbnRNb2RlJyBpZD0nb2NjdXJyZW5jZTpwcmludE1vZGUnPlxyXG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT0ncHJvcC1oZHInPnt0aGlzLnByb3BzLmkxOG4oJ21iOnByaW50U2V0dGluZ3MucHJpbnRNb2RlJyl9PC9oND5cclxuICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICBpZD0ncHJpbnRNb2Rlc0J1dHRvbidcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZmx1eFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRTZXJ2aWNlKCdNb2RhbFNlcnZpY2UnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UHJpbnRNb2Rlc01vZGFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbHV4PXt0aGlzLnByb3BzLmZsdXh9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludE1vZGVzPXtwcmludE1vZGUuc3VwcG9ydGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUHJpbnRNb2RlQ2hhbmdlPXt0aGlzLmhhbmRsZVByaW50TW9kZUNoYW5nZS5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF1bmNoQWR2U2V0dGluZ3NNb2RhbD17KCkgPT4gdGhpcy5sYXVuY2hBZHZTZXR0aW5nc01vZGFsKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nc3VwcG9ydExpbmsnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpbmtDbGlja1V0aWxzLmNsaWNrQWN0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuZmx1eCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVmYXVsdF9wcmludF9tb2Rlc19saW5rX2NsaWNrZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVybENvbnN0LmRlZmF1bHRQcmludE1vZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMuaTE4bignbWI6cHJpbnRNb2Rlcy50aXRsZScpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SXN2ZyBjbGFzc05hbWU9J2hlbHBlckxpbmtJY29uJyBzcmM9J2ljb25zL2hlbHBmdWwtbGluay13aGl0ZS5zdmcnIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsQ2xhc3M6IGlzU2l4dGhHZW4gPyAndzgwMCcgOiAndzY1MCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICB7bW9kZX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXJDdXN0b21TZXR0aW5nc0J1dHRvbiA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICBpZD0nYWRkLWN1c3RvbS1wcmludC1zZXR0aW5nJ1xyXG4gICAgICAgICAgICAgICAgdHlwZT0nc2Vjb25kYXJ5J1xyXG4gICAgICAgICAgICAgICAgbGFiZWw9J0N1c3RvbSBTZXR0aW5ncydcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMubGF1bmNoQWR2U2V0dGluZ3NNb2RhbCgpfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlclJlc2V0RHJvcGRvd24gPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPEJ1dHRvbldpdGhEcm9wZG93blxyXG4gICAgICAgICAgICAgICAgaTE4bj17dGhpcy5faTE4bn1cclxuICAgICAgICAgICAgICAgIGZsdXg9e3RoaXMucHJvcHMuZmx1eH1cclxuICAgICAgICAgICAgICAgIGlkPSdyZXNldFNldHRpbmdzQnV0dG9uJ1xyXG4gICAgICAgICAgICAgICAgY2xhc3Nlcz0nc2Vjb25kYXJ5MSByZXNldFNldHRpbmdzQnV0dG9uJ1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25DbGFzc2VzPSdzZWNvbmRhcnkxJ1xyXG4gICAgICAgICAgICAgICAgbGFiZWw9e3RoaXMuX2kxOG4udCgnbWI6cHJpbnRTZXR0aW5ncy5yaWdodF9jbGljay5yZXNldF9hbGxfdG9fZGVmYXVsdCcpfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5fYWN0aW9ucy5yZXNldEFsbFRvRGVmYXVsdCgpfVxyXG4gICAgICAgICAgICAgICAgbWVudUl0ZW1zPXtbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiAncmVtb3ZlQWxsU2V0dGluZ3MnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludFNldHRpbmdzLnJpZ2h0X2NsaWNrLnJlbW92ZV9hbGxfc2V0dGluZ3MnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB0aGlzLl9hY3Rpb25zLnJlbW92ZUFsbFNldHRpbmdzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIF19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGkxOG4gPSB0aGlzLnByb3BzLmkxOG47XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uSW5mbyA9IHRoaXMucHJvcHMuc2VsZWN0aW9uSW5mbztcclxuICAgICAgICBjb25zdCBleHRydWRlckNvdW50ID0gdGhpcy5zdGF0ZS5leHRydWRlcnMuc3VwcG9ydGVkLmxlbmd0aDtcclxuICAgICAgICBjb25zdCByZW5kZXJFeHRydWRlciA9IChleHRydWRlckNvdW50IHx8IDApID49IDE7XHJcblxyXG4gICAgICAgIGlmICghc2VsZWN0aW9uSW5mbyB8fCBzZWxlY3Rpb25JbmZvLmFjdGl2ZVRyYXlPY2N1cnJlbmNlSWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiB7Li4uUi5tZXJnZSh0aGlzLnByb3BzLCB7IGNsYXNzTmFtZTogYCR7dGhpcy5wcm9wcy5jbGFzc05hbWUgfHwgJyd9IHNlY3Rpb25gIH0pfT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHsuLi5SLm1lcmdlKHRoaXMucHJvcHMsIHsgY2xhc3NOYW1lOiBgZXJyb3JNZXNzYWdlYCB9KX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtpMThuKCdtYjpwcmludFNldHRpbmdzLm5vTW9kZWxQcmVzZW50Jyl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChSLmtleXModGhpcy5zdGF0ZS5zZXR0aW5ncykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IHsuLi5SLm1lcmdlKHRoaXMucHJvcHMsIHsgY2xhc3NOYW1lOiBgJHt0aGlzLnByb3BzLmNsYXNzTmFtZSB8fCAnJ30gc2VjdGlvbmAgfSl9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgey4uLlIubWVyZ2UodGhpcy5wcm9wcywgeyBjbGFzc05hbWU6IGBlcnJvck1lc3NhZ2VgIH0pfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2kxOG4oJ21iOnByaW50U2V0dGluZ3MubG9hZGluZ1NldHRpbmdzJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHt0aGlzLnByb3BzLmNsYXNzTmFtZSB8fCAnJ30gc2VjdGlvbiBwYWRkaW5nLXNpZGVzLTIwYH0+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5leHRydWRlcnMgJiYgcmVuZGVyRXh0cnVkZXIgPyB0aGlzLnJlbmRlckV4dHJ1ZGVyVHlwZXNWaWV3KCkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUucHJpbnRNb2RlID8gdGhpcy5yZW5kZXJQcmludE1vZGVWaWV3KCkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAge3RoaXMuYWR2YW5jZWRTZXR0aW5ncygpfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2N1c3RvbS1idG4tZGl2Jz57dGhpcy5yZW5kZXJDdXN0b21TZXR0aW5nc0J1dHRvbigpfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3Jlc2V0LWJ0bi1kaXYnPnt0aGlzLnJlbmRlclJlc2V0RHJvcGRvd24oKX08L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcbn1cclxuXHJcblByaW50U2V0dGluZ3NQYW5lbC5kaXNwbGF5TmFtZSA9ICdQcmludFNldHRpbmdzUGFuZWwnO1xyXG5QcmludFNldHRpbmdzUGFuZWwucHJvcFR5cGVzID0gUi5tZXJnZShGbHV4Q29tcG9uZW50LnByb3BUeXBlcywge1xyXG4gICAgZmx1eDogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgaTE4bjogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIHByaW50ZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIHByb2plY3Q6IFJlYWN0LlByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICAgICAgZ2V0T2NjdXJyZW5jZXM6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICAgICAgZ2V0Um9vdE9jY3VycmVuY2VzOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgfSkuaXNSZXF1aXJlZCxcclxuICAgIHRyYXk6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIHNlbGVjdGlvbkluZm86IFByb3BUeXBlcy5zZWxlY3Rpb25JbmZvLCAvLyBvcHRpb25hbCBzZWxlY3Rpb25zXHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcmludFNldHRpbmdzUGFuZWw7XHJcbiJdfQ==
