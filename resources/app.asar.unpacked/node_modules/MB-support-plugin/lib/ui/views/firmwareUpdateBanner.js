'use strict';

const React = require('react');

const FluxComponent = require('eagle-print/views/flux_component');

const Button = require('eagle-print/views/ui/button.js');

const Isvg = require('react-inlinesvg');

const firmwareUtils = require('../../firmwareUtils');

class FirmwareUpdateBanner extends FluxComponent {
  /** @constructor **/
  constructor(props) {
    super(props);
    this.i18n = this.getFlux().getService('TranslationService');
    this.tracking = this.getFlux().getService('TrackingService');
    Object.assign(this.state, {
      show: this.props.printer.firmware && this.props.printer.firmware.hasUpdate() && !this.props.printer.firmware.updateInitiated
    });
  }

  componentDidMount() {
    if (this.props.printer.firmware) {
      this.props.printer.firmware.listen(this._handleNotif.bind(this));

      this._handleNotif();
    }
  }

  componentWillUnmount() {
    if (this.props.printer.firmware) {
      this.props.printer.firmware.remove(this._handleNotif.bind(this));
    }
  }
  /**
   * Updates the printer with either the latest version the printer knows about, or with
   * a custom firmware file that the user chooses.
   */


  _handleUpdate() {
    const flux = this.getFlux();
    firmwareUtils.updateFirmware(this.props.printer, flux);
    this.tracking.addEvent({
      name: 'firmware_update_initialized'
    });
    this.setState({
      show: false
    });
    this.props.onBack();
  }

  _handleClose() {
    this.setState({
      show: false
    });
  }

  _handleNotif() {
    this.setState({
      show: this.props.printer.firmware.hasUpdate()
    });
  }

  renderUpdate() {
    return /*#__PURE__*/React.createElement("div", {
      className: "message-list",
      style: styles.container
    }, /*#__PURE__*/React.createElement("div", {
      className: "progress-message-block warning",
      style: styles.banner
    }, /*#__PURE__*/React.createElement("label", {
      style: {
        marginLeft: 13,
        marginTop: 2
      }
    }, this.i18n.t('mb:firmware.available')), /*#__PURE__*/React.createElement(Button, {
      style: {
        marginLeft: 38,
        padding: '7 17'
      },
      type: "warning",
      onClick: () => this._handleUpdate(),
      ref: "updateButton"
    }, /*#__PURE__*/React.createElement("span", null, this.i18n.t('mb:firmware.update'))), /*#__PURE__*/React.createElement("div", {
      className: "closeButton closePanel",
      style: {
        marginRight: 4
      },
      onClick: this._handleClose.bind(this),
      ref: "close"
    }, /*#__PURE__*/React.createElement(Isvg, {
      src: "icons/x-button.svg"
    }))));
  }

  render() {
    if (this.props.printer.firmware && this.state.show && !this.props.printer.firmware.updateInitiated) {
      return this.renderUpdate();
    }

    return /*#__PURE__*/React.createElement("div", null);
  }

}

FirmwareUpdateBanner.propTypes = Object.assign({}, FluxComponent.propTypes, {
  printer: React.PropTypes.object.isRequired,
  onBack: React.PropTypes.func
});
FirmwareUpdateBanner.defaultProps = {
  onBack: () => {}
};
const styles = {
  container: {
    position: 'absolute',
    top: 0,
    left: 0,
    right: 0
  },
  banner: {
    padding: 10,
    display: 'flex',
    alignItems: 'center',
    justifyContent: 'space-between'
  }
};
FirmwareUpdateBanner.displayName = 'FirmwareUpdateBanner';
module.exports = FirmwareUpdateBanner;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpcm13YXJlVXBkYXRlQmFubmVyLmpzIl0sIm5hbWVzIjpbIlJlYWN0IiwicmVxdWlyZSIsIkZsdXhDb21wb25lbnQiLCJCdXR0b24iLCJJc3ZnIiwiZmlybXdhcmVVdGlscyIsIkZpcm13YXJlVXBkYXRlQmFubmVyIiwiY29uc3RydWN0b3IiLCJwcm9wcyIsImkxOG4iLCJnZXRGbHV4IiwiZ2V0U2VydmljZSIsInRyYWNraW5nIiwiT2JqZWN0IiwiYXNzaWduIiwic3RhdGUiLCJzaG93IiwicHJpbnRlciIsImZpcm13YXJlIiwiaGFzVXBkYXRlIiwidXBkYXRlSW5pdGlhdGVkIiwiY29tcG9uZW50RGlkTW91bnQiLCJsaXN0ZW4iLCJfaGFuZGxlTm90aWYiLCJiaW5kIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJyZW1vdmUiLCJfaGFuZGxlVXBkYXRlIiwiZmx1eCIsInVwZGF0ZUZpcm13YXJlIiwiYWRkRXZlbnQiLCJuYW1lIiwic2V0U3RhdGUiLCJvbkJhY2siLCJfaGFuZGxlQ2xvc2UiLCJyZW5kZXJVcGRhdGUiLCJzdHlsZXMiLCJjb250YWluZXIiLCJiYW5uZXIiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwidCIsInBhZGRpbmciLCJtYXJnaW5SaWdodCIsInJlbmRlciIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJmdW5jIiwiZGVmYXVsdFByb3BzIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiZGlzcGxheU5hbWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLE1BQU1DLGFBQWEsR0FBR0QsT0FBTyxDQUFDLGtDQUFELENBQTdCOztBQUNBLE1BQU1FLE1BQU0sR0FBR0YsT0FBTyxDQUFDLGdDQUFELENB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QUZnRCxDQUEzQyxDQUFqQztBQUtBM0Msb0JBQW9CLENBQUM0QyxZQUFyQixHQUFvQztBQUNoQ2pCLEVBQUFBLE1BQU0sRUFBRSxNQUFNLENBQUU7QUFEZ0IsQ0FBcEM7QUFJQSxNQUFNRyxNQUFNLEdBQUc7QUFDWEMsRUFBQUEsU0FBUyxFQUFFO0FBQ1BjLElBQUFBLFFBQVEsRUFBRSxVQURIO0FBRVBDLElBQUFBLEdBQUcsRUFBRSxDQUZFO0FBR1BDLElBQUFBLElBQUksRUFBRSxDQUhDO0FBSVBDLElBQUFBLEtBQUssRUFBRTtBQUpBLEdBREE7QUFPWGhCLEVBQUFBLE1BQU0sRUFBRTtBQUNKSSxJQUFBQSxPQUFPLEVBQUUsRUFETDtBQUVKYSxJQUFBQSxPQUFPLEVBQUUsTUFGTDtBQUdKQyxJQUFBQSxVQUFVLEVBQUUsUUFIUjtBQUlKQyxJQUFBQSxjQUFjLEVBQUU7QUFKWjtBQVBHLENBQWY7QUFlQW5ELG9CQUFvQixDQUFDb0QsV0FBckIsR0FBbUMsc0JBQW5DO0FBQ0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQnRELG9CQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuY29uc3QgRmx1eENvbXBvbmVudCA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL2ZsdXhfY29tcG9uZW50Jyk7XHJcbmNvbnN0IEJ1dHRvbiA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL3VpL2J1dHRvbi5qcycpO1xyXG5jb25zdCBJc3ZnID0gcmVxdWlyZSgncmVhY3QtaW5saW5lc3ZnJyk7XHJcblxyXG5jb25zdCBmaXJtd2FyZVV0aWxzID0gcmVxdWlyZSgnLi4vLi4vZmlybXdhcmVVdGlscycpO1xyXG5cclxuY2xhc3MgRmlybXdhcmVVcGRhdGVCYW5uZXIgZXh0ZW5kcyBGbHV4Q29tcG9uZW50IHtcclxuICAgIC8qKiBAY29uc3RydWN0b3IgKiovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5pMThuID0gdGhpcy5nZXRGbHV4KCkuZ2V0U2VydmljZSgnVHJhbnNsYXRpb25TZXJ2aWNlJyk7XHJcbiAgICAgICAgdGhpcy50cmFja2luZyA9IHRoaXMuZ2V0Rmx1eCgpLmdldFNlcnZpY2UoJ1RyYWNraW5nU2VydmljZScpO1xyXG5cclxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuc3RhdGUsIHtcclxuICAgICAgICAgICAgc2hvdzpcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucHJpbnRlci5maXJtd2FyZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5wcmludGVyLmZpcm13YXJlLmhhc1VwZGF0ZSgpICYmXHJcbiAgICAgICAgICAgICAgICAhdGhpcy5wcm9wcy5wcmludGVyLmZpcm13YXJlLnVwZGF0ZUluaXRpYXRlZCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5wcmludGVyLmZpcm13YXJlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucHJpbnRlci5maXJtd2FyZS5saXN0ZW4odGhpcy5faGFuZGxlTm90aWYuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZU5vdGlmKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnByaW50ZXIuZmlybXdhcmUpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wcmludGVyLmZpcm13YXJlLnJlbW92ZSh0aGlzLl9oYW5kbGVOb3RpZi5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBwcmludGVyIHdpdGggZWl0aGVyIHRoZSBsYXRlc3QgdmVyc2lvbiB0aGUgcHJpbnRlciBrbm93cyBhYm91dCwgb3Igd2l0aFxyXG4gICAgICogYSBjdXN0b20gZmlybXdhcmUgZmlsZSB0aGF0IHRoZSB1c2VyIGNob29zZXMuXHJcbiAgICAgKi9cclxuICAgIF9oYW5kbGVVcGRhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgZmx1eCA9IHRoaXMuZ2V0Rmx1eCgpO1xyXG5cclxuICAgICAgICBmaXJtd2FyZVV0aWxzLnVwZGF0ZUZpcm13YXJlKHRoaXMucHJvcHMucHJpbnRlciwgZmx1eCk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhY2tpbmcuYWRkRXZlbnQoeyBuYW1lOiAnZmlybXdhcmVfdXBkYXRlX2luaXRpYWxpemVkJyB9KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvdzogZmFsc2UgfSk7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5vbkJhY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNob3c6IGZhbHNlIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVOb3RpZigpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2hvdzogdGhpcy5wcm9wcy5wcmludGVyLmZpcm13YXJlLmhhc1VwZGF0ZSgpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclVwZGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVzc2FnZS1saXN0JyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJvZ3Jlc3MtbWVzc2FnZS1ibG9jayB3YXJuaW5nJyBzdHlsZT17c3R5bGVzLmJhbm5lcn0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IG1hcmdpbkxlZnQ6IDEzLCBtYXJnaW5Ub3A6IDIgfX0+e3RoaXMuaTE4bi50KCdtYjpmaXJtd2FyZS5hdmFpbGFibGUnKX08L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luTGVmdDogMzgsIHBhZGRpbmc6ICc3IDE3JyB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlPSd3YXJuaW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLl9oYW5kbGVVcGRhdGUoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSd1cGRhdGVCdXR0b24nXHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj57dGhpcy5pMThuLnQoJ21iOmZpcm13YXJlLnVwZGF0ZScpfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0nY2xvc2VCdXR0b24gY2xvc2VQYW5lbCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luUmlnaHQ6IDQgfX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5faGFuZGxlQ2xvc2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdjbG9zZSdcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJc3ZnIHNyYz0naWNvbnMveC1idXR0b24uc3ZnJyAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnByaW50ZXIuZmlybXdhcmUgJiYgdGhpcy5zdGF0ZS5zaG93ICYmICF0aGlzLnByb3BzLnByaW50ZXIuZmlybXdhcmUudXBkYXRlSW5pdGlhdGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIDxkaXYgLz47XHJcbiAgICB9XHJcbn1cclxuXHJcbkZpcm13YXJlVXBkYXRlQmFubmVyLnByb3BUeXBlcyA9IE9iamVjdC5hc3NpZ24oe30sIEZsdXhDb21wb25lbnQucHJvcFR5cGVzLCB7XHJcbiAgICBwcmludGVyOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICBvbkJhY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG59KTtcclxuXHJcbkZpcm13YXJlVXBkYXRlQmFubmVyLmRlZmF1bHRQcm9wcyA9IHtcclxuICAgIG9uQmFjazogKCkgPT4ge30sXHJcbn07XHJcblxyXG5jb25zdCBzdHlsZXMgPSB7XHJcbiAgICBjb250YWluZXI6IHtcclxuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgbGVmdDogMCxcclxuICAgICAgICByaWdodDogMCxcclxuICAgIH0sXHJcbiAgICBiYW5uZXI6IHtcclxuICAgICAgICBwYWRkaW5nOiAxMCxcclxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXHJcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcclxuICAgIH0sXHJcbn07XHJcblxyXG5GaXJtd2FyZVVwZGF0ZUJhbm5lci5kaXNwbGF5TmFtZSA9ICdGaXJtd2FyZVVwZGF0ZUJhbm5lcic7XHJcbm1vZHVsZS5leHBvcnRzID0gRmlybXdhcmVVcGRhdGVCYW5uZXI7XHJcbiJdfQ==
