'use strict';

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

const React = require('react');

const FluxComponent = require('eagle-print/views/flux_component');

const _ = require('lodash');

const path = require('path');

const UtilityTabSet = require('./utilityTabSet');

const UtilityTab = require('./utilityTab');

const ZCal = require('./zcal');

const ZOffset = require('./zOffset');

const PrinterStateEnum = require('../../../constants').PrinterStateEnum;

const PanelState = Object.freeze({
  Default: 'default',
  ZCal: 'zcal',
  ZOffset: 'zoffset'
});

class Calibration extends FluxComponent {
  constructor(props, context) {
    super(props, context);

    _.assign(this.state, {
      canCalibrate: false
    });
  }

  componentDidMount() {
    this.props.printer.invoke('HasZCalibrationRoutine').then(res => {
      this.setState({
        canCalibrate: res === true
      });
    });
  }

  _renderZCalComponent(i18n, selectedPrinter) {
    return /*#__PURE__*/React.createElement(UtilityTab, _extends({}, this.props, {
      tabKey: PanelState.ZCal,
      tabName: i18n.t('mb:utility.category.calibration.zcal'),
      tabIcon: path.resolve(__dirname, '../images/calibration-utilities-manual.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: status.state === PrinterStateEnum.Unauthenticated || !this.state.canCalibrate
    }), /*#__PURE__*/React.createElement(ZCal, _extends({}, this.props, {
      printer: selectedPrinter,
      onClose: this.props.onClose,
      onBack: () => this.panel.back(),
      onFinish: this.props.onFinish,
      flux: this.props.flux
    })));
  }

  _renderZOffset(i18n, selectedPrinter) {
    const status = selectedPrinter.getStatus() || {};
    return /*#__PURE__*/React.createElement(UtilityTab, _extends({}, this.props, {
      tabKey: PanelState.ZOffset,
      tabName: i18n.t('mb:utility.category.calibration.zoffset'),
      tabIcon: path.resolve(__dirname, '../images/calibration-utilities.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: status.state === PrinterStateEnum.Unauthenticated
    }), /*#__PURE__*/React.createElement(ZOffset, {
      printer: selectedPrinter,
      onClose: this.props.onClose,
      onBack: () => this.panel.back(),
      onFinish: this.props.onFinish,
      flux: this.props.flux
    }));
  }

  render() {
    const selectedPrinter = this.props.printer;
    const i18n = this.props.flux.getService('TranslationService');
    return /*#__PURE__*/React.createElement(UtilityTabSet, _extends({}, this.props, {
      title: i18n.t('mb:utility.category.calibration.header'),
      ref: c => this.panel = c,
      flux: this.props.flux,
      printer: this.props.printer,
      onBack: this.props.onBack
    }), /*#__PURE__*/React.createElement("div", {
      tabKey: "default"
    }), this._renderZCalComponent(i18n, selectedPrinter), this._renderZOffset(i18n, selectedPrinter));
  }

}

Calibration.displayName = 'Calibration';
Calibration.propTypes = {
  onBack: React.PropTypes.func,
  onClose: React.PropTypes.func,
  onFinish: React.PropTypes.func,
  printer: React.PropTypes.object.isRequired,
  flux: React.PropTypes.object.isRequired
};
Calibration.defaultProps = {
  onBack: () => {},
  onClose: () => {},
  onFinish: () => {}
};
module.exports = Calibration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhbGlicmF0aW9uLmpzIl0sIm5hbWVzIjpbIlJlYWN0IiwicmVxdWlyZSIsIkZsdXhDb21wb25lbnQiLCJfIiwicGF0aCIsIlV0aWxpdHlUYWJTZXQiLCJVdGlsaXR5VGFiIiwiWkNhbCIsIlpPZmZzZXQiLCJQcmludGVyU3RhdGVFbnVtIiwiUGFuZWxTdGF0ZSIsIk9iamVjdCIsImZyZWV6ZSIsIkRlZmF1bHQiLCJDYWxpYnJhdGlvbiIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJjb250ZXh0IiwiYXNzaWduIiwic3RhdGUiLCJjYW5DYWxpYnJhdGUiLCJjb21wb25lbnREaWRNb3VudCIsInByaW50ZXIiLCJpbnZva2UiLCJ0aGVuIiwicmVzIiwic2V0U3RhdGUiLCJfcmVuZGVyWkNhbENvbXBvbmVudCIsImkxOG4iLCJzZWxlY3RlZFByaW50ZXIiLCJ0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInRhYiIsInBhbmVsIiwic2VsZWN0Iiwic3RhdHVzIiwiVW5hdXRoZW50aWNhdGVkIiwib25DbG9zZSIsImJhY2siLCJvbkZpbmlzaCIsImZsdXgiLCJfcmVuZGVyWk9mZnNldCIsImdldFN0YXR1cyIsInJlbmRlciIsImdldFNlcnZpY2UiLCJjIiwib25CYWNrIiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJmdW5jIiwib2JqZWN0IiwiaXNSZXF1aXJlZCIsImRlZmF1bHRQcm9wcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxNQUFNQyxhQUFhLEdBQUdELE9BQU8sQ0FBQyxrQ0FBRCxDQUE3Qjs7QUFDQSxNQUFNRSxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxRQUFELENBQWpCOztBQUNBLE1BQU1HLElBQUksR0FBR0gsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBRUEsTUFBTUksYUFBYSxHQUFHSixPQUFPLENBQUMsaUJB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QTFCO0FBQ0FsQyxXQUFXLENBQUNtQyxTQUFaLEdBQXdCO0FBQ3BCRixFQUFBQSxNQUFNLEVBQUUvQyxLQUFLLENBQUNrRCxTQUFOLENBQWdCQyxJQURKO0FBRXBCYixFQUFBQSxPQUFPLEVBQUV0QyxLQUFLLENBQUNrRCxTQUFOLENBQWdCQyxJQUZMO0FBR3BCWCxFQUFBQSxRQUFRLEVBQUV4QyxLQUFLLENBQUNrRCxTQUFOLENBQWdCQyxJQUhOO0FBSXBCN0IsRUFBQUEsT0FBTyxFQUFFdEIsS0FBSyxDQUFDa0QsU0FBTixDQUFnQkUsTUFBaEIsQ0FBdUJDLFVBSlo7QUFLcEJaLEVBQUFBLElBQUksRUFBRXpDLEtBQUssQ0FBQ2tELFNBQU4sQ0FBZ0JFLE1BQWhCLENBQXVCQztBQUxULENBQXhCO0FBUUF2QyxXQUFXLENBQUN3QyxZQUFaLEdBQTJCO0FBQ3ZCUCxFQUFBQSxNQUFNLEVBQUUsTUFBTSxDQUFFLENBRE87QUFFdkJULEVBQUFBLE9BQU8sRUFBRSxNQUFNLENBQUUsQ0FGTTtBQUd2QkUsRUFBQUEsUUFBUSxFQUFFLE1BQU0sQ0FBRTtBQUhLLENBQTNCO0FBTUFlLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjFDLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5jb25zdCBGbHV4Q29tcG9uZW50ID0gcmVxdWlyZSgnZWFnbGUtcHJpbnQvdmlld3MvZmx1eF9jb21wb25lbnQnKTtcclxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5cclxuY29uc3QgVXRpbGl0eVRhYlNldCA9IHJlcXVpcmUoJy4vdXRpbGl0eVRhYlNldCcpO1xyXG5jb25zdCBVdGlsaXR5VGFiID0gcmVxdWlyZSgnLi91dGlsaXR5VGFiJyk7XHJcbmNvbnN0IFpDYWwgPSByZXF1aXJlKCcuL3pjYWwnKTtcclxuY29uc3QgWk9mZnNldCA9IHJlcXVpcmUoJy4vek9mZnNldCcpO1xyXG5jb25zdCBQcmludGVyU3RhdGVFbnVtID0gcmVxdWlyZSgnLi4vLi4vLi4vY29uc3RhbnRzJykuUHJpbnRlclN0YXRlRW51bTtcclxuXHJcbmNvbnN0IFBhbmVsU3RhdGUgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIERlZmF1bHQ6ICdkZWZhdWx0JyxcclxuICAgIFpDYWw6ICd6Y2FsJyxcclxuICAgIFpPZmZzZXQ6ICd6b2Zmc2V0JyxcclxufSk7XHJcblxyXG5jbGFzcyBDYWxpYnJhdGlvbiBleHRlbmRzIEZsdXhDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XHJcbiAgICAgICAgXy5hc3NpZ24odGhpcy5zdGF0ZSwge1xyXG4gICAgICAgICAgICBjYW5DYWxpYnJhdGU6IGZhbHNlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMucHJvcHMucHJpbnRlci5pbnZva2UoJ0hhc1pDYWxpYnJhdGlvblJvdXRpbmUnKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjYW5DYWxpYnJhdGU6IHJlcyA9PT0gdHJ1ZSB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfcmVuZGVyWkNhbENvbXBvbmVudChpMThuLCBzZWxlY3RlZFByaW50ZXIpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8VXRpbGl0eVRhYlxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICB0YWJLZXk9e1BhbmVsU3RhdGUuWkNhbH1cclxuICAgICAgICAgICAgICAgIHRhYk5hbWU9e2kxOG4udCgnbWI6dXRpbGl0eS5jYXRlZ29yeS5jYWxpYnJhdGlvbi56Y2FsJyl9XHJcbiAgICAgICAgICAgICAgICB0YWJJY29uPXtwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vaW1hZ2VzL2NhbGlicmF0aW9uLXV0aWxpdGllcy1tYW51YWwuc3ZnJyl9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXt0YWIgPT4gdGhpcy5wYW5lbC5zZWxlY3QodGFiKX1cclxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzdGF0dXMuc3RhdGUgPT09IFByaW50ZXJTdGF0ZUVudW0uVW5hdXRoZW50aWNhdGVkIHx8ICF0aGlzLnN0YXRlLmNhbkNhbGlicmF0ZX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFpDYWxcclxuICAgICAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgICAgICAgICBwcmludGVyPXtzZWxlY3RlZFByaW50ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17dGhpcy5wcm9wcy5vbkNsb3NlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQmFjaz17KCkgPT4gdGhpcy5wYW5lbC5iYWNrKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25GaW5pc2g9e3RoaXMucHJvcHMub25GaW5pc2h9XHJcbiAgICAgICAgICAgICAgICAgICAgZmx1eD17dGhpcy5wcm9wcy5mbHV4fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9VdGlsaXR5VGFiPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JlbmRlclpPZmZzZXQoaTE4biwgc2VsZWN0ZWRQcmludGVyKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gc2VsZWN0ZWRQcmludGVyLmdldFN0YXR1cygpIHx8IHt9O1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxVdGlsaXR5VGFiXHJcbiAgICAgICAgICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgICAgICAgICAgIHRhYktleT17UGFuZWxTdGF0ZS5aT2Zmc2V0fVxyXG4gICAgICAgICAgICAgICAgdGFiTmFtZT17aTE4bi50KCdtYjp1dGlsaXR5LmNhdGVnb3J5LmNhbGlicmF0aW9uLnpvZmZzZXQnKX1cclxuICAgICAgICAgICAgICAgIHRhYkljb249e3BhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9pbWFnZXMvY2FsaWJyYXRpb24tdXRpbGl0aWVzLnN2ZycpfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGFiID0+IHRoaXMucGFuZWwuc2VsZWN0KHRhYil9XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17c3RhdHVzLnN0YXRlID09PSBQcmludGVyU3RhdGVFbnVtLlVuYXV0aGVudGljYXRlZH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPFpPZmZzZXRcclxuICAgICAgICAgICAgICAgICAgICBwcmludGVyPXtzZWxlY3RlZFByaW50ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17dGhpcy5wcm9wcy5vbkNsb3NlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQmFjaz17KCkgPT4gdGhpcy5wYW5lbC5iYWNrKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgb25GaW5pc2g9e3RoaXMucHJvcHMub25GaW5pc2h9XHJcbiAgICAgICAgICAgICAgICAgICAgZmx1eD17dGhpcy5wcm9wcy5mbHV4fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9VdGlsaXR5VGFiPlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkUHJpbnRlciA9IHRoaXMucHJvcHMucHJpbnRlcjtcclxuICAgICAgICBjb25zdCBpMThuID0gdGhpcy5wcm9wcy5mbHV4LmdldFNlcnZpY2UoJ1RyYW5zbGF0aW9uU2VydmljZScpO1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8VXRpbGl0eVRhYlNldFxyXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17aTE4bi50KCdtYjp1dGlsaXR5LmNhdGVnb3J5LmNhbGlicmF0aW9uLmhlYWRlcicpfVxyXG4gICAgICAgICAgICAgICAgcmVmPXtjID0+ICh0aGlzLnBhbmVsID0gYyl9XHJcbiAgICAgICAgICAgICAgICBmbHV4PXt0aGlzLnByb3BzLmZsdXh9XHJcbiAgICAgICAgICAgICAgICBwcmludGVyPXt0aGlzLnByb3BzLnByaW50ZXJ9XHJcbiAgICAgICAgICAgICAgICBvbkJhY2s9e3RoaXMucHJvcHMub25CYWNrfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHRhYktleT0nZGVmYXVsdCcgLz5cclxuICAgICAgICAgICAgICAgIHt0aGlzLl9yZW5kZXJaQ2FsQ29tcG9uZW50KGkxOG4sIHNlbGVjdGVkUHJpbnRlcil9XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5fcmVuZGVyWk9mZnNldChpMThuLCBzZWxlY3RlZFByaW50ZXIpfVxyXG4gICAgICAgICAgICA8L1V0aWxpdHlUYWJTZXQ+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuQ2FsaWJyYXRpb24uZGlzcGxheU5hbWUgPSAnQ2FsaWJyYXRpb24nO1xyXG5DYWxpYnJhdGlvbi5wcm9wVHlwZXMgPSB7XHJcbiAgICBvbkJhY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgb25DbG9zZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICBvbkZpbmlzaDogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXHJcbiAgICBwcmludGVyOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICBmbHV4OiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbn07XHJcblxyXG5DYWxpYnJhdGlvbi5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBvbkJhY2s6ICgpID0+IHt9LFxyXG4gICAgb25DbG9zZTogKCkgPT4ge30sXHJcbiAgICBvbkZpbmlzaDogKCkgPT4ge30sXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENhbGlicmF0aW9uO1xyXG4iXX0=
