'use strict';

const React = require('react');

const DOM = React.DOM;

const path = require('path');

const PrinterUtilityHeader = React.createClass({
  displayName: "PrinterUtilityHeader",
  propTypes: {
    printer: React.PropTypes.object.isRequired
  },

  getInitialState() {
    return {
      printerName: this.props.printer.getName()
    };
  },

  onPrinterNameChange(event) {
    this.setState({
      printerName: event.target.value
    });
  },

  onKeyPress(event) {
    // On Enter (charCode 13) change printer name
    if (event.charCode === 13) {
      this.props.printer.invoke('ChangeMachineName', [event.target.value]);
    }
  },

  onNameBlur(event) {},

  displayPrinterModel(printer) {
    return printer.getInfo().model;
  },

  displayFwVersion(i18n, printer) {
    const fwVersion = printer.getInfo().firmware_version;
    return `${i18n.t('mb:utility.header.firmware')} ${fwVersion}`;
  },

  displayIpAddresss(i18n, printer) {
    const ipaddress = printer.getIpAddress();

    if (ipaddress) {
      return `${i18n.t('mb:utility.header.ip')} ${ipaddress}`;
    } else {
      return i18n.t('mb:utility.header.null_ip');
    }
  },

  printerSummary(event) {
    const i18n = this.props.flux.getService('TranslationService');
    const printer = this.props.printer;
    return DOM.div({
      className: 'utilityHeaderContainer'
    }, DOM.input({
      className: 'nameInput truncate',
      onChange: this.onPrinterNameChange,
      onKeyPress: this.onKeyPress,
      onBlur: this.onNameBlur,
      disabled: true,
      // Enable when ready for primte time
      value: this.state.printerName
    }), DOM.h6({}, this.displayPrinterModel(printer)), DOM.h6({
      style: {
        margin: '20px 0 0 0'
      }
    }, this.displayFwVersion(i18n, printer)), DOM.h6({}, this.displayIpAddresss(i18n, printer)));
  },

  render() {
    const self = this;
    const background = path.resolve(__dirname, `../images/utility_${this.props.printer.getGender().botType}.png`);
    return DOM.div({
      className: 'utilityHeader'
    }, DOM.img({
      src: background
    }), self.printerSummary());
  }

});
module.exports = PrinterUtilityHeader;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxpdHlIZWFkZXIuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJyZXF1aXJlIiwiRE9NIiwicGF0aCIsIlByaW50ZXJVdGlsaXR5SGVhZGVyIiwiY3JlYXRlQ2xhc3MiLCJwcm9wVHlwZXMiLCJwcmludGVyIiwiUHJvcFR5cGVzIiwib2JqZWN0IiwiaXNSZXF1aXJlZCIsImdldEluaXRpYWxTdGF0ZSIsInByaW50ZXJOYW1lIiwicHJvcHMiLCJnZXROYW1lIiwib25QcmludGVyTmFtZUNoYW5nZSIsImV2ZW50Iiwic2V0U3RhdGUiLCJ0YXJnZXQiLCJ2YWx1ZSIsIm9uS2V5UHJlc3MiLCJjaGFyQ29kZSIsImludm9rZSIsIm9uTmFtZUJsdXIiLCJkaXNwbGF5UHJpbnRlck1vZGVsIiwiZ2V0SW5mbyIsIm1vZGVsIiwiZGlzcGxheUZ3VmVyc2lvbiIsImkxOG4iLCJmd1ZlcnNpb24iLCJmaXJtd2FyZV92ZXJzaW9uIiwidCIsImRpc3BsYXlJcEFkZHJlc3NzIiwiaXBhZGRyZXNzIiwiZ2V0SXBBZGRyZXNzIiwicHJpbnRlclN1bW1hcnkiLCJmbHV4IiwiZ2V0U2VydmljZSIsImRpdiIsImNsYXNzTmFtZSIsImlucHV0Iiwib25DaGFuZ2UiLCJvbkJsdXIiLCJkaXNhYmxlZCIsInN0YXRlIiwiaDYiLCJzdHlsZSIsIm1hcmdpbiIsInJlbmRlciIsInNlbGYiLCJiYWNrZ3JvdW5kIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsImdldEdlbmRlciIsImJvdFR5cGUiLCJpbWciLCJzcmMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLE1BQU1DLEdBQUcsR0FBR0YsS0FBSyxDQUFDRSxHQUFsQjs7QUFDQSxNQUFNQyxJQUFJLEdBQUdGLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUVBLE1BQU1HLG9CQUFvQixHQUFHSixLQUFLLENBQUNLLFdBQU4sQ0FBa0I7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QixPQUE1QixDQUE1QyxDQVhHLEVBWUhMLEdBQUcsQ0FBQzJDLEVBQUosQ0FBTyxFQUFQLEVBQVcsS0FBS2IsaUJBQUwsQ0FBdUJKLElBQXZCLEVBQTZCckIsT0FBN0IsQ0FBWCxDQVpHLENBQVA7QUFjSCxHQXpEMEM7O0FBMkQzQ3lDLEVBQUFBLE1BQU0sR0FBRztBQUNMLFVBQU1DLElBQUksR0FBRyxJQUFiO0FBQ0EsVUFBTUMsVUFBVSxHQUFHL0MsSUFBSSxDQUFDZ0QsT0FBTCxDQUFhQyxTQUFiLEVBQXlCLHFCQUFvQixLQUFLdkMsS0FBTCxDQUFXTixPQUFYLENBQW1COEMsU0FBbkIsR0FBK0JDLE9BQVEsTUFBcEYsQ0FBbkI7QUFDQSxXQUFPcEQsR0FBRyxDQUFDb0MsR0FBSixDQUNIO0FBQUVDLE1BQUFBLFNBQVMsRUFBRTtBQUFiLEtBREcsRUFFSHJDLEdBQUcsQ0FBQ3FELEdBQUosQ0FBUTtBQUNKQyxNQUFBQSxHQUFHLEVBQUVOO0FBREQsS0FBUixDQUZHLEVBS0hELElBQUksQ0FBQ2QsY0FBTCxFQUxHLENBQVA7QUFPSDs7QUFyRTBDLENBQWxCLENBQTdCO0FBd0VBc0IsTUFBTSxDQUFDQyxPQUFQLEdBQWlCdEQsb0JBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5jb25zdCBET00gPSBSZWFjdC5ET007XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcblxyXG5jb25zdCBQcmludGVyVXRpbGl0eUhlYWRlciA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuICAgIHByb3BUeXBlczoge1xyXG4gICAgICAgIHByaW50ZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0SW5pdGlhbFN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiB7IHByaW50ZXJOYW1lOiB0aGlzLnByb3BzLnByaW50ZXIuZ2V0TmFtZSgpIH07XHJcbiAgICB9LFxyXG5cclxuICAgIG9uUHJpbnRlck5hbWVDaGFuZ2UoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgcHJpbnRlck5hbWU6IGV2ZW50LnRhcmdldC52YWx1ZSB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgb25LZXlQcmVzcyhldmVudCkge1xyXG4gICAgICAgIC8vIE9uIEVudGVyIChjaGFyQ29kZSAxMykgY2hhbmdlIHByaW50ZXIgbmFtZVxyXG4gICAgICAgIGlmIChldmVudC5jaGFyQ29kZSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wcmludGVyLmludm9rZSgnQ2hhbmdlTWFjaGluZU5hbWUnLCBbZXZlbnQudGFyZ2V0LnZhbHVlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBvbk5hbWVCbHVyKGV2ZW50KSB7fSxcclxuXHJcbiAgICBkaXNwbGF5UHJpbnRlck1vZGVsKHByaW50ZXIpIHtcclxuICAgICAgICByZXR1cm4gcHJpbnRlci5nZXRJbmZvKCkubW9kZWw7XHJcbiAgICB9LFxyXG5cclxuICAgIGRpc3BsYXlGd1ZlcnNpb24oaTE4biwgcHJpbnRlcikge1xyXG4gICAgICAgIGNvbnN0IGZ3VmVyc2lvbiA9IHByaW50ZXIuZ2V0SW5mbygpLmZpcm13YXJlX3ZlcnNpb247XHJcbiAgICAgICAgcmV0dXJuIGAke2kxOG4udCgnbWI6dXRpbGl0eS5oZWFkZXIuZmlybXdhcmUnKX0gJHtmd1ZlcnNpb259YDtcclxuICAgIH0sXHJcblxyXG4gICAgZGlzcGxheUlwQWRkcmVzc3MoaTE4biwgcHJpbnRlcikge1xyXG4gICAgICAgIGNvbnN0IGlwYWRkcmVzcyA9IHByaW50ZXIuZ2V0SXBBZGRyZXNzKCk7XHJcbiAgICAgICAgaWYgKGlwYWRkcmVzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7aTE4bi50KCdtYjp1dGlsaXR5LmhlYWRlci5pcCcpfSAke2lwYWRkcmVzc31gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpMThuLnQoJ21iOnV0aWxpdHkuaGVhZGVyLm51bGxfaXAnKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHByaW50ZXJTdW1tYXJ5KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgaTE4biA9IHRoaXMucHJvcHMuZmx1eC5nZXRTZXJ2aWNlKCdUcmFuc2xhdGlvblNlcnZpY2UnKTtcclxuICAgICAgICBjb25zdCBwcmludGVyID0gdGhpcy5wcm9wcy5wcmludGVyO1xyXG4gICAgICAgIHJldHVybiBET00uZGl2KFxyXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3V0aWxpdHlIZWFkZXJDb250YWluZXInIH0sXHJcbiAgICAgICAgICAgIERPTS5pbnB1dCh7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduYW1lSW5wdXQgdHJ1bmNhdGUnLFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRoaXMub25QcmludGVyTmFtZUNoYW5nZSxcclxuICAgICAgICAgICAgICAgIG9uS2V5UHJlc3M6IHRoaXMub25LZXlQcmVzcyxcclxuICAgICAgICAgICAgICAgIG9uQmx1cjogdGhpcy5vbk5hbWVCbHVyLFxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsIC8vIEVuYWJsZSB3aGVuIHJlYWR5IGZvciBwcmltdGUgdGltZVxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUucHJpbnRlck5hbWUsXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBET00uaDYoe30sIHRoaXMuZGlzcGxheVByaW50ZXJNb2RlbChwcmludGVyKSksXHJcbiAgICAgICAgICAgIERPTS5oNih7IHN0eWxlOiB7IG1hcmdpbjogJzIwcHggMCAwIDAnIH0gfSwgdGhpcy5kaXNwbGF5RndWZXJzaW9uKGkxOG4sIHByaW50ZXIpKSxcclxuICAgICAgICAgICAgRE9NLmg2KHt9LCB0aGlzLmRpc3BsYXlJcEFkZHJlc3NzKGkxOG4sIHByaW50ZXIpKVxyXG4gICAgICAgICk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICBjb25zdCBiYWNrZ3JvdW5kID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgYC4uL2ltYWdlcy91dGlsaXR5XyR7dGhpcy5wcm9wcy5wcmludGVyLmdldEdlbmRlcigpLmJvdFR5cGV9LnBuZ2ApO1xyXG4gICAgICAgIHJldHVybiBET00uZGl2KFxyXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ3V0aWxpdHlIZWFkZXInIH0sXHJcbiAgICAgICAgICAgIERPTS5pbWcoe1xyXG4gICAgICAgICAgICAgICAgc3JjOiBiYWNrZ3JvdW5kLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgc2VsZi5wcmludGVyU3VtbWFyeSgpXHJcbiAgICAgICAgKTtcclxuICAgIH0sXHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcmludGVyVXRpbGl0eUhlYWRlcjtcclxuIl19
