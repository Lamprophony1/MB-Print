"use strict";

const React = require('react');

const DOM = React.DOM;
const ce = React.createElement;

const FluxComponent = require('eagle-print/views/flux_component');

const Checkbox = require('eagle-print/views/ui/input_checkbox');

const WaitableButton = require('../WaitableButton');

const Listbox = require('../input/listbox');

class StaticIP extends FluxComponent {
  constructor(props) {
    super(props);
    this._i18n = this.props.flux.getService('TranslationService');
    this._trackingService = this.props.flux.getService('TrackingService');
    this._loggingService = this.props.flux.getService('LoggingService');
    this._actions = this.props.flux.actions.NetworkPreferencesActions;
    this.state = {
      enableStaticIP: false
    };
  }

  handleStaticIPAddressChange(event) {
    this._actions.changeStaticIPAddress(event.target.value);
  }

  handleNetmaskChange(event) {
    this._actions.changeNetmask(event.target.value);
  }

  handleGatewayChange(event) {
    this._actions.changeGateway(event.target.value);
  }

  handleEnableStaticIPToggle() {
    if (this.state.enableStaticIP) {
      this.handleApplyStaticIP(false);

      this._trackingService.addEvent({
        name: 'Static IP Disabled'
      });
    } else {
      this._trackingService.addEvent({
        name: 'Static IP Enabled'
      });
    }

    this.setState({
      enableStaticIP: !this.state.enableStaticIP
    });
  }

  handleApplyStaticIP(enable = true) {
    const id = this.props.printer.getId();
    const dns = enable ? this.props.dnsServers.map(s => s.value) : [];

    this._actions.setStaticIP(id, this.props.path, this.props.editStaticIPAddress || this.props.staticIPAddress, this.props.editNetmask || this.props.netmask, this.props.editGateway || this.props.gateway, dns, enable);

    if (enable) this._trackingService.addEvent({
      name: 'Static IP Settings Applied'
    });
  }

  handleDNSAdd() {
    const items = this.props.dnsServers.concat({
      value: this.props.newDNSItem
    }).map(v => v.value);

    this._actions.changeDNSServers(items);
  }

  handleDNSRemove() {
    const items = this.props.dnsServers.reduce((acc, i) => !i.selected ? acc.concat(i.value) : acc, []);

    this._actions.changeDNSServers(items);
  }

  handleDNSSelect(val) {
    this._actions.selectDNSItem(val);
  }

  handleDNSChange(val) {
    this._actions.newDNSItem(val);
  }

  _label(text) {
    return DOM.div({
      style: {
        fontWeight: 'bold',
        marginTop: '0px'
      },
      className: 'header'
    }, text, ': ');
  }

  renderInputs() {
    return DOM.div({
      className: 'staticip'
    }, this._label(this._i18n.t('mb:network.staticIP.ip')), DOM.input({
      style: {
        margin: '5px 0'
      },
      className: 'input-text',
      type: 'text',
      disabled: !this.props.canEdit,
      value: this.props.editStaticIPAddress,
      placeholder: this.props.staticIPAddress,
      onChange: event => this.handleStaticIPAddressChange(event)
    }), this._label(this._i18n.t('mb:network.staticIP.netmask')), DOM.input({
      ref: 'netmask',
      style: {
        margin: '5px 0'
      },
      className: 'input-text',
      type: 'text',
      disabled: !this.props.canEdit,
      value: this.props.editNetmask,
      placeholder: this.props.netmask,
      onChange: event => this.handleNetmaskChange(event)
    }), this._label(this._i18n.t('mb:network.staticIP.gateway')), DOM.input({
      ref: 'gateway',
      style: {
        margin: '5px 0'
      },
      className: 'input-text',
      type: 'text',
      disabled: !this.props.canEdit,
      value: this.props.editGateway,
      placeholder: this.props.gateway,
      onChange: event => this.handleGatewayChange(event)
    }), this._label(this._i18n.t('mb:network.staticIP.dns')), Listbox({
      items: this.props.dnsServers,
      newItem: this.props.newDNSItem,
      placeholder: this._i18n.t('mb:network.staticIP.newPlaceholder'),
      onChange: this.handleDNSChange.bind(this),
      onAdd: this.handleDNSAdd.bind(this),
      onRemove: this.handleDNSRemove.bind(this),
      onSelect: this.handleDNSSelect.bind(this),
      disabled: !this.props.canEdit,
      emtpyLabel: this._i18n.t('mb:network.staticIP.emptyDNS')
    }), ce(WaitableButton, {
      waiting: this.props.waiting,
      buttonProps: {
        style: {
          margin: '12px 0',
          padding: '8px 12px'
        },
        type: 'primary',
        disabled: !this.props.staticIPEdited && !this.props.canEdit,
        className: 'network-button',
        label: this._i18n.t('mb:network.staticIP.apply'),
        onClick: () => this.handleApplyStaticIP()
      }
    }));
  }

  render() {
    return DOM.div({
      className: `panel-body${this.props.canEdit ? '' : ' view-disabled'}`
    }, DOM.div({
      style: {
        fontWeight: 'bold',
        marginTop: '0px'
      },
      className: 'header'
    }, this._i18n.t('mb:network.header.staticIP'), ': '), ce(Checkbox, {
      ref: 'enableStaticIPCheckbox',
      disabled: !this.props.canEdit,
      label: this._i18n.t('mb:network.checkbox.enableStaticIP'),
      labelClassNames: 'status-checkbox-label',
      onChange: () => this.handleEnableStaticIPToggle(),
      checked: this.props.enableStaticIP || this.state.enableStaticIP
    }), this.props.enableStaticIP || this.state.enableStaticIP ? this.renderInputs() : null);
  }

}

StaticIP.displayName = 'StaticIP';
StaticIP.propTypes = {
  flux: React.PropTypes.object.isRequired,
  printer: React.PropTypes.object.isRequired,
  waiting: React.PropTypes.bool.isRequired,
  path: React.PropTypes.string.isRequired,
  enableStaticIP: React.PropTypes.bool.isRequired,
  staticIPEdited: React.PropTypes.bool.isRequired,
  staticIPAddress: React.PropTypes.string.isRequired,
  netmask: React.PropTypes.string.isRequired,
  gateway: React.PropTypes.string.isRequired,
  dnsServers: React.PropTypes.arrayOf(React.PropTypes.string).isRequired,
  canEdit: React.PropTypes.bool.isRequired
};
module.exports = StaticIP;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN0YXRpY0lQLmpzIl0sIm5hbWVzIjpbIlJlYWN0IiwicmVxdWlyZSIsIkRPTSIsImNlIiwiY3JlYXRlRWxlbWVudCIsIkZsdXhDb21wb25lbnQiLCJDaGVja2JveCIsIldhaXRhYmxlQnV0dG9uIiwiTGlzdGJveCIsIlN0YXRpY0lQIiwiY29uc3RydWN0b3IiLCJwcm9wcyIsIl9pMThuIiwiZmx1eCIsImdldFNlcnZpY2UiLCJfdHJhY2tpbmdTZXJ2aWNlIiwiX2xvZ2dpbmdTZXJ2aWNlIiwiX2FjdGlvbnMiLCJhY3Rpb25zIiwiTmV0d29ya1ByZWZlcmVuY2VzQWN0aW9ucyIsInN0YXRlIiwiZW5hYmxlU3RhdGljSVAiLCJoYW5kbGVTdGF0aWNJUEFkZHJlc3NDaGFuZ2UiLCJldmVudCIsImNoYW5nZVN0YXRpY0lQQWRkcmVzcyIsInRhcmdldCIsInZhbHVlIiwiaGFuZGxlTmV0bWFza0NoYW5nZSIsImNoYW5nZU5ldG1hc2siLCJoYW5kbGVHYXRld2F5Q2hhbmdlIiwiY2hhbmdlR2F0ZXdheSIsImhhbmRsZUVuYWJsZVN0YXRpY0lQVG9nZ2xlIiwiaGFuZGxlQXBwbHlTdGF0aWNJUCIsImFkZEV2ZW50IiwibmFtZSIsInNldFN0YXRlIiwiZW5hYmxlIiwiaWQiLCJwcmludGVyIiwiZ2V0SWQiLCJkbnMiLCJkbnNTZXJ2ZXJzIiwibWFwIiwicyIsInNldFN0YXRpY0lQIiwicGF0aCIsImVkaXRTdGF0aWNJUEFkZHJlc3MiLCJzdGF0aWNJUEFkZHJlc3MiLCJlZGl0TmV0bWFzayIsIm5ldG1hc2siLCJlZGl0R2F0ZXdheSIsImdhdGV3YXkiLCJoYW5kbGVETlNBZGQiLCJpdGVtcyIsImNvbmNhdCIsIm5ld0ROU0l0ZW0iLCJ2IiwiY2hhbmdlRE5TU2VydmVycyIsImhhbmRsZUROU1JlbW92ZSIsInJlZHVjZSIsImFjYyIsImkiLCJzZWxlY3RlZCIsImhhbmRsZUROU1NlbGVjdCIsInZhbCIsInNlbGVjdEROU0l0ZW0iLCJoYW5kbGVETlNDaGFuZ2UiLCJfbGFiZWwiLCJ0ZXh0IiwiZGl2Iiwic3R5bGUiLCJmb250V2VpZ2h0IiwibWFyZ2luVG9wIiwiY2xhc3NOYW1lIiwicmVuZGVySW5wdXRzIiwidCIsImlucHV0IiwibWFyZ2luIiwidHlwZSIsImRpc2FibGVkIiwiY2FuRWRpdCIsInBsYWNlaG9sZGVyIiwib25DaGFuZ2UiLCJyZWYiLCJuZXdJdGVtIiwiYmluZCIsIm9uQWRkIiwib25SZW1vdmUiLCJvblNlbGVjdCIsImVtdHB5TGFiZWwiLCJ3YWl0aW5nIiwiYnV0dG9uUHJvcHMiLCJwYWRkaW5nIiwic3RhdGljSVBFZGl0ZWQiLCJsYWJlbCIsIm9uQ2xpY2siLCJyZW5kZXIiLCJsYWJlbENsYXNzTmFtZXMiLCJjaGVja2VkIiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwiYm9vbCIsInN0cmluZyIsImFycmF5T2YiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHRixLQUFLLENBQUNFLEdBQWxCO0FBQ0EsTUFBTUMsRUFBRSxHQUFHSCxLQUFLLENBQUNJLGFBQWpCOztBQUNBLE1BQU1DLGFBQWEsR0FBR0osT0FBTyxDQUFDLGtDQUFELENBQTdCOztBQUNBLE1BQU1LLFFBQVEsR0FBR0wsT0FBTyxDQUFDLHFDQUFELENBQXhCOztBQUVBLE1BQU1NLGNBQWMsR0FBR04sT0FBTyxDQUFDLG1CQUFELENBQTlCOztBQUNBLE1BQU1PLE9BQU8sR0FBR1AsT0FBTyxDQUFDLGtCQUFELENBQXZCOztBQUVBLE1BQU1RLFFBQU4sU0FBdUJKLGFBQXZCLENBQXFDO0FBQ2pDSyxFQUFBQSxXQUFXLENBQUNDLEtBQUQsRUFBUTtBQUNmLFVBQU1BLEtBQU47QUFFQSxTQUFLQyxLQUFMLEdBQWEsS0FBS0QsS0FBTCxDQUFXRSxJQUFYLENBQWdCQyxVQUFoQixDQUEyQixvQkFB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RUFBRWpELEtBQUssQ0FBQ3FHLFNBQU4sQ0FBZ0JJLE1BQWhCLENBQXVCRixVQVJmO0FBU2pCcEQsRUFBQUEsT0FBTyxFQUFFbkQsS0FBSyxDQUFDcUcsU0FBTixDQUFnQkksTUFBaEIsQ0FBdUJGLFVBVGY7QUFVakI5RCxFQUFBQSxVQUFVLEVBQUV6QyxLQUFLLENBQUNxRyxTQUFOLENBQWdCSyxPQUFoQixDQUF3QjFHLEtBQUssQ0FBQ3FHLFNBQU4sQ0FBZ0JJLE1BQXhDLEVBQWdERixVQVYzQztBQVdqQnZCLEVBQUFBLE9BQU8sRUFBRWhGLEtBQUssQ0FBQ3FHLFNBQU4sQ0FBZ0JHLElBQWhCLENBQXFCRDtBQVhiLENBQXJCO0FBY0FJLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQm5HLFFBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5jb25zdCBET00gPSBSZWFjdC5ET007XHJcbmNvbnN0IGNlID0gUmVhY3QuY3JlYXRlRWxlbWVudDtcclxuY29uc3QgRmx1eENvbXBvbmVudCA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL2ZsdXhfY29tcG9uZW50Jyk7XHJcbmNvbnN0IENoZWNrYm94ID0gcmVxdWlyZSgnZWFnbGUtcHJpbnQvdmlld3MvdWkvaW5wdXRfY2hlY2tib3gnKTtcclxuXHJcbmNvbnN0IFdhaXRhYmxlQnV0dG9uID0gcmVxdWlyZSgnLi4vV2FpdGFibGVCdXR0b24nKTtcclxuY29uc3QgTGlzdGJveCA9IHJlcXVpcmUoJy4uL2lucHV0L2xpc3Rib3gnKTtcclxuXHJcbmNsYXNzIFN0YXRpY0lQIGV4dGVuZHMgRmx1eENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5faTE4biA9IHRoaXMucHJvcHMuZmx1eC5nZXRTZXJ2aWNlKCdUcmFuc2xhdGlvblNlcnZpY2UnKTtcclxuICAgICAgICB0aGlzLl90cmFja2luZ1NlcnZpY2UgPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnVHJhY2tpbmdTZXJ2aWNlJyk7XHJcbiAgICAgICAgdGhpcy5fbG9nZ2luZ1NlcnZpY2UgPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnTG9nZ2luZ1NlcnZpY2UnKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucyA9IHRoaXMucHJvcHMuZmx1eC5hY3Rpb25zLk5ldHdvcmtQcmVmZXJlbmNlc0FjdGlvbnM7XHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7IGVuYWJsZVN0YXRpY0lQOiBmYWxzZSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVN0YXRpY0lQQWRkcmVzc0NoYW5nZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMuY2hhbmdlU3RhdGljSVBBZGRyZXNzKGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlTmV0bWFza0NoYW5nZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMuY2hhbmdlTmV0bWFzayhldmVudC50YXJnZXQudmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUdhdGV3YXlDaGFuZ2UoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb25zLmNoYW5nZUdhdGV3YXkoZXZlbnQudGFyZ2V0LnZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVFbmFibGVTdGF0aWNJUFRvZ2dsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lbmFibGVTdGF0aWNJUCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUFwcGx5U3RhdGljSVAoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLl90cmFja2luZ1NlcnZpY2UuYWRkRXZlbnQoeyBuYW1lOiAnU3RhdGljIElQIERpc2FibGVkJyB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl90cmFja2luZ1NlcnZpY2UuYWRkRXZlbnQoeyBuYW1lOiAnU3RhdGljIElQIEVuYWJsZWQnIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVuYWJsZVN0YXRpY0lQOiAhdGhpcy5zdGF0ZS5lbmFibGVTdGF0aWNJUCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVBcHBseVN0YXRpY0lQKGVuYWJsZSA9IHRydWUpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMucHJvcHMucHJpbnRlci5nZXRJZCgpO1xyXG4gICAgICAgIGNvbnN0IGRucyA9IGVuYWJsZSA/IHRoaXMucHJvcHMuZG5zU2VydmVycy5tYXAocyA9PiBzLnZhbHVlKSA6IFtdO1xyXG5cclxuICAgICAgICB0aGlzLl9hY3Rpb25zLnNldFN0YXRpY0lQKFxyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5wYXRoLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmVkaXRTdGF0aWNJUEFkZHJlc3MgfHwgdGhpcy5wcm9wcy5zdGF0aWNJUEFkZHJlc3MsXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZWRpdE5ldG1hc2sgfHwgdGhpcy5wcm9wcy5uZXRtYXNrLFxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLmVkaXRHYXRld2F5IHx8IHRoaXMucHJvcHMuZ2F0ZXdheSxcclxuICAgICAgICAgICAgZG5zLFxyXG4gICAgICAgICAgICBlbmFibGVcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmIChlbmFibGUpXHJcbiAgICAgICAgICAgIHRoaXMuX3RyYWNraW5nU2VydmljZS5hZGRFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnU3RhdGljIElQIFNldHRpbmdzIEFwcGxpZWQnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVETlNBZGQoKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLnByb3BzLmRuc1NlcnZlcnMuY29uY2F0KHsgdmFsdWU6IHRoaXMucHJvcHMubmV3RE5TSXRlbSB9KS5tYXAodiA9PiB2LnZhbHVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucy5jaGFuZ2VETlNTZXJ2ZXJzKGl0ZW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVETlNSZW1vdmUoKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLnByb3BzLmRuc1NlcnZlcnMucmVkdWNlKChhY2MsIGkpID0+ICghaS5zZWxlY3RlZCA/IGFjYy5jb25jYXQoaS52YWx1ZSkgOiBhY2MpLCBbXSk7XHJcblxyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMuY2hhbmdlRE5TU2VydmVycyhpdGVtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlRE5TU2VsZWN0KHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMuc2VsZWN0RE5TSXRlbSh2YWwpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUROU0NoYW5nZSh2YWwpIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb25zLm5ld0ROU0l0ZW0odmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBfbGFiZWwodGV4dCkge1xyXG4gICAgICAgIHJldHVybiBET00uZGl2KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZTogeyBmb250V2VpZ2h0OiAnYm9sZCcsIG1hcmdpblRvcDogJzBweCcgfSxcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hlYWRlcicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRleHQsXHJcbiAgICAgICAgICAgICc6ICdcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcklucHV0cygpIHtcclxuICAgICAgICByZXR1cm4gRE9NLmRpdihcclxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdzdGF0aWNpcCcgfSxcclxuICAgICAgICAgICAgdGhpcy5fbGFiZWwodGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLnN0YXRpY0lQLmlwJykpLFxyXG4gICAgICAgICAgICBET00uaW5wdXQoe1xyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiAnNXB4IDAnIH0sXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbnB1dC10ZXh0JyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5wcm9wcy5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMuZWRpdFN0YXRpY0lQQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB0aGlzLnByb3BzLnN0YXRpY0lQQWRkcmVzcyxcclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiBldmVudCA9PiB0aGlzLmhhbmRsZVN0YXRpY0lQQWRkcmVzc0NoYW5nZShldmVudCksXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbCh0aGlzLl9pMThuLnQoJ21iOm5ldHdvcmsuc3RhdGljSVAubmV0bWFzaycpKSxcclxuICAgICAgICAgICAgRE9NLmlucHV0KHtcclxuICAgICAgICAgICAgICAgIHJlZjogJ25ldG1hc2snLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiAnNXB4IDAnIH0sXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbnB1dC10ZXh0JyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5wcm9wcy5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMuZWRpdE5ldG1hc2ssXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5wcm9wcy5uZXRtYXNrLFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IGV2ZW50ID0+IHRoaXMuaGFuZGxlTmV0bWFza0NoYW5nZShldmVudCksXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbCh0aGlzLl9pMThuLnQoJ21iOm5ldHdvcmsuc3RhdGljSVAuZ2F0ZXdheScpKSxcclxuICAgICAgICAgICAgRE9NLmlucHV0KHtcclxuICAgICAgICAgICAgICAgIHJlZjogJ2dhdGV3YXknLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiAnNXB4IDAnIH0sXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbnB1dC10ZXh0JyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5wcm9wcy5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcHMuZWRpdEdhdGV3YXksXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5wcm9wcy5nYXRld2F5LFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IGV2ZW50ID0+IHRoaXMuaGFuZGxlR2F0ZXdheUNoYW5nZShldmVudCksXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB0aGlzLl9sYWJlbCh0aGlzLl9pMThuLnQoJ21iOm5ldHdvcmsuc3RhdGljSVAuZG5zJykpLFxyXG4gICAgICAgICAgICBMaXN0Ym94KHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiB0aGlzLnByb3BzLmRuc1NlcnZlcnMsXHJcbiAgICAgICAgICAgICAgICBuZXdJdGVtOiB0aGlzLnByb3BzLm5ld0ROU0l0ZW0sXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLnN0YXRpY0lQLm5ld1BsYWNlaG9sZGVyJyksXHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZTogdGhpcy5oYW5kbGVETlNDaGFuZ2UuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIG9uQWRkOiB0aGlzLmhhbmRsZUROU0FkZC5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgb25SZW1vdmU6IHRoaXMuaGFuZGxlRE5TUmVtb3ZlLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBvblNlbGVjdDogdGhpcy5oYW5kbGVETlNTZWxlY3QuYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5wcm9wcy5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgZW10cHlMYWJlbDogdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLnN0YXRpY0lQLmVtcHR5RE5TJyksXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBjZShXYWl0YWJsZUJ1dHRvbiwge1xyXG4gICAgICAgICAgICAgICAgd2FpdGluZzogdGhpcy5wcm9wcy53YWl0aW5nLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uUHJvcHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBtYXJnaW46ICcxMnB4IDAnLCBwYWRkaW5nOiAnOHB4IDEycHgnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiAhdGhpcy5wcm9wcy5zdGF0aWNJUEVkaXRlZCAmJiAhdGhpcy5wcm9wcy5jYW5FZGl0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25ldHdvcmstYnV0dG9uJyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLnN0YXRpY0lQLmFwcGx5JyksXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVBcHBseVN0YXRpY0lQKCksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBET00uZGl2KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGBwYW5lbC1ib2R5JHt0aGlzLnByb3BzLmNhbkVkaXQgPyAnJyA6ICcgdmlldy1kaXNhYmxlZCd9YCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgRE9NLmRpdihcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBmb250V2VpZ2h0OiAnYm9sZCcsIG1hcmdpblRvcDogJzBweCcgfSxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdoZWFkZXInLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRoaXMuX2kxOG4udCgnbWI6bmV0d29yay5oZWFkZXIuc3RhdGljSVAnKSxcclxuICAgICAgICAgICAgICAgICc6ICdcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgY2UoQ2hlY2tib3gsIHtcclxuICAgICAgICAgICAgICAgIHJlZjogJ2VuYWJsZVN0YXRpY0lQQ2hlY2tib3gnLFxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLnByb3BzLmNhbkVkaXQsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLmNoZWNrYm94LmVuYWJsZVN0YXRpY0lQJyksXHJcbiAgICAgICAgICAgICAgICBsYWJlbENsYXNzTmFtZXM6ICdzdGF0dXMtY2hlY2tib3gtbGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6ICgpID0+IHRoaXMuaGFuZGxlRW5hYmxlU3RhdGljSVBUb2dnbGUoKSxcclxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRoaXMucHJvcHMuZW5hYmxlU3RhdGljSVAgfHwgdGhpcy5zdGF0ZS5lbmFibGVTdGF0aWNJUCxcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZW5hYmxlU3RhdGljSVAgfHwgdGhpcy5zdGF0ZS5lbmFibGVTdGF0aWNJUCA/IHRoaXMucmVuZGVySW5wdXRzKCkgOiBudWxsXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuU3RhdGljSVAuZGlzcGxheU5hbWUgPSAnU3RhdGljSVAnO1xyXG5TdGF0aWNJUC5wcm9wVHlwZXMgPSB7XHJcbiAgICBmbHV4OiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICBwcmludGVyOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICB3YWl0aW5nOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxyXG4gICAgcGF0aDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgZW5hYmxlU3RhdGljSVA6IFJlYWN0LlByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXHJcbiAgICBzdGF0aWNJUEVkaXRlZDogUmVhY3QuUHJvcFR5cGVzLmJvb2wuaXNSZXF1aXJlZCxcclxuICAgIHN0YXRpY0lQQWRkcmVzczogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgbmV0bWFzazogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgZ2F0ZXdheTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgZG5zU2VydmVyczogUmVhY3QuUHJvcFR5cGVzLmFycmF5T2YoUmVhY3QuUHJvcFR5cGVzLnN0cmluZykuaXNSZXF1aXJlZCxcclxuICAgIGNhbkVkaXQ6IFJlYWN0LlByb3BUeXBlcy5ib29sLmlzUmVxdWlyZWQsXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFN0YXRpY0lQO1xyXG4iXX0=
