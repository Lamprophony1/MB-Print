'use strict';

const React = require('react');

const DOM = React.DOM;
const ce = React.createElement;

const FluxComponent = require('eagle-print/views/flux_component');

const _ = require('lodash');

const CardContainer = require('eagle-print/views/ui/card_container');

const PrinterCardContainer = require('eagle-print/views/printers/printer_card_container');

const UtilityPanel = require('./utilityPanel');

const DEFAULTKEY = 'default';
/**
 * @classdesc Makes a collection of tabs and panels that slide in and out.
 * @example
 * const UtilityTabSet = require('./utilityTabSet');
 * const UtilityTab = require('./utilityTab');
 *
 * class MyComponent extends Component {
 *      render() {
 *          return (
 *              <UtilityTabSet title="My Tab Set" ref={(c) => this.tabset = c}>
 *                  <div tabKey="default">
 *                      Some default stuff
 *                  </div>
 *                  <UtilityTab tabKey="tab1" tabIcon="icon.svg" tabName="Tab 1" onClick={(t) => this.tabset.select(t)}>
 *                      <FirstPanel onBack={() => this.panel.back()} />
 *                  </UtilityTab>
 *                  <UtilityTab tabKey="tab2" tabIcon="icon.svg" tabName="Tab 2" onClick={(t) => this.tabset.select(t)}>
 *                      <SecondPanel onBack={() => this.panel.back()} />
 *                  </UtilityTab>
 *              </UtilityTabSet>
 *          );
 *      }
 * }
 */

class UtilityTabSet extends FluxComponent {
  constructor(props, context) {
    super(props, context);
    this.logger = this.getFlux().getService('LoggingService');

    _.assign(this.state, {
      tab: DEFAULTKEY,
      swipeDirection: CardContainer.SWIPE_LEFT
    });
  }
  /**
   * @public
   * Advances the view to the specified tab
   */


  select(tab) {
    this.setState({
      tab,
      swipeDirection: CardContainer.SWIPE_LEFT
    });
  }
  /**
   * @public
   * Brings the view back to the default
   */


  back() {
    this.setState({
      tab: DEFAULTKEY,
      swipeDirection: CardContainer.SWIPE_RIGHT
    });
  }
  /**
   * @private
   * Extracts a particular child from the tabset based on its key
   * @returns {ReactElement}
   */


  _panelChild(key) {
    for (let i = this.props.children.length - 1; i >= 0; i--) {
      if (this.props.children[i] && this.props.children[i].props.tabKey === key) {
        return DOM.div({
          key: `${key}_child`
        }, this.props.children[i].props.children);
      }
    }

    this.logger.warn(`No child named ${key} in UtilityTabSet`);
    return null;
  }
  /**
   * Shows either the current tab, or the default view with the list of tabs
   * @returns {ReactElement}
   */


  _renderCard() {
    if (this.state.tab !== DEFAULTKEY) {
      return this._panelChild(this.state.tab);
    }

    return ce(UtilityPanel, {
      title: this.props.title,
      className: this.props.className,
      printer: this.props.printer,
      onBack: this.props.onBack,
      onClose: this.props.onClose
    }, DOM.div({
      className: 'bottomList'
    }, DOM.div({
      style: {
        marginBottom: 50
      }
    }, this.props.children)));
  }

  render() {
    return ce(PrinterCardContainer, _.assign({}, this.props, {
      swipeDirection: this.state.swipeDirection
    }), this._renderCard());
  }

}

UtilityTabSet.propTypes = {
  onBack: React.PropTypes.func.isRequired,
  onClose: React.PropTypes.func.isRequired,
  printer: React.PropTypes.object.isRequired,
  children: React.PropTypes.any
};
module.exports = UtilityTabSet;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxpdHlUYWJTZXQuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJyZXF1aXJlIiwiRE9NIiwiY2UiLCJjcmVhdGVFbGVtZW50IiwiRmx1eENvbXBvbmVudCIsIl8iLCJDYXJkQ29udGFpbmVyIiwiUHJpbnRlckNhcmRDb250YWluZXIiLCJVdGlsaXR5UGFuZWwiLCJERUZBVUxUS0VZIiwiVXRpbGl0eVRhYlNldCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJjb250ZXh0IiwibG9nZ2VyIiwiZ2V0Rmx1eCIsImdldFNlcnZpY2UiLCJhc3NpZ24iLCJzdGF0ZSIsInRhYiIsInN3aXBlRGlyZWN0aW9uIiwiU1dJUEVfTEVGVCIsInNlbGVjdCIsInNldFN0YXRlIiwiYmFjayIsIlNXSVBFX1JJR0hUIiwiX3BhbmVsQ2hpbGQiLCJrZXkiLCJpIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJ0YWJLZXkiLCJkaXYiLCJ3YXJuIiwiX3JlbmRlckNhcmQiLCJ0aXRsZSIsImNsYXNzTmFtZSIsInByaW50ZXIiLCJvbkJhY2siLCJvbkNsb3NlIiwic3R5bGUiLCJtYXJnaW5Cb3R0b20iLCJyZW5kZXIiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJmdW5jIiwiaXNSZXF1aXJlZCIsIm9iamVjdCIsImFueSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHRixLQUFLLENBQUNFLEdBQWxCO0FBQ0EsTUFBTUMsRUFBRSxHQUFHSCxLQUFLLENBQUNJLGFBQWpCOztBQUNBLE1BQU1DLGFBQWEsR0FBR0osT0FBTyxDQUFDLGtDQUFELENBQTdCOztBQUNBLE1BQU1LLENBQUMsR0FBR0wsT0FBTyxDQUFDLFFBQUQsQ0FBakI7O0FBQ0EsTUFBTU0sYUFBYSxHQUFHTixPQUFPLENBQUMscUNBQUQsQ0FBN0I7O0FBQ0EsTUFBTU8sb0JBQW9CLEdBQUdQLE9B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R0FBRyxDQUFDK0IsR0FBSixDQUFRO0FBQUVJLE1BQUFBLFNBQVMsRUFBRTtBQUFiLEtBQVIsRUFBcUNuQyxHQUFHLENBQUMrQixHQUFKLENBQVE7QUFBRVEsTUFBQUEsS0FBSyxFQUFFO0FBQUVDLFFBQUFBLFlBQVksRUFBRTtBQUFoQjtBQUFULEtBQVIsRUFBeUMsS0FBSzdCLEtBQUwsQ0FBV2lCLFFBQXBELENBQXJDLENBVEssQ0FBVDtBQVdIOztBQUVEYSxFQUFBQSxNQUFNLEdBQUc7QUFDTCxXQUFPeEMsRUFBRSxDQUNMSyxvQkFESyxFQUVMRixDQUFDLENBQUNZLE1BQUYsQ0FBUyxFQUFULEVBQWEsS0FBS0wsS0FBbEIsRUFBeUI7QUFDckJRLE1BQUFBLGNBQWMsRUFBRSxLQUFLRixLQUFMLENBQVdFO0FBRE4sS0FBekIsQ0FGSyxFQUtMLEtBQUtjLFdBQUwsRUFMSyxDQUFUO0FBT0g7O0FBaEZxQzs7QUFtRjFDeEIsYUFBYSxDQUFDaUMsU0FBZCxHQUEwQjtBQUN0QkwsRUFBQUEsTUFBTSxFQUFFdkMsS0FBSyxDQUFDNkMsU0FBTixDQUFnQkMsSUFBaEIsQ0FBcUJDLFVBRFA7QUFFdEJQLEVBQUFBLE9BQU8sRUFBRXhDLEtBQUssQ0FBQzZDLFNBQU4sQ0FBZ0JDLElBQWhCLENBQXFCQyxVQUZSO0FBR3RCVCxFQUFBQSxPQUFPLEVBQUV0QyxLQUFLLENBQUM2QyxTQUFOLENBQWdCRyxNQUFoQixDQUF1QkQsVUFIVjtBQUl0QmpCLEVBQUFBLFFBQVEsRUFBRTlCLEtBQUssQ0FBQzZDLFNBQU4sQ0FBZ0JJO0FBSkosQ0FBMUI7QUFPQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCeEMsYUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmNvbnN0IERPTSA9IFJlYWN0LkRPTTtcclxuY29uc3QgY2UgPSBSZWFjdC5jcmVhdGVFbGVtZW50O1xyXG5jb25zdCBGbHV4Q29tcG9uZW50ID0gcmVxdWlyZSgnZWFnbGUtcHJpbnQvdmlld3MvZmx1eF9jb21wb25lbnQnKTtcclxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5jb25zdCBDYXJkQ29udGFpbmVyID0gcmVxdWlyZSgnZWFnbGUtcHJpbnQvdmlld3MvdWkvY2FyZF9jb250YWluZXInKTtcclxuY29uc3QgUHJpbnRlckNhcmRDb250YWluZXIgPSByZXF1aXJlKCdlYWdsZS1wcmludC92aWV3cy9wcmludGVycy9wcmludGVyX2NhcmRfY29udGFpbmVyJyk7XHJcblxyXG5jb25zdCBVdGlsaXR5UGFuZWwgPSByZXF1aXJlKCcuL3V0aWxpdHlQYW5lbCcpO1xyXG5cclxuY29uc3QgREVGQVVMVEtFWSA9ICdkZWZhdWx0JztcclxuXHJcbi8qKlxyXG4gKiBAY2xhc3NkZXNjIE1ha2VzIGEgY29sbGVjdGlvbiBvZiB0YWJzIGFuZCBwYW5lbHMgdGhhdCBzbGlkZSBpbiBhbmQgb3V0LlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBjb25zdCBVdGlsaXR5VGFiU2V0ID0gcmVxdWlyZSgnLi91dGlsaXR5VGFiU2V0Jyk7XHJcbiAqIGNvbnN0IFV0aWxpdHlUYWIgPSByZXF1aXJlKCcuL3V0aWxpdHlUYWInKTtcclxuICpcclxuICogY2xhc3MgTXlDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gKiAgICAgIHJlbmRlcigpIHtcclxuICogICAgICAgICAgcmV0dXJuIChcclxuICogICAgICAgICAgICAgIDxVdGlsaXR5VGFiU2V0IHRpdGxlPVwiTXkgVGFiIFNldFwiIHJlZj17KGMpID0+IHRoaXMudGFic2V0ID0gY30+XHJcbiAqICAgICAgICAgICAgICAgICAgPGRpdiB0YWJLZXk9XCJkZWZhdWx0XCI+XHJcbiAqICAgICAgICAgICAgICAgICAgICAgIFNvbWUgZGVmYXVsdCBzdHVmZlxyXG4gKiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gKiAgICAgICAgICAgICAgICAgIDxVdGlsaXR5VGFiIHRhYktleT1cInRhYjFcIiB0YWJJY29uPVwiaWNvbi5zdmdcIiB0YWJOYW1lPVwiVGFiIDFcIiBvbkNsaWNrPXsodCkgPT4gdGhpcy50YWJzZXQuc2VsZWN0KHQpfT5cclxuICogICAgICAgICAgICAgICAgICAgICAgPEZpcnN0UGFuZWwgb25CYWNrPXsoKSA9PiB0aGlzLnBhbmVsLmJhY2soKX0gLz5cclxuICogICAgICAgICAgICAgICAgICA8L1V0aWxpdHlUYWI+XHJcbiAqICAgICAgICAgICAgICAgICAgPFV0aWxpdHlUYWIgdGFiS2V5PVwidGFiMlwiIHRhYkljb249XCJpY29uLnN2Z1wiIHRhYk5hbWU9XCJUYWIgMlwiIG9uQ2xpY2s9eyh0KSA9PiB0aGlzLnRhYnNldC5zZWxlY3QodCl9PlxyXG4gKiAgICAgICAgICAgICAgICAgICAgICA8U2Vjb25kUGFuZWwgb25CYWNrPXsoKSA9PiB0aGlzLnBhbmVsLmJhY2soKX0gLz5cclxuICogICAgICAgICAgICAgICAgICA8L1V0aWxpdHlUYWI+XHJcbiAqICAgICAgICAgICAgICA8L1V0aWxpdHlUYWJTZXQ+XHJcbiAqICAgICAgICAgICk7XHJcbiAqICAgICAgfVxyXG4gKiB9XHJcbiAqL1xyXG5jbGFzcyBVdGlsaXR5VGFiU2V0IGV4dGVuZHMgRmx1eENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSB0aGlzLmdldEZsdXgoKS5nZXRTZXJ2aWNlKCdMb2dnaW5nU2VydmljZScpO1xyXG5cclxuICAgICAgICBfLmFzc2lnbih0aGlzLnN0YXRlLCB7XHJcbiAgICAgICAgICAgIHRhYjogREVGQVVMVEtFWSxcclxuICAgICAgICAgICAgc3dpcGVEaXJlY3Rpb246IENhcmRDb250YWluZXIuU1dJUEVfTEVGVCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEFkdmFuY2VzIHRoZSB2aWV3IHRvIHRoZSBzcGVjaWZpZWQgdGFiXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdCh0YWIpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdGFiLFxyXG4gICAgICAgICAgICBzd2lwZURpcmVjdGlvbjogQ2FyZENvbnRhaW5lci5TV0lQRV9MRUZULFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICogQnJpbmdzIHRoZSB2aWV3IGJhY2sgdG8gdGhlIGRlZmF1bHRcclxuICAgICAqL1xyXG4gICAgYmFjaygpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgdGFiOiBERUZBVUxUS0VZLFxyXG4gICAgICAgICAgICBzd2lwZURpcmVjdGlvbjogQ2FyZENvbnRhaW5lci5TV0lQRV9SSUdIVCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBFeHRyYWN0cyBhIHBhcnRpY3VsYXIgY2hpbGQgZnJvbSB0aGUgdGFic2V0IGJhc2VkIG9uIGl0cyBrZXlcclxuICAgICAqIEByZXR1cm5zIHtSZWFjdEVsZW1lbnR9XHJcbiAgICAgKi9cclxuICAgIF9wYW5lbENoaWxkKGtleSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnByb3BzLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmNoaWxkcmVuW2ldICYmIHRoaXMucHJvcHMuY2hpbGRyZW5baV0ucHJvcHMudGFiS2V5ID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBET00uZGl2KHsga2V5OiBgJHtrZXl9X2NoaWxkYCB9LCB0aGlzLnByb3BzLmNoaWxkcmVuW2ldLnByb3BzLmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihgTm8gY2hpbGQgbmFtZWQgJHtrZXl9IGluIFV0aWxpdHlUYWJTZXRgKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3dzIGVpdGhlciB0aGUgY3VycmVudCB0YWIsIG9yIHRoZSBkZWZhdWx0IHZpZXcgd2l0aCB0aGUgbGlzdCBvZiB0YWJzXHJcbiAgICAgKiBAcmV0dXJucyB7UmVhY3RFbGVtZW50fVxyXG4gICAgICovXHJcbiAgICBfcmVuZGVyQ2FyZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS50YWIgIT09IERFRkFVTFRLRVkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhbmVsQ2hpbGQodGhpcy5zdGF0ZS50YWIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNlKFxyXG4gICAgICAgICAgICBVdGlsaXR5UGFuZWwsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnByb3BzLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0aGlzLnByb3BzLmNsYXNzTmFtZSxcclxuICAgICAgICAgICAgICAgIHByaW50ZXI6IHRoaXMucHJvcHMucHJpbnRlcixcclxuICAgICAgICAgICAgICAgIG9uQmFjazogdGhpcy5wcm9wcy5vbkJhY2ssXHJcbiAgICAgICAgICAgICAgICBvbkNsb3NlOiB0aGlzLnByb3BzLm9uQ2xvc2UsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIERPTS5kaXYoeyBjbGFzc05hbWU6ICdib3R0b21MaXN0JyB9LCBET00uZGl2KHsgc3R5bGU6IHsgbWFyZ2luQm90dG9tOiA1MCB9IH0sIHRoaXMucHJvcHMuY2hpbGRyZW4pKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIHJldHVybiBjZShcclxuICAgICAgICAgICAgUHJpbnRlckNhcmRDb250YWluZXIsXHJcbiAgICAgICAgICAgIF8uYXNzaWduKHt9LCB0aGlzLnByb3BzLCB7XHJcbiAgICAgICAgICAgICAgICBzd2lwZURpcmVjdGlvbjogdGhpcy5zdGF0ZS5zd2lwZURpcmVjdGlvbixcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlckNhcmQoKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcblV0aWxpdHlUYWJTZXQucHJvcFR5cGVzID0ge1xyXG4gICAgb25CYWNrOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgb25DbG9zZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIHByaW50ZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIGNoaWxkcmVuOiBSZWFjdC5Qcm9wVHlwZXMuYW55LFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVdGlsaXR5VGFiU2V0O1xyXG4iXX0=
