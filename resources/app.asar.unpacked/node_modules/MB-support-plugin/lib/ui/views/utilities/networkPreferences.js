'use strict';

const React = require('react');

const DOM = React.DOM;
const ce = React.createElement;

const Isvg = require('react-inlinesvg');

const _ = require('lodash');

const path = require('path');

const classNames = require('classnames');

const Checkbox = require('eagle-print/views/ui/input_checkbox');

const Dropdown = require('eagle-print/views/ui/input_dropdown');

const FluxComponent = require('eagle-print/views/flux_component');

const {
  getPropLift
} = require('../../../utils/maybe');

const WaitableButton = require('../WaitableButton');

const HeaderSelectButton = require('../headerSelectButton');

const StaticIP = require('./staticIP');

const {
  CHANGE_EVENT,
  NetworkStateEnum
} = require('../../../constants/networkPreferences');

class NetworkPreferences extends FluxComponent {
  constructor(props) {
    super(props);
    this._i18n = this.props.flux.getService('TranslationService');
    this._trackingService = this.props.flux.getService('TrackingService');
    this._loggingService = this.props.flux.getService('LoggingService');
    this._store = this.props.flux.store('NetworkPreferencesStore');
    this._actions = this.props.flux.actions.NetworkPreferencesActions;
    this.onChange = this.onChange.bind(this);
    this.handleNetworkChange = this.handleNetworkChange.bind(this);
    this.state = this._store.getState();
  }

  componentDidMount() {
    this.handleNetworkChange();
    this.props.printer.updateNotifications.addListener('network_state_change', this.handleNetworkChange);
    this.props.printer.updateNotifications.addListener('conn_type_change', this.handleNetworkChange);

    this._store.addListener(CHANGE_EVENT, this.onChange);

    this._actions.clearError();
  }

  componentWillUnmount() {
    this.props.printer.updateNotifications.removeListener('network_state_change', this.handleNetworkChange);
    this.props.printer.updateNotifications.removeListener('conn_type_change', this.handleNetworkChange);

    this._store.removeListener(CHANGE_EVENT, this.onChange);
  }

  onChange() {
    this.setState(this._store.getState());
  }

  handleNetworkChange() {
    this._actions.networkChange(this.props.printer.getId());
  }

  handleDisconnect() {
    this._actions.disconnectFromNetwork(this.props.printer.getId(), this.state.currentPath);
  }

  handleDropdownChange({
    value: path
  }) {
    this._actions.selectNetwork(path);

    this._actions.prepopulateStaticIP(this.props.printer.getId(), path);
  }

  handlePasswordChange(event) {
    this._actions.changePasswordAttempt(event.target.value);
  }

  handleHidePasswordChange() {
    this._actions.togglePasswordVisibility();
  }

  toggleWifi() {
    const id = this.props.printer.getId();
    if (this.state.enableWifi) this._actions.disableWifi(id);else this._actions.enableWifi(id);
  }

  _shouldDisableView() {
    return !this.state.canEditWifi(this.props.printer);
  }

  _currentNetwork() {
    if (this.state.selectedNetwork.lift()) return this.state.selectedNetwork;
    return this.state.networkState;
  }

  _currentNetworkPath() {
    const connectedByEthernet = getPropLift('state', this.state.networkState) === NetworkStateEnum.state.ETHERNET;
    if (connectedByEthernet) return 'ethernet';
    return getPath(this.state.selectedNetwork) || getPath(this.state.networkState);
  }

  renderMessageView() {
    return DOM.div({
      className: 'network-preferences__status__message message'
    }, DOM.p({
      style: {
        lineHeight: 1.7,
        margin: '7px 0'
      }
    }, this.state.currentMessage.map(this._i18n.t).lift()));
  }

  renderErrorView() {
    const width = 25;
    const height = 25;
    const viewBox = `0 0 ${width} ${height}`;
    return DOM.div({
      style: {
        margin: '15px 0'
      },
      className: 'network-preferences__status__error error'
    }, this.state.currentError.map(err => {
      const key = `mb:network.errors.${_.camelCase(err)}`;

      const fallback = _.startCase(err);

      return [ce('svg', {
        ref: 'errorIcon',
        className: 'error-icon',
        width,
        height,
        viewBox
      }, ce('image', {
        height,
        width,
        xlinkHref: path.resolve(__dirname, '../images/alert-icon-white.svg')
      })), DOM.span({
        className: 'error-text'
      }, this._i18n.exists(key) ? this._i18n.t(key) : fallback)];
    }).lift());
  }

  renderStatusView() {
    return DOM.div({
      style: {
        paddingBottom: 0
      },
      className: 'network-preferences__status panel-body'
    }, DOM.div({
      style: {
        fontWeight: 'bold',
        marginBottom: '0px'
      },
      className: 'header'
    }, this._i18n.t('mb:network.header.status'), ': ', this.state.statusMsg.map(this._i18n.t).lift()), this.renderMessageView(), ce(Checkbox, {
      ref: 'wifiCheckbox',
      checked: this.state.enableWifi,
      label: this._i18n.t('mb:network.checkbox.enableWifi'),
      classNames: 'wifi-checkbox',
      labelClassNames: 'status-checkbox-label',
      onChange: () => this.toggleWifi(),
      disabled: this._shouldDisableView()
    }), this.renderErrorView());
  }

  renderRefreshButton() {
    const id = this.props.printer.getId();
    return ce(WaitableButton, {
      waiting: this.state.waiting,
      buttonProps: {
        style: {
          margin: '0 15px',
          padding: '8px 12px'
        },
        type: 'secondary',
        className: 'refresh-button',
        label: this._i18n.t('mb:network.button.refresh'),
        onClick: () => this._actions.networkChange(id)
      }
    });
  }

  renderDisconnectButton() {
    return ce(WaitableButton, {
      waiting: this.state.waiting,
      buttonProps: {
        style: {
          margin: '0 15px',
          padding: '8px 12px'
        },
        type: 'secondary',
        className: 'disconnect-button',
        label: this._i18n.t('mb:network.button.disconnect'),
        onClick: () => this.handleDisconnect()
      }
    });
  }

  renderNetworksView() {
    const networkIsSelected = this.state.selectedNetwork.map(() => true).lift() || false;
    const networkViewBodyClasses = classNames('network-preferences__networks__body', {
      'view-disabled': this._shouldDisableView()
    });
    const placeholder = this.state.availableNetworks.length > 0 ? getPropLift('name', this.state.networkState) || this._i18n.t('mb:network.dropdown.chooseANetwork') : 'No Networks Available';
    const options = this.state.availableNetworks.reduce((acc, v) => acc.concat({
      label: v.name,
      value: v.path
    }), [{
      label: placeholder,
      value: ''
    }]);
    const value = getPath(this.state.selectedNetwork);
    return DOM.div({
      className: 'network-preferences__networks'
    }, DOM.div({
      style: {
        paddingBottom: 0
      },
      className: 'panel-body'
    }, DOM.div({
      style: {
        fontWeight: 'bold',
        marginTop: '0px'
      },
      className: 'header'
    }, this._i18n.t('mb:network.header.network'), ': '), DOM.div({
      style: {
        display: 'flex',
        margin: '5px 0'
      },
      className: networkViewBodyClasses
    }, ce(Dropdown, {
      ref: 'networksDropdown',
      style: {
        flex: 2,
        width: '100%'
      },
      options,
      onChange: event => this.handleDropdownChange(event),
      disableExpandOutOfPanel: true,
      placeholder,
      value
    }), getPropLift('state', this.state.networkState) === 'wifi' ? this.renderDisconnectButton() : this.renderRefreshButton())), networkIsSelected ? this.renderConnectView() : null);
  }

  renderConnectView() {
    const connectViewBodyClasses = classNames('network-preferences__networks__connect form-group auth-input panel-body', {
      'view-disabled': this._shouldDisableView()
    });
    const pwRequired = this.state.selectedNetwork.map(network => network.password === 'required' && getPropLift('state', this.state.networkState) !== 'wifi').lift();
    return DOM.div({
      className: connectViewBodyClasses
    }, pwRequired ? this.renderPasswordInput() : null, ce(WaitableButton, {
      waiting: this.state.waiting,
      buttonProps: {
        style: {
          margin: '12px 0',
          padding: '8px 12px'
        },
        type: 'primary',
        className: 'network-button',
        label: this._i18n.t('mb:network.button.connect'),
        onClick: () => this.handleConnectButtonClicked()
      }
    }));
  }

  handleConnectButtonClicked() {
    const id = this.props.printer.getId();

    this._actions.connectToNetwork(id, this._currentNetworkPath(), this.state.passwordAttempt);
  }

  renderPasswordInput() {
    const passwordInputBodyClasses = classNames('', {
      'view-disabled': this._shouldDisableView()
    });
    return DOM.div({
      className: 'network-preferences__networks__connect__password-input'
    }, DOM.span({
      style: {
        fontWeight: 'bold'
      },
      className: 'header'
    }, this._i18n.t('mb:network.header.wifiPassword'), ': '), DOM.div({
      className: passwordInputBodyClasses
    }, DOM.input({
      ref: 'passwordInput',
      style: {
        margin: '5px 0'
      },
      className: 'input-text network-password-input',
      type: this.state.showPassword ? 'text' : 'password',
      value: this.state.passwordAttempt,
      onChange: event => this.handlePasswordChange(event),
      onKeyDown: event => event.key === 'Enter' ? this.handleConnectButtonClicked() : null
    }), ce(Checkbox, {
      ref: 'hidePasswordCheckbox',
      checked: this.state.showPassword,
      label: this._i18n.t('mb:network.checkbox.showPassword'),
      labelClassNames: 'hide-password-checkbox-label',
      classNames: 'hide-password-checkbox',
      onChange: () => this.handleHidePasswordChange()
    })));
  }

  render() {
    const staticIPprops = {
      flux: this.props.flux,
      printer: this.props.printer,
      waiting: this.state.waiting,
      enableStaticIP: this.state.enableStaticIP,
      staticIPEdited: this.state.staticIPEdited,
      staticIPAddress: this.state.staticIPAddress,
      netmask: this.state.netmask,
      gateway: this.state.gateway,
      dnsServers: this.state.dnsServers,
      editStaticIPAddress: this.state.editStaticIPAddress,
      editNetmask: this.state.editNetmask,
      editGateway: this.state.editGateway,
      newDNSItem: this.state.newDNSItem,
      canEdit: this.state.canEditStaticIP(this.props.printer),
      path: this._currentNetworkPath()
    };
    return /*#__PURE__*/React.createElement("div", {
      id: "network-preferences",
      className: `${this.props.className || 'network-preferences'} printerPanel`,
      style: {
        position: 'relative',
        height: '100%'
      }
    }, /*#__PURE__*/React.createElement("div", {
      className: "printerPanelHeader"
    }, /*#__PURE__*/React.createElement("div", {
      className: "printerPanelBackButton",
      onClick: this.props.onBack
    }, /*#__PURE__*/React.createElement(Isvg, {
      src: "icons/back-arrow.svg"
    })), /*#__PURE__*/React.createElement("div", {
      className: "printerPanelHeaderLabel"
    }, /*#__PURE__*/React.createElement("h1", null, this._i18n.t('mb:network.header.main'))), /*#__PURE__*/React.createElement(HeaderSelectButton, {
      flux: this.props.flux,
      printer: this.props.printer
    }), /*#__PURE__*/React.createElement("div", {
      className: "printerPanelArrowDown",
      onClick: this.props.onClose
    }, /*#__PURE__*/React.createElement(Isvg, {
      src: "icons/back-arrow.svg"
    }))), /*#__PURE__*/React.createElement("div", {
      style: {
        overflowY: 'auto',
        position: 'absolute',
        top: 60,
        left: 0,
        right: 0,
        bottom: 0
      }
    }, !_.isEmpty(this.state.networkState) ? this.renderStatusView() : null, this.state.enableWifi ? this.renderNetworksView() : null, /*#__PURE__*/React.createElement(StaticIP, staticIPprops)), /*#__PURE__*/React.createElement("div", {
      className: 'printerPanel'
    }, /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 50
      }
    })));
  }

}

NetworkPreferences.displayName = 'NetworkPreferences';
NetworkPreferences.propTypes = {
  flux: React.PropTypes.object.isRequired,
  onBack: React.PropTypes.func.isRequired,
  onClose: React.PropTypes.func.isRequired,
  printer: React.PropTypes.object.isRequired,
  className: React.PropTypes.string
};
const getPath = getPropLift('path');
module.exports = NetworkPreferences;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldHdvcmtQcmVmZXJlbmNlcy5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJET00iLCJjZSIsImNyZWF0ZUVsZW1lbnQiLCJJc3ZnIiwiXyIsInBhdGgiLCJjbGFzc05hbWVzIiwiQ2hlY2tib3giLCJEcm9wZG93biIsIkZsdXhDb21wb25lbnQiLCJnZXRQcm9wTGlmdCIsIldhaXRhYmxlQnV0dG9uIiwiSGVhZGVyU2VsZWN0QnV0dG9uIiwiU3RhdGljSVAiLCJDSEFOR0VfRVZFTlQiLCJOZXR3b3JrU3RhdGVFbnVtIiwiTmV0d29ya1ByZWZlcmVuY2VzIiwiY29uc3RydWN0b3IiLCJwcm9wcyIsIl9pMThuIiwiZmx1eCIsImdldFNlcnZpY2UiLCJfdHJhY2tpbmdTZXJ2aWNlIiwiX2xvZ2dpbmdTZXJ2aWNlIiwiX3N0b3JlIiwic3RvcmUiLCJfYWN0aW9ucyIsImFjdGlvbnMiLCJOZXR3b3JrUHJlZmVyZW5jZXNBY3Rpb25zIiwib25DaGFuZ2UiLCJiaW5kIiwiaGFuZGxlTmV0d29ya0NoYW5nZSIsInN0YXRlIiwiZ2V0U3RhdGUiLCJjb21wb25lbnREaWRNb3VudCIsInByaW50ZXIiLCJ1cGRhdGVOb3RpZmljYXRpb25zIiwiYWRkTGlzdGVuZXIiLCJjbGVhckVycm9yIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJyZW1vdmVMaXN0ZW5lciIsInNldFN0YXRlIiwibmV0d29ya0NoYW5nZSIsImdldElkIiwiaGFuZGxlRGlzY29ubmVjdCIsImRpc2Nvbm5lY3RGcm9tTmV0d29yayIsImN1cnJlbnRQYXRoIiwiaGFuZGxlRHJvcGRvd25DaGFuZ2UiLCJ2YWx1ZSIsInNlbGVjdE5ldHdvcmsiLCJwcmVwb3B1bGF0ZVN0YXRpY0lQIiwiaGFuZGxlUGFzc3dvcmRDaGFuZ2UiLCJldmVudCIsImNoYW5nZVBhc3N3b3JkQXR0ZW1wdCIsInRhcmdldCIsImhhbmRsZUhpZGVQYXNzd29yZENoYW5nZSIsInRvZ2dsZVBhc3N3b3JkVmlzaWJpbGl0eSIsInRvZ2dsZVdpZmkiLCJpZCIsImVuYWJsZVdpZmkiLCJkaXNhYmxlV2lmaSIsIl9zaG91bGREaXNhYmxlVmlldyIsImNhbkVkaXRXaWZpIiwiX2N1cnJlbnROZXR3b3JrIiwic2VsZWN0ZWROZXR3b3JrIiwibGlmdCIsIm5ldHdvcmtTdGF0ZSIsIl9jdXJyZW50TmV0d29ya1BhdGgiLCJjb25uZWN0ZWRCeUV0aGVybmV0IiwiRVRIRVJORVQiLCJnZXRQYXRoIiwicmVuZGVyTWVzc2FnZVZpZXciLCJkaXYiLCJjbGFzc05hbWUiLCJwIiwic3R5bGUiLCJsaW5lSGVpZ2h0IiwibWFyZ2luIiwiY3VycmVudE1lc3NhZ2UiLCJtYXAiLCJ0IiwicmVuZGVyRXJyb3JWaWV3Iiwid2lkdGgiLCJoZWlnaHQiLCJ2aWV3Qm94IiwiY3VycmVudEVycm9yIiwiZXJyIiwia2V5IiwiY2FtZWxDYXNlIiwiZmFsbGJhY2siLCJzdGFydENhc2UiLCJyZWYiLCJ4bGlua0hyZWYiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwic3BhbiIsImV4aXN0cyIsInJlbmRlclN0YXR1c1ZpZXciLCJwYWRkaW5nQm90dG9tIiwiZm9udFdlaWdodCIsIm1hcmdpbkJvdHRvbSIsInN0YXR1c01zZyIsImNoZWNrZWQiLCJsYWJlbCIsImxhYmVsQ2xhc3NOYW1lcyIsImRpc2FibGVkIiwicmVuZGVyUmVmcmVzaEJ1dHRvbiIsIndhaXRpbmciLCJidXR0b25Qcm9wcyIsInBhZGRpbmciLCJ0eXBlIiwib25DbGljayIsInJlbmRlckRpc2Nvbm5lY3RCdXR0b24iLCJyZW5kZXJOZXR3b3Jrc1ZpZXciLCJuZXR3b3JrSXNTZWxlY3RlZCIsIm5ldHdvcmtWaWV3Qm9keUNsYXNzZXMiLCJwbGFjZWhvbGRlciIsImF2YWlsYWJsZU5ldHdvcmtzIiwibGVuZ3RoIiwib3B0aW9ucyIsInJlZHVjZSIsImFjYyIsInYiLCJjb25jYXQiLCJuYW1lIiwibWFyZ2luVG9wIiwiZGlzcGxheSIsImZsZXgiLCJkaXNhYmxlRXhwYW5kT3V0T2ZQYW5lbCIsInJlbmRlckNvbm5lY3RWaWV3IiwiY29ubmVjdFZpZXdCb2R5Q2xhc3NlcyIsInB3UmVxdWlyZWQiLCJuZXR3b3JrIiwicGFzc3dvcmQiLCJyZW5kZXJQYXNzd29yZElucHV0IiwiaGFuZGxlQ29ubmVjdEJ1dHRvbkNsaWNrZWQiLCJjb25uZWN0VG9OZXR3b3JrIiwicGFzc3dvcmRBdHRlbXB0IiwicGFzc3dvcmRJbnB1dEJvZHlDbGFzc2VzIiwiaW5wdXQiLCJzaG93UGFzc3dvcmQiLCJvbktleURvd24iLCJyZW5kZXIiLCJzdGF0aWNJUHByb3BzIiwiZW5hYmxlU3RhdGljSVAiLCJzdGF0aWNJUEVkaXRlZCIsInN0YXRpY0lQQWRkcmVzcyIsIm5ldG1hc2siLCJnYXRld2F5IiwiZG5zU2VydmVycyIsImVkaXRTdGF0aWNJUEFkZHJlc3MiLCJlZGl0TmV0bWFzayIsImVkaXRHYXRld2F5IiwibmV3RE5TSXRlbSIsImNhbkVkaXQiLCJjYW5FZGl0U3RhdGljSVAiLCJwb3NpdGlvbiIsIm9uQmFjayIsIm9uQ2xvc2UiLCJvdmVyZmxvd1kiLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJpc0VtcHR5IiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwiZnVuYyIsInN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTUMsR0FBRyxHQUFHRixLQUFLLENBQUNFLEdBQWxCO0FBQ0EsTUFBTUMsRUFBRSxHQUFHSCxLQUFLLENBQUNJLGFBQWpCOztBQUNBLE1BQU1DLElBQUksR0FBR0osT0FBTyxDQUFDLGlCQUFELENBQXBCOztBQUNBLE1BQU1LLENBQUMsR0FBR0wsT0FBTyxDQUFDLFFBQUQsQ0FBakI7O0FBQ0EsTUFBTU0sSUFBSSxHQUFHTixPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFDQSxNQUFNTyxVQUFVLEdBQUdQLE9B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QUFDZ0ssT0FBRixDQUFVLEtBQUtwSSxLQUFMLENBQVdrQyxZQUFyQixDQUFELEdBQXNDLEtBQUsrQixnQkFBTCxFQUF0QyxHQUFnRSxJQVZyRSxFQVdLLEtBQUtqRSxLQUFMLENBQVcyQixVQUFYLEdBQXdCLEtBQUtzRCxrQkFBTCxFQUF4QixHQUFvRCxJQVh6RCxlQVlJLG9CQUFDLFFBQUQsRUFBYzhCLGFBQWQsQ0FaSixDQW5CSixlQWtDSTtBQUFLLE1BQUEsU0FBUyxFQUFFO0FBQWhCLG9CQUNJO0FBQUssTUFBQSxLQUFLLEVBQUU7QUFBRTNDLFFBQUFBLFlBQVksRUFBRTtBQUFoQjtBQUFaLE1BREosQ0FsQ0osQ0FESjtBQXdDSDs7QUF0WDBDOztBQXlYL0NwRixrQkFBa0IsQ0FBQ3FKLFdBQW5CLEdBQWlDLG9CQUFqQztBQUNBckosa0JBQWtCLENBQUNzSixTQUFuQixHQUErQjtBQUMzQmxKLEVBQUFBLElBQUksRUFBRXRCLEtBQUssQ0FBQ3lLLFNBQU4sQ0FBZ0JDLE1BQWhCLENBQXVCQyxVQURGO0FBRTNCWixFQUFBQSxNQUFNLEVBQUUvSixLQUFLLENBQUN5SyxTQUFOLENBQWdCRyxJQUFoQixDQUFxQkQsVUFGRjtBQUczQlgsRUFBQUEsT0FBTyxFQUFFaEssS0FBSyxDQUFDeUssU0FBTixDQUFnQkcsSUFBaEIsQ0FBcUJELFVBSEg7QUFJM0J0SSxFQUFBQSxPQUFPLEVBQUVyQyxLQUFLLENBQUN5SyxTQUFOLENBQWdCQyxNQUFoQixDQUF1QkMsVUFKTDtBQUszQmhHLEVBQUFBLFNBQVMsRUFBRTNFLEtBQUssQ0FBQ3lLLFNBQU4sQ0FBZ0JJO0FBTEEsQ0FBL0I7QUFRQSxNQUFNckcsT0FBTyxHQUFHNUQsV0FBVyxDQUFDLE1BQUQsQ0FBM0I7QUFFQWtLLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjdKLGtCQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IFJlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcclxuY29uc3QgRE9NID0gUmVhY3QuRE9NO1xyXG5jb25zdCBjZSA9IFJlYWN0LmNyZWF0ZUVsZW1lbnQ7XHJcbmNvbnN0IElzdmcgPSByZXF1aXJlKCdyZWFjdC1pbmxpbmVzdmcnKTtcclxuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBjbGFzc05hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xyXG5jb25zdCBDaGVja2JveCA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL3VpL2lucHV0X2NoZWNrYm94Jyk7XHJcbmNvbnN0IERyb3Bkb3duID0gcmVxdWlyZSgnZWFnbGUtcHJpbnQvdmlld3MvdWkvaW5wdXRfZHJvcGRvd24nKTtcclxuY29uc3QgRmx1eENvbXBvbmVudCA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL2ZsdXhfY29tcG9uZW50Jyk7XHJcblxyXG5jb25zdCB7IGdldFByb3BMaWZ0IH0gPSByZXF1aXJlKCcuLi8uLi8uLi91dGlscy9tYXliZScpO1xyXG5jb25zdCBXYWl0YWJsZUJ1dHRvbiA9IHJlcXVpcmUoJy4uL1dhaXRhYmxlQnV0dG9uJyk7XHJcbmNvbnN0IEhlYWRlclNlbGVjdEJ1dHRvbiA9IHJlcXVpcmUoJy4uL2hlYWRlclNlbGVjdEJ1dHRvbicpO1xyXG5jb25zdCBTdGF0aWNJUCA9IHJlcXVpcmUoJy4vc3RhdGljSVAnKTtcclxuY29uc3QgeyBDSEFOR0VfRVZFTlQsIE5ldHdvcmtTdGF0ZUVudW0gfSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbnN0YW50cy9uZXR3b3JrUHJlZmVyZW5jZXMnKTtcclxuXHJcbmNsYXNzIE5ldHdvcmtQcmVmZXJlbmNlcyBleHRlbmRzIEZsdXhDb21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2kxOG4gPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnVHJhbnNsYXRpb25TZXJ2aWNlJyk7XHJcbiAgICAgICAgdGhpcy5fdHJhY2tpbmdTZXJ2aWNlID0gdGhpcy5wcm9wcy5mbHV4LmdldFNlcnZpY2UoJ1RyYWNraW5nU2VydmljZScpO1xyXG4gICAgICAgIHRoaXMuX2xvZ2dpbmdTZXJ2aWNlID0gdGhpcy5wcm9wcy5mbHV4LmdldFNlcnZpY2UoJ0xvZ2dpbmdTZXJ2aWNlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX3N0b3JlID0gdGhpcy5wcm9wcy5mbHV4LnN0b3JlKCdOZXR3b3JrUHJlZmVyZW5jZXNTdG9yZScpO1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMgPSB0aGlzLnByb3BzLmZsdXguYWN0aW9ucy5OZXR3b3JrUHJlZmVyZW5jZXNBY3Rpb25zO1xyXG5cclxuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlTmV0d29ya0NoYW5nZSA9IHRoaXMuaGFuZGxlTmV0d29ya0NoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLl9zdG9yZS5nZXRTdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIHRoaXMuaGFuZGxlTmV0d29ya0NoYW5nZSgpO1xyXG5cclxuICAgICAgICB0aGlzLnByb3BzLnByaW50ZXIudXBkYXRlTm90aWZpY2F0aW9ucy5hZGRMaXN0ZW5lcignbmV0d29ya19zdGF0ZV9jaGFuZ2UnLCB0aGlzLmhhbmRsZU5ldHdvcmtDaGFuZ2UpO1xyXG4gICAgICAgIHRoaXMucHJvcHMucHJpbnRlci51cGRhdGVOb3RpZmljYXRpb25zLmFkZExpc3RlbmVyKCdjb25uX3R5cGVfY2hhbmdlJywgdGhpcy5oYW5kbGVOZXR3b3JrQ2hhbmdlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc3RvcmUuYWRkTGlzdGVuZXIoQ0hBTkdFX0VWRU5ULCB0aGlzLm9uQ2hhbmdlKTtcclxuICAgICAgICB0aGlzLl9hY3Rpb25zLmNsZWFyRXJyb3IoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICB0aGlzLnByb3BzLnByaW50ZXIudXBkYXRlTm90aWZpY2F0aW9ucy5yZW1vdmVMaXN0ZW5lcignbmV0d29ya19zdGF0ZV9jaGFuZ2UnLCB0aGlzLmhhbmRsZU5ldHdvcmtDaGFuZ2UpO1xyXG4gICAgICAgIHRoaXMucHJvcHMucHJpbnRlci51cGRhdGVOb3RpZmljYXRpb25zLnJlbW92ZUxpc3RlbmVyKCdjb25uX3R5cGVfY2hhbmdlJywgdGhpcy5oYW5kbGVOZXR3b3JrQ2hhbmdlKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc3RvcmUucmVtb3ZlTGlzdGVuZXIoQ0hBTkdFX0VWRU5ULCB0aGlzLm9uQ2hhbmdlKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZSgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuX3N0b3JlLmdldFN0YXRlKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZU5ldHdvcmtDaGFuZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucy5uZXR3b3JrQ2hhbmdlKHRoaXMucHJvcHMucHJpbnRlci5nZXRJZCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEaXNjb25uZWN0KCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMuZGlzY29ubmVjdEZyb21OZXR3b3JrKHRoaXMucHJvcHMucHJpbnRlci5nZXRJZCgpLCB0aGlzLnN0YXRlLmN1cnJlbnRQYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVEcm9wZG93bkNoYW5nZSh7IHZhbHVlOiBwYXRoIH0pIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb25zLnNlbGVjdE5ldHdvcmsocGF0aCk7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucy5wcmVwb3B1bGF0ZVN0YXRpY0lQKHRoaXMucHJvcHMucHJpbnRlci5nZXRJZCgpLCBwYXRoKTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVQYXNzd29yZENoYW5nZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMuY2hhbmdlUGFzc3dvcmRBdHRlbXB0KGV2ZW50LnRhcmdldC52YWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlSGlkZVBhc3N3b3JkQ2hhbmdlKCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbnMudG9nZ2xlUGFzc3dvcmRWaXNpYmlsaXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgdG9nZ2xlV2lmaSgpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMucHJvcHMucHJpbnRlci5nZXRJZCgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5lbmFibGVXaWZpKSB0aGlzLl9hY3Rpb25zLmRpc2FibGVXaWZpKGlkKTtcclxuICAgICAgICBlbHNlIHRoaXMuX2FjdGlvbnMuZW5hYmxlV2lmaShpZCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3VsZERpc2FibGVWaWV3KCkge1xyXG4gICAgICAgIHJldHVybiAhdGhpcy5zdGF0ZS5jYW5FZGl0V2lmaSh0aGlzLnByb3BzLnByaW50ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jdXJyZW50TmV0d29yaygpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zZWxlY3RlZE5ldHdvcmsubGlmdCgpKSByZXR1cm4gdGhpcy5zdGF0ZS5zZWxlY3RlZE5ldHdvcms7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBfY3VycmVudE5ldHdvcmtQYXRoKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbm5lY3RlZEJ5RXRoZXJuZXQgPSBnZXRQcm9wTGlmdCgnc3RhdGUnLCB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0ZSkgPT09IE5ldHdvcmtTdGF0ZUVudW0uc3RhdGUuRVRIRVJORVQ7XHJcblxyXG4gICAgICAgIGlmIChjb25uZWN0ZWRCeUV0aGVybmV0KSByZXR1cm4gJ2V0aGVybmV0JztcclxuXHJcbiAgICAgICAgcmV0dXJuIGdldFBhdGgodGhpcy5zdGF0ZS5zZWxlY3RlZE5ldHdvcmspIHx8IGdldFBhdGgodGhpcy5zdGF0ZS5uZXR3b3JrU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlck1lc3NhZ2VWaWV3KCkge1xyXG4gICAgICAgIHJldHVybiBET00uZGl2KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduZXR3b3JrLXByZWZlcmVuY2VzX19zdGF0dXNfX21lc3NhZ2UgbWVzc2FnZScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIERPTS5wKHsgc3R5bGU6IHsgbGluZUhlaWdodDogMS43LCBtYXJnaW46ICc3cHggMCcgfSB9LCB0aGlzLnN0YXRlLmN1cnJlbnRNZXNzYWdlLm1hcCh0aGlzLl9pMThuLnQpLmxpZnQoKSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckVycm9yVmlldygpIHtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IDI1O1xyXG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDI1O1xyXG4gICAgICAgIGNvbnN0IHZpZXdCb3ggPSBgMCAwICR7d2lkdGh9ICR7aGVpZ2h0fWA7XHJcblxyXG4gICAgICAgIHJldHVybiBET00uZGl2KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZTogeyBtYXJnaW46ICcxNXB4IDAnIH0sXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICduZXR3b3JrLXByZWZlcmVuY2VzX19zdGF0dXNfX2Vycm9yIGVycm9yJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50RXJyb3JcclxuICAgICAgICAgICAgICAgIC5tYXAoZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBgbWI6bmV0d29yay5lcnJvcnMuJHtfLmNhbWVsQ2FzZShlcnIpfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2sgPSBfLnN0YXJ0Q2FzZShlcnIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjogJ2Vycm9ySWNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZXJyb3ItaWNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdCb3gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2UoJ2ltYWdlJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4bGlua0hyZWY6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9pbWFnZXMvYWxlcnQtaWNvbi13aGl0ZS5zdmcnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERPTS5zcGFuKHsgY2xhc3NOYW1lOiAnZXJyb3ItdGV4dCcgfSwgdGhpcy5faTE4bi5leGlzdHMoa2V5KSA/IHRoaXMuX2kxOG4udChrZXkpIDogZmFsbGJhY2spLFxyXG4gICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmxpZnQoKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU3RhdHVzVmlldygpIHtcclxuICAgICAgICByZXR1cm4gRE9NLmRpdihcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHsgcGFkZGluZ0JvdHRvbTogMCB9LFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmV0d29yay1wcmVmZXJlbmNlc19fc3RhdHVzIHBhbmVsLWJvZHknLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBET00uZGl2KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7IGZvbnRXZWlnaHQ6ICdib2xkJywgbWFyZ2luQm90dG9tOiAnMHB4JyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2hlYWRlcicsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLmhlYWRlci5zdGF0dXMnKSxcclxuICAgICAgICAgICAgICAgICc6ICcsXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnN0YXR1c01zZy5tYXAodGhpcy5faTE4bi50KS5saWZ0KClcclxuICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlVmlldygpLFxyXG4gICAgICAgICAgICBjZShDaGVja2JveCwge1xyXG4gICAgICAgICAgICAgICAgcmVmOiAnd2lmaUNoZWNrYm94JyxcclxuICAgICAgICAgICAgICAgIGNoZWNrZWQ6IHRoaXMuc3RhdGUuZW5hYmxlV2lmaSxcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOm5ldHdvcmsuY2hlY2tib3guZW5hYmxlV2lmaScpLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lczogJ3dpZmktY2hlY2tib3gnLFxyXG4gICAgICAgICAgICAgICAgbGFiZWxDbGFzc05hbWVzOiAnc3RhdHVzLWNoZWNrYm94LWxhYmVsJyxcclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlOiAoKSA9PiB0aGlzLnRvZ2dsZVdpZmkoKSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLl9zaG91bGREaXNhYmxlVmlldygpLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJFcnJvclZpZXcoKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyUmVmcmVzaEJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMucHJvcHMucHJpbnRlci5nZXRJZCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY2UoV2FpdGFibGVCdXR0b24sIHtcclxuICAgICAgICAgICAgd2FpdGluZzogdGhpcy5zdGF0ZS53YWl0aW5nLFxyXG4gICAgICAgICAgICBidXR0b25Qcm9wczoge1xyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiAnMCAxNXB4JywgcGFkZGluZzogJzhweCAxMnB4JyB9LFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3NlY29uZGFyeScsXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyZWZyZXNoLWJ1dHRvbicsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLmJ1dHRvbi5yZWZyZXNoJyksXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLl9hY3Rpb25zLm5ldHdvcmtDaGFuZ2UoaWQpLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckRpc2Nvbm5lY3RCdXR0b24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGNlKFdhaXRhYmxlQnV0dG9uLCB7XHJcbiAgICAgICAgICAgIHdhaXRpbmc6IHRoaXMuc3RhdGUud2FpdGluZyxcclxuICAgICAgICAgICAgYnV0dG9uUHJvcHM6IHtcclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7IG1hcmdpbjogJzAgMTVweCcsIHBhZGRpbmc6ICc4cHggMTJweCcgfSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdzZWNvbmRhcnknLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZGlzY29ubmVjdC1idXR0b24nLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6bmV0d29yay5idXR0b24uZGlzY29ubmVjdCcpLFxyXG4gICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5oYW5kbGVEaXNjb25uZWN0KCksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyTmV0d29ya3NWaWV3KCkge1xyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtJc1NlbGVjdGVkID0gdGhpcy5zdGF0ZS5zZWxlY3RlZE5ldHdvcmsubWFwKCgpID0+IHRydWUpLmxpZnQoKSB8fCBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV0d29ya1ZpZXdCb2R5Q2xhc3NlcyA9IGNsYXNzTmFtZXMoJ25ldHdvcmstcHJlZmVyZW5jZXNfX25ldHdvcmtzX19ib2R5Jywge1xyXG4gICAgICAgICAgICAndmlldy1kaXNhYmxlZCc6IHRoaXMuX3Nob3VsZERpc2FibGVWaWV3KCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID1cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hdmFpbGFibGVOZXR3b3Jrcy5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICA/IGdldFByb3BMaWZ0KCduYW1lJywgdGhpcy5zdGF0ZS5uZXR3b3JrU3RhdGUpIHx8IHRoaXMuX2kxOG4udCgnbWI6bmV0d29yay5kcm9wZG93bi5jaG9vc2VBTmV0d29yaycpXHJcbiAgICAgICAgICAgICAgICA6ICdObyBOZXR3b3JrcyBBdmFpbGFibGUnO1xyXG5cclxuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5zdGF0ZS5hdmFpbGFibGVOZXR3b3Jrcy5yZWR1Y2UoKGFjYywgdikgPT4gYWNjLmNvbmNhdCh7IGxhYmVsOiB2Lm5hbWUsIHZhbHVlOiB2LnBhdGggfSksIFtcclxuICAgICAgICAgICAgeyBsYWJlbDogcGxhY2Vob2xkZXIsIHZhbHVlOiAnJyB9LFxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGdldFBhdGgodGhpcy5zdGF0ZS5zZWxlY3RlZE5ldHdvcmspO1xyXG5cclxuICAgICAgICByZXR1cm4gRE9NLmRpdihcclxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICduZXR3b3JrLXByZWZlcmVuY2VzX19uZXR3b3JrcycgfSxcclxuICAgICAgICAgICAgRE9NLmRpdihcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBwYWRkaW5nQm90dG9tOiAwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncGFuZWwtYm9keScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgRE9NLmRpdihcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7IGZvbnRXZWlnaHQ6ICdib2xkJywgbWFyZ2luVG9wOiAnMHB4JyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdoZWFkZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLmhlYWRlci5uZXR3b3JrJyksXHJcbiAgICAgICAgICAgICAgICAgICAgJzogJ1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgIERPTS5kaXYoXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBkaXNwbGF5OiAnZmxleCcsIG1hcmdpbjogJzVweCAwJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG5ldHdvcmtWaWV3Qm9keUNsYXNzZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBjZShEcm9wZG93biwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY6ICduZXR3b3Jrc0Ryb3Bkb3duJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgZmxleDogMiwgd2lkdGg6ICcxMDAlJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogZXZlbnQgPT4gdGhpcy5oYW5kbGVEcm9wZG93bkNoYW5nZShldmVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVFeHBhbmRPdXRPZlBhbmVsOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0UHJvcExpZnQoJ3N0YXRlJywgdGhpcy5zdGF0ZS5uZXR3b3JrU3RhdGUpID09PSAnd2lmaSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnJlbmRlckRpc2Nvbm5lY3RCdXR0b24oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMucmVuZGVyUmVmcmVzaEJ1dHRvbigpXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICksXHJcbiAgICAgICAgICAgIG5ldHdvcmtJc1NlbGVjdGVkID8gdGhpcy5yZW5kZXJDb25uZWN0VmlldygpIDogbnVsbFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyQ29ubmVjdFZpZXcoKSB7XHJcbiAgICAgICAgY29uc3QgY29ubmVjdFZpZXdCb2R5Q2xhc3NlcyA9IGNsYXNzTmFtZXMoXHJcbiAgICAgICAgICAgICduZXR3b3JrLXByZWZlcmVuY2VzX19uZXR3b3Jrc19fY29ubmVjdCBmb3JtLWdyb3VwIGF1dGgtaW5wdXQgcGFuZWwtYm9keScsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICd2aWV3LWRpc2FibGVkJzogdGhpcy5fc2hvdWxkRGlzYWJsZVZpZXcoKSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnN0IHB3UmVxdWlyZWQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkTmV0d29ya1xyXG4gICAgICAgICAgICAubWFwKG5ldHdvcmsgPT4gbmV0d29yay5wYXNzd29yZCA9PT0gJ3JlcXVpcmVkJyAmJiBnZXRQcm9wTGlmdCgnc3RhdGUnLCB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0ZSkgIT09ICd3aWZpJylcclxuICAgICAgICAgICAgLmxpZnQoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIERPTS5kaXYoXHJcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjb25uZWN0Vmlld0JvZHlDbGFzc2VzIH0sXHJcbiAgICAgICAgICAgIHB3UmVxdWlyZWQgPyB0aGlzLnJlbmRlclBhc3N3b3JkSW5wdXQoKSA6IG51bGwsXHJcbiAgICAgICAgICAgIGNlKFdhaXRhYmxlQnV0dG9uLCB7XHJcbiAgICAgICAgICAgICAgICB3YWl0aW5nOiB0aGlzLnN0YXRlLndhaXRpbmcsXHJcbiAgICAgICAgICAgICAgICBidXR0b25Qcm9wczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7IG1hcmdpbjogJzEycHggMCcsIHBhZGRpbmc6ICc4cHggMTJweCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncHJpbWFyeScsXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbmV0d29yay1idXR0b24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOm5ldHdvcmsuYnV0dG9uLmNvbm5lY3QnKSxcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLmhhbmRsZUNvbm5lY3RCdXR0b25DbGlja2VkKCksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQ29ubmVjdEJ1dHRvbkNsaWNrZWQoKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLnByb3BzLnByaW50ZXIuZ2V0SWQoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYWN0aW9ucy5jb25uZWN0VG9OZXR3b3JrKGlkLCB0aGlzLl9jdXJyZW50TmV0d29ya1BhdGgoKSwgdGhpcy5zdGF0ZS5wYXNzd29yZEF0dGVtcHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlclBhc3N3b3JkSW5wdXQoKSB7XHJcbiAgICAgICAgY29uc3QgcGFzc3dvcmRJbnB1dEJvZHlDbGFzc2VzID0gY2xhc3NOYW1lcygnJywge1xyXG4gICAgICAgICAgICAndmlldy1kaXNhYmxlZCc6IHRoaXMuX3Nob3VsZERpc2FibGVWaWV3KCksXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBET00uZGl2KFxyXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogJ25ldHdvcmstcHJlZmVyZW5jZXNfX25ldHdvcmtzX19jb25uZWN0X19wYXNzd29yZC1pbnB1dCcgfSxcclxuICAgICAgICAgICAgRE9NLnNwYW4oXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHsgZm9udFdlaWdodDogJ2JvbGQnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnaGVhZGVyJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pMThuLnQoJ21iOm5ldHdvcmsuaGVhZGVyLndpZmlQYXNzd29yZCcpLFxyXG4gICAgICAgICAgICAgICAgJzogJ1xyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgICAgICBET00uZGl2KFxyXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHBhc3N3b3JkSW5wdXRCb2R5Q2xhc3NlcyB9LFxyXG4gICAgICAgICAgICAgICAgRE9NLmlucHV0KHtcclxuICAgICAgICAgICAgICAgICAgICByZWY6ICdwYXNzd29yZElucHV0JyxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogeyBtYXJnaW46ICc1cHggMCcgfSxcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdpbnB1dC10ZXh0IG5ldHdvcmstcGFzc3dvcmQtaW5wdXQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMuc3RhdGUuc2hvd1Bhc3N3b3JkID8gJ3RleHQnIDogJ3Bhc3N3b3JkJyxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5wYXNzd29yZEF0dGVtcHQsXHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IGV2ZW50ID0+IHRoaXMuaGFuZGxlUGFzc3dvcmRDaGFuZ2UoZXZlbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bjogZXZlbnQgPT4gKGV2ZW50LmtleSA9PT0gJ0VudGVyJyA/IHRoaXMuaGFuZGxlQ29ubmVjdEJ1dHRvbkNsaWNrZWQoKSA6IG51bGwpLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBjZShDaGVja2JveCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZjogJ2hpZGVQYXNzd29yZENoZWNrYm94JyxcclxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiB0aGlzLnN0YXRlLnNob3dQYXNzd29yZCxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpuZXR3b3JrLmNoZWNrYm94LnNob3dQYXNzd29yZCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsQ2xhc3NOYW1lczogJ2hpZGUtcGFzc3dvcmQtY2hlY2tib3gtbGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZXM6ICdoaWRlLXBhc3N3b3JkLWNoZWNrYm94JyxcclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZTogKCkgPT4gdGhpcy5oYW5kbGVIaWRlUGFzc3dvcmRDaGFuZ2UoKSxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCBzdGF0aWNJUHByb3BzID0ge1xyXG4gICAgICAgICAgICBmbHV4OiB0aGlzLnByb3BzLmZsdXgsXHJcbiAgICAgICAgICAgIHByaW50ZXI6IHRoaXMucHJvcHMucHJpbnRlcixcclxuICAgICAgICAgICAgd2FpdGluZzogdGhpcy5zdGF0ZS53YWl0aW5nLFxyXG4gICAgICAgICAgICBlbmFibGVTdGF0aWNJUDogdGhpcy5zdGF0ZS5lbmFibGVTdGF0aWNJUCxcclxuICAgICAgICAgICAgc3RhdGljSVBFZGl0ZWQ6IHRoaXMuc3RhdGUuc3RhdGljSVBFZGl0ZWQsXHJcbiAgICAgICAgICAgIHN0YXRpY0lQQWRkcmVzczogdGhpcy5zdGF0ZS5zdGF0aWNJUEFkZHJlc3MsXHJcbiAgICAgICAgICAgIG5ldG1hc2s6IHRoaXMuc3RhdGUubmV0bWFzayxcclxuICAgICAgICAgICAgZ2F0ZXdheTogdGhpcy5zdGF0ZS5nYXRld2F5LFxyXG4gICAgICAgICAgICBkbnNTZXJ2ZXJzOiB0aGlzLnN0YXRlLmRuc1NlcnZlcnMsXHJcbiAgICAgICAgICAgIGVkaXRTdGF0aWNJUEFkZHJlc3M6IHRoaXMuc3RhdGUuZWRpdFN0YXRpY0lQQWRkcmVzcyxcclxuICAgICAgICAgICAgZWRpdE5ldG1hc2s6IHRoaXMuc3RhdGUuZWRpdE5ldG1hc2ssXHJcbiAgICAgICAgICAgIGVkaXRHYXRld2F5OiB0aGlzLnN0YXRlLmVkaXRHYXRld2F5LFxyXG4gICAgICAgICAgICBuZXdETlNJdGVtOiB0aGlzLnN0YXRlLm5ld0ROU0l0ZW0sXHJcbiAgICAgICAgICAgIGNhbkVkaXQ6IHRoaXMuc3RhdGUuY2FuRWRpdFN0YXRpY0lQKHRoaXMucHJvcHMucHJpbnRlciksXHJcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuX2N1cnJlbnROZXR3b3JrUGF0aCgpLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGlkPSduZXR3b3JrLXByZWZlcmVuY2VzJ1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgJHt0aGlzLnByb3BzLmNsYXNzTmFtZSB8fCAnbmV0d29yay1wcmVmZXJlbmNlcyd9IHByaW50ZXJQYW5lbGB9XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgaGVpZ2h0OiAnMTAwJScgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgey8qIFBBTkVMIEhFQURFUiAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludGVyUGFuZWxIZWFkZXInPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludGVyUGFuZWxCYWNrQnV0dG9uJyBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQmFja30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxJc3ZnIHNyYz0naWNvbnMvYmFjay1hcnJvdy5zdmcnIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByaW50ZXJQYW5lbEhlYWRlckxhYmVsJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPnt0aGlzLl9pMThuLnQoJ21iOm5ldHdvcmsuaGVhZGVyLm1haW4nKX08L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxIZWFkZXJTZWxlY3RCdXR0b24gZmx1eD17dGhpcy5wcm9wcy5mbHV4fSBwcmludGVyPXt0aGlzLnByb3BzLnByaW50ZXJ9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByaW50ZXJQYW5lbEFycm93RG93bicgb25DbGljaz17dGhpcy5wcm9wcy5vbkNsb3NlfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPElzdmcgc3JjPSdpY29ucy9iYWNrLWFycm93LnN2ZycgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgey8qIFBBTkVMIEJPRFkgKi99XHJcbiAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDYwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgeyFfLmlzRW1wdHkodGhpcy5zdGF0ZS5uZXR3b3JrU3RhdGUpID8gdGhpcy5yZW5kZXJTdGF0dXNWaWV3KCkgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVuYWJsZVdpZmkgPyB0aGlzLnJlbmRlck5ldHdvcmtzVmlldygpIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8U3RhdGljSVAgey4uLnN0YXRpY0lQcHJvcHN9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIHsvKiBQQU5FTCBGT09URVIgUElMTCAqL31cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXsncHJpbnRlclBhbmVsJ30+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDUwIH19PjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbk5ldHdvcmtQcmVmZXJlbmNlcy5kaXNwbGF5TmFtZSA9ICdOZXR3b3JrUHJlZmVyZW5jZXMnO1xyXG5OZXR3b3JrUHJlZmVyZW5jZXMucHJvcFR5cGVzID0ge1xyXG4gICAgZmx1eDogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgb25CYWNrOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgb25DbG9zZTogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIHByaW50ZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIGNsYXNzTmFtZTogUmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcclxufTtcclxuXHJcbmNvbnN0IGdldFBhdGggPSBnZXRQcm9wTGlmdCgncGF0aCcpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOZXR3b3JrUHJlZmVyZW5jZXM7XHJcbiJdfQ==
