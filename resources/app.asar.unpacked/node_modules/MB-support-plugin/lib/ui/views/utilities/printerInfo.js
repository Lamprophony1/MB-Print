'use strict';

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

const React = require('react');

const Isvg = require('react-inlinesvg');

const _ = require('lodash');

const q = require('q');

const classNames = require('classnames');

const Button = require('eagle-print/views/ui/button');

const util = require('../../../util');

const NetworkStateEnum = require('../../../constants').NetworkStateEnum;

const HeaderSelectButton = require('../headerSelectButton');

const PrinterInfoRow = require('./printerInfoComponents/PrinterInfoRow');

const PrinterInfoTitle = require('./printerInfoComponents/PrinterInfoTitle');

class PrinterInfo extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      newPrinterName: '',
      printerName: this.props.printer.getName(),
      disableUpdate: true,
      network: {},
      extruders: {}
    };
    this._i18n = this.props.flux.getService('TranslationService');
    this._trackingService = this.props.flux.getService('TrackingService');
  }

  componentWillMount() {
    this.getPrinterInfo();
  }

  getPrinterInfo() {
    const networkState = () => {
      if (this.props.printer.isSketchPrinter()) return this.props.printer.getNetworkState();
      return this.props.printer.invoke('NetworkState').then(networkState => {
        const networkInfo = {};

        if (networkState) {
          networkInfo.subnet = networkState.netmask;
          networkInfo.gateway = networkState.gateway;
          networkInfo.dns = networkState.dns;
          networkInfo.state = networkState.state;
          if (networkState.state === NetworkStateEnum.state.WIFI) networkInfo.wifi = networkState.name;else networkInfo.wifi = this._i18n.t('mb:printerInfo.n_a');
        }

        return networkInfo;
      });
    };

    const extruderStats = () => {
      return this.props.printer.getAllExtruderInfo().then(extrudersInfo => {
        if (_.isEmpty(extrudersInfo)) return;
        const extruderStats = [];
        extrudersInfo.map((extruderInfo, index) => {
          extruderStats[index] = {
            temp: extruderInfo.current_temperature,
            extruder_version: extruderInfo.extruder_type,
            print_time: extruderInfo.extruder_print_time,
            filamentExtruded: extruderInfo.extrusion_distance_mm / 1000,
            mass: extruderInfo.extrusion_mass_g / 1000,
            serial: extruderInfo.serial ? this.serialNoFormat(extruderInfo.serial) : this._i18n.t('mb:printerInfo.n_a')
          };
        });
        return extruderStats;
      });
    };

    const systemInfo = () => {
      return this.props.printer.getSystemInfo();
    };

    const spoolInfo = () => {
      return this.props.printer.getSpoolInfo();
    };

    q.all([networkState(), extruderStats(), systemInfo(), spoolInfo()]).then(([network, extruders, systemInfo, spoolInfo]) => {
      const stateChanges = {
        network,
        extruders,
        systemInfo,
        spoolInfo
      };
      this.setState(stateChanges);
      return systemInfo;
    }).catch(console.error);
  }

  getMaterial(extruderIndex) {
    const printSettings = this.props.flux.store('PrintSettingsStore').getState();
    const filamentBay = this.state.systemInfo && this.state.systemInfo.filamentbays ? this.state.systemInfo.filamentbays[extruderIndex] : null;

    if (!this.state.systemInfo) {
      return this._i18n.t('mb:printerInfo.placeHolder');
    }

    if (filamentBay) {
      if (filamentBay.tag_present === 1) {
        const spoolInfo = this.state.spoolInfo;

        if (spoolInfo && spoolInfo[extruderIndex] && spoolInfo[extruderIndex].material_name) {
          return util.getMaterialPrettyStringFromCode(spoolInfo[extruderIndex].material_name);
        } else {
          // If there is a spool tag, but we don't have spool information, we assume
          // it's because we're still waiting for it, so we use '...'
          return this._i18n.t('mb:printerInfo.placeHolder');
        }
      } else {
        // If there is no spool tag, then there is no info to detect, so
        // we use 'Unknown Material' as the placeholder
        return this._i18n.t('mb:printerInfo.unknown');
      } // If there is no filament bay, get material info from the print settings store

    } else {
      const material = printSettings.materials.selected[extruderIndex];

      if (material !== undefined) {
        const materialTranslation = printSettings.materials.translations[material].name;
        return materialTranslation;
      }
    }

    return this._i18n.t('mb:printerInfo.unknown');
  }
  /**
   * Converts the recieved serial number in '12345' format to '0000-0001-2345' format
   * @param {number} serial - extruders serial number recieved
   **/


  serialNoFormat(serial) {
    let serialRecieved = serial.toString();

    while (serialRecieved.length < 12) {
      serialRecieved = `0${serialRecieved}`;
    }

    serialRecieved = serialRecieved.match(/.{4}/g).join('-');
    return serialRecieved;
  }
  /**
   * Adds event to tracking service
   * @param {string} name - message to track
   */


  addTrackingEvent(name) {
    const merged = _.merge({
      name
    }, this.props.printer.getTrackingInfo());

    this._trackingService.addEvent(merged);
  }

  updatePrinterName() {
    if (!this.state.disableUpdate) {
      this.setState({
        disableUpdate: true
      });
      this.props.printer.invoke('ChangeMachineName', [this.state.newPrinterName]).then(() => {
        this.addTrackingEvent('Printer Name Update Successful');
        this.setState({
          printerName: this.state.newPrinterName
        });
        this.refs.printerNameInput.value = '';
      }).catch(err => {
        this.addTrackingEvent('Printer Name Update Failed');
      });
    } else {
      this.addTrackingEvent('Printer Name Update Failed - invalid name');
    }
  }

  handleInputChange(e) {
    const newName = e.target.value;
    let disableUpdate = true;
    if (newName.length > 0 && newName.length < 150) disableUpdate = false;
    if (this.props.printer.isSketchPrinter()) disableUpdate = true;
    this.setState({
      newPrinterName: newName,
      disableUpdate
    });
  }

  formatLoadDate(secsFromEpochToLoad) {
    /**
     * To derive the date when a spool was loaded in bot, FW provides a couple of options:
     * 1. first_load_date = # of days since Jan 1st, 2000 (arbitrary, requires more JS date finesse - should be depricated)
     * 2. first_load_seconds = # of seconds since Jan 1st, 1970 (standard Epoch timestamp - all clients should use this)
     * Note: JS Date constructor accepts ms so (sec * 1000) is passed in -> then reformatted for the UI
     **/
    const loadDate = new Date(secsFromEpochToLoad * 1000);
    return loadDate.toLocaleDateString().replace(/[/]/g, '.');
  }

  formatMaterialAmounts(remainingMaterial, originalAmount, linearDensity) {
    const remainingMaterialMass = Math.floor(util.filamentLengthToMass(remainingMaterial, linearDensity));
    const originalAmountMass = Math.floor(util.filamentLengthToMass(originalAmount, linearDensity));

    const materialText = this._i18n.t('mb:printerInfo.filamentBay.material_amount_text', {
      remainingMaterialMass,
      originalAmountMass
    });

    return materialText;
  }

  renderUpdatePrinterName() {
    const buttonClass = classNames('update-button', {
      disabled: this.state.disableUpdate
    });

    const UpdateButton = () => {
      return /*#__PURE__*/React.createElement(Button, {
        style: {
          margin: '0 15px',
          padding: '8px 12px'
        },
        type: "secondary",
        classNames: buttonClass,
        label: this._i18n.t('mb:printerInfo.update'),
        onClick: () => this.updatePrinterName()
      });
    };

    return /*#__PURE__*/React.createElement("div", {
      className: "printerInfoPanel"
    }, /*#__PURE__*/React.createElement(PrinterInfoRow, {
      label: this._i18n.t('mb:printerInfo.printerName'),
      value: this.state.printerName
    }), /*#__PURE__*/React.createElement("div", {
      className: "printerUpdateName"
    }, /*#__PURE__*/React.createElement("input", {
      className: "truncate",
      id: "inputPrinterName",
      ref: "printerNameInput",
      type: "text",
      placeholder: this.state.printerName,
      onChange: event => this.handleInputChange(event),
      onKeyDown: event => event.key === 'Enter' ? this.updatePrinterName() : null,
      autoFocus: true
    }), /*#__PURE__*/React.createElement(UpdateButton, null)), /*#__PURE__*/React.createElement(PrinterInfoRow, {
      label: this._i18n.t('mb:printerInfo.firmware'),
      value: this.props.printer.getInfo().firmware_version
    }));
  }

  renderDNS() {
    if (!!this.state.network.dns && this.state.network.dns.length > 0) {
      const dns = this.state.network.dns.map(eachDNS => /*#__PURE__*/React.createElement("div", {
        className: "dns",
        key: eachDNS
      }, eachDNS));
      return dns;
    } else {
      return this._i18n.t('mb:printerInfo.placeHolder');
    }
  }

  renderNetwork() {
    const printerMAC = this.props.printer.getId().substring(18).match(/.{2}/g).join(':');

    const valuePlaceholder = this._i18n.t('mb:printerInfo.placeHolder');

    const networkInfoRows = [{
      label: this._i18n.t('mb:printerInfo.network.connectionType'),
      value: this.state.network.state || valuePlaceholder
    }, {
      label: this._i18n.t('mb:printerInfo.network.ip'),
      value: this.props.printer.getIpAddress() || valuePlaceholder
    }, {
      label: this._i18n.t('mb:printerInfo.network.subnet'),
      value: this.state.network.subnet || valuePlaceholder
    }, {
      label: this._i18n.t('mb:printerInfo.network.gateway'),
      value: this.state.network.gateway || valuePlaceholder
    }, {
      label: this._i18n.t('mb:printerInfo.network.dns'),
      value: this.renderDNS()
    }, {
      label: this._i18n.t('mb:printerInfo.network.wifi'),
      value: this.state.network.wifi || valuePlaceholder
    }, {
      label: this._i18n.t('mb:printerInfo.network.mac'),
      value: printerMAC || valuePlaceholder
    }];
    return /*#__PURE__*/React.createElement("div", {
      className: "printerInfoPanel"
    }, /*#__PURE__*/React.createElement(PrinterInfoTitle, {
      title: this._i18n.t('mb:printerInfo.network.title')
    }), networkInfoRows.map(props => {
      return /*#__PURE__*/React.createElement(PrinterInfoRow, _extends({
        key: `network ${props.label}`
      }, props));
    }));
  }

  renderMechanical() {
    const valuePlaceholder = this._i18n.t('mb:printerInfo.placeHolder');

    if (!(this.state && this.state.systemInfo && this.state.systemInfo.toolheads && this.state.systemInfo.toolheads.chamber)) {
      return;
    }

    const mechanicalInfoRows = [{
      label: this._i18n.t('mb:printerInfo.mechanical.chamber_temp'),
      value: this.state.systemInfo.toolheads.chamber[0].current_temperature + this._i18n.t('mb:printerInfo.extruder.temp_unit') || valuePlaceholder
    }];
    return /*#__PURE__*/React.createElement("div", {
      className: "printerInfoPanel"
    }, /*#__PURE__*/React.createElement(PrinterInfoTitle, {
      title: `${this._i18n.t('mb:printerInfo.mechanical.title')}`
    }), mechanicalInfoRows.map(props => {
      return /*#__PURE__*/React.createElement(PrinterInfoRow, _extends({
        key: `mechanical ${props.label}`
      }, props));
    }));
  }

  renderExtruder() {
    const valuePlaceholder = this._i18n.t('mb:printerInfo.placeHolder');

    const extruders = this.props.printer.getAttachedExtruders();
    const isDual = extruders.length > 1;
    const extruderComponents = extruders.map((attachedExtruder, extruderIndex) => {
      const extruder = this.state.extruders ? this.state.extruders[extruderIndex] : null; // at Method launch, Kaiten isn't returning print_time (aka extrusion_time_s)
      // so only showing on single extrusion bots until we can display something

      const extruderInfoRows = [{
        label: this._i18n.t('mb:printerInfo.extruder.temp'),
        value: extruder && extruder.temp ? extruder.temp + this._i18n.t('mb:printerInfo.extruder.temp_unit') : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.extruder.version'),
        value: extruder && extruder.extruder_version ? extruder.extruder_version : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.extruder.material'),
        value: this.getMaterial(extruderIndex)
      }, !isDual ? {
        label: this._i18n.t('mb:printerInfo.extruder.print_time'),
        value: extruder && extruder.print_time ? extruder.print_time : valuePlaceholder
      } : {
        label: '',
        value: ''
      }, {
        label: this._i18n.t('mb:printerInfo.extruder.filament'),
        value: extruder && extruder.filamentExtruded ? JSON.stringify(extruder.filamentExtruded) + this._i18n.t('mb:printerInfo.extruder.filament_unit') : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.extruder.mass'),
        value: extruder && extruder.mass ? JSON.stringify(extruder.mass) + this._i18n.t('mb:printerInfo.extruder.mass_unit') : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.extruder.serial'),
        value: extruder && extruder.serial ? extruder.serial : valuePlaceholder
      }];
      return /*#__PURE__*/React.createElement("div", {
        className: "printerInfoPanel",
        key: extruderIndex + 1
      }, /*#__PURE__*/React.createElement(PrinterInfoTitle, {
        title: `${this._i18n.t('mb:printerInfo.extruder.title')} ${isDual ? extruderIndex + 1 : ''}`
      }), extruderInfoRows.map(props => {
        return /*#__PURE__*/React.createElement(PrinterInfoRow, _extends({
          key: `extruder${extruderIndex} ${props.label}`
        }, props));
      }));
    });
    return extruderComponents;
  }

  renderMaterialBays() {
    if (!this.state.systemInfo || !this.state.systemInfo.filamentbays || !this.state.spoolInfo) {
      return;
    }

    const spoolInfo = this.state.spoolInfo;
    return this.state.systemInfo.filamentbays.map((filamentBay, bayIndex) => {
      /*
       * If there is a spool tag, but we don't have spool information, we assume
       * it's because we're still waiting for it, so we use '...'
       * If there is no spool tag, then there is no info to detect, so
       * we use 'Not Detected' as the placeholder
       */
      const valuePlaceholder = filamentBay.tag_present === 1 ? this._i18n.t('mb:printerInfo.placeHolder') : this._i18n.t('mb:printerInfo.not_detected');
      const spoolInfoRows = [{
        label: this._i18n.t('mb:printerInfo.filamentBay.material_type'),
        value: spoolInfo[bayIndex] && spoolInfo[bayIndex].material_type !== undefined ? util.getMaterialPrettyStringFromCode(spoolInfo[bayIndex].material_name) : this._i18n.t('mb:printerInfo.unknown')
      }, {
        label: this._i18n.t('mb:printerInfo.filamentBay.material_color'),
        value: spoolInfo[bayIndex] && spoolInfo[bayIndex].material_color_name ? spoolInfo[bayIndex].material_color_name : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.filamentBay.material_amount'),
        value: spoolInfo[bayIndex] && spoolInfo[bayIndex].amount_remaining !== undefined && spoolInfo[bayIndex].original_amount !== undefined ? this.formatMaterialAmounts(spoolInfo[bayIndex].amount_remaining, spoolInfo[bayIndex].original_amount, spoolInfo[bayIndex].linear_density) : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.filamentBay.first_used'),
        value: spoolInfo[bayIndex] && spoolInfo[bayIndex].first_load_date !== undefined ? this.formatLoadDate(spoolInfo[bayIndex].first_load_secs) : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.filamentBay.highest_humidity_level'),
        value: spoolInfo[bayIndex] && spoolInfo[bayIndex].max_humidity !== undefined ? `${spoolInfo[bayIndex].max_humidity}%` : valuePlaceholder
      }, {
        label: this._i18n.t('mb:printerInfo.filamentBay.tag_uid'),
        value: spoolInfo[bayIndex] && spoolInfo[bayIndex].tag_uid !== undefined && // tag UID can come through as null from the spool info
        spoolInfo[bayIndex].tag_uid !== null ? spoolInfo[bayIndex].tag_uid : valuePlaceholder
      }];
      return /*#__PURE__*/React.createElement("div", {
        className: "printerInfoPanel",
        key: bayIndex + 1
      }, /*#__PURE__*/React.createElement(PrinterInfoTitle, {
        title: `${this._i18n.t('mb:printerInfo.filamentBay.title')} ${bayIndex + 1}`
      }), spoolInfoRows.map(props => {
        return /*#__PURE__*/React.createElement(PrinterInfoRow, _extends({
          key: `${props.label} bay${bayIndex}`
        }, props));
      }));
    });
  }

  render() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", _extends({
      className: `${this.props.className || 'printerInfo'} printerPanel`
    }, this.props), /*#__PURE__*/React.createElement("div", {
      className: "printerPanelHeader"
    }, /*#__PURE__*/React.createElement("div", {
      className: "printerPanelBackButton",
      onClick: this.props.onBack
    }, /*#__PURE__*/React.createElement(Isvg, {
      src: "icons/back-arrow.svg"
    })), /*#__PURE__*/React.createElement("div", {
      className: "printerPanelHeaderLabel"
    }, /*#__PURE__*/React.createElement("h1", null, this._i18n.t('mb:printerInfo.header'))), /*#__PURE__*/React.createElement(HeaderSelectButton, {
      flux: this.props.flux,
      printer: this.props.printer
    }), /*#__PURE__*/React.createElement("div", {
      className: "printerPanelArrowDown",
      onClick: this.props.onClose
    }, /*#__PURE__*/React.createElement(Isvg, {
      src: "icons/back-arrow.svg"
    })))), /*#__PURE__*/React.createElement("div", {
      className: "printerInfoContainer"
    }, /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 50
      }
    }, this.renderUpdatePrinterName(), this.renderNetwork(), this.renderMechanical(), this.renderExtruder(), this.renderMaterialBays())));
  }

}

PrinterInfo.displayName = 'PrinterInfo';
PrinterInfo.propTypes = {
  flux: React.PropTypes.object.isRequired,
  onBack: React.PropTypes.func.isRequired,
  onClose: React.PropTypes.func.isRequired,
  printer: React.PropTypes.object.isRequired,
  className: React.PropTypes.string
};
module.exports = PrinterInfo;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaW50ZXJJbmZvLmpzIl0sIm5hbWVzIjpbIlJlYWN0IiwicmVxdWlyZSIsIklzdmciLCJfIiwicSIsImNsYXNzTmFtZXMiLCJCdXR0b24iLCJ1dGlsIiwiTmV0d29ya1N0YXRlRW51bSIsIkhlYWRlclNlbGVjdEJ1dHRvbiIsIlByaW50ZXJJbmZvUm93IiwiUHJpbnRlckluZm9UaXRsZSIsIlByaW50ZXJJbmZvIiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInN0YXRlIiwibmV3UHJpbnRlck5hbWUiLCJwcmludGVyTmFtZSIsInByaW50ZXIiLCJnZXROYW1lIiwiZGlzYWJsZVVwZGF0ZSIsIm5ldHdvcmsiLCJleHRydWRlcnMiLCJfaTE4biIsImZsdXgiLCJnZXRTZXJ2aWNlIiwiX3RyYWNraW5nU2VydmljZSIsImNvbXBvbmVudFdpbGxNb3VudCIsImdldFByaW50ZXJJbmZvIiwibmV0d29ya1N0YXRlIiwiaXNTa2V0Y2hQcmludGVyIiwiZ2V0TmV0d29ya1N0YXRlIiwiaW52b2tlIiwidGhlbiIsIm5ldHdvcmtJbmZvIiwic3VibmV0IiwibmV0bWFzayIsImdhdGV3YXkiLCJkbnMiLCJXSUZJIiwid2lmaSIsIm5hbWUiLCJ0IiwiZXh0cnVkZXJTdGF0cyIsImdldEFsbEV4dHJ1ZGVySW5mbyIsImV4dHJ1ZGVyc0luZm8iLCJpc0VtcHR5IiwibWFwIiwiZXh0cnVkZXJJbmZvIiwiaW5kZXgiLCJ0ZW1wIiwiY3VycmVudF90ZW1wZXJhdHVyZSIsImV4dHJ1ZGVyX3ZlcnNpb24iLCJleHRydWRlcl90eXBlIiwicHJpbnRfdGltZSIsImV4dHJ1ZGVyX3ByaW50X3RpbWUiLCJmaWxhbWVudEV4dHJ1ZGVkIiwiZXh0cnVzaW9uX2Rpc3RhbmNlX21tIiwibWFzcyIsImV4dHJ1c2lvbl9tYXNzX2ciLCJzZXJpYWwiLCJzZXJpYWxOb0Zvcm1hdCIsInN5c3RlbUluZm8iLCJnZXRTeXN0ZW1JbmZvIiwic3Bvb2xJbmZvIiwiZ2V0U3Bvb2xJbmZvIiwiYWxsIiwic3RhdGVDaGFuZ2VzIiwic2V0U3RhdGUiLCJjYXRjaCIsImNvbnNvbGUiLCJlcnJvciIsImdldE1hdGVyaWFsIiwiZXh0cnVkZXJJbmRleCIsInByaW50U2V0dGluZ3MiLCJzdG9yZSIsImdldFN0YXRlIiwiZmlsYW1lbnRCYXkiLCJmaWxhbWVudGJheXMiLCJ0YWdfcHJlc2VudCIsIm1hdGVyaWFsX25hbWUiLCJnZXRNYXRlcmlhbFByZXR0eVN0cmluZ0Zyb21Db2RlIiwibWF0ZXJpYWwiLCJtYXRlcmlhbHMiLCJzZWxlY3RlZCIsInVuZGVmaW5lZCIsIm1hdGVyaWFsVHJhbnNsYXRpb24iLCJ0cmFuc2xhdGlvbnMiLCJzZXJpYWxSZWNpZXZlZCIsInRvU3RyaW5nIiwibGVuZ3RoIiwibWF0Y2giLCJqb2luIiwiYWRkVHJhY2tpbmdFdmVudCIsIm1lcmdlZCIsIm1lcmdlIiwiZ2V0VHJhY2tpbmdJbmZvIiwiYWRkRXZlbnQiLCJ1cGRhdGVQcmludGVyTmFtZSIsInJlZnMiLCJwcmludGVyTmFtZUlucHV0IiwidmFsdWUiLCJlcnIiLCJoYW5kbGVJbnB1dENoYW5nZSIsImUiLCJuZXdOYW1lIiwidGFyZ2V0IiwiZm9ybWF0TG9hZERhdGUiLCJzZWNzRnJvbUVwb2NoVG9Mb2FkIiwibG9hZERhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicmVwbGFjZSIsImZvcm1hdE1hdGVyaWFsQW1vdW50cyIsInJlbWFpbmluZ01hdGVyaWFsIiwib3JpZ2luYWxBbW91bnQiLCJsaW5lYXJEZW5zaXR5IiwicmVtYWluaW5nTWF0ZXJpYWxNYXNzIiwiTWF0aCIsImZsb29yIiwiZmlsYW1lbnRMZW5ndGhUb01hc3MiLCJvcmlnaW5hbEFtb3VudE1hc3MiLCJtYXRlcmlhbFRleHQiLCJyZW5kZXJVcGRhdGVQcmludGVyTmFtZSIsImJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJVcGRhdGVCdXR0b24iLCJtYXJnaW4iLCJwYWRkaW5nIiwiZXZlbnQiLCJrZXkiLCJnZXRJbmZvIiwiZmlybXdhcmVfdmVyc2lvbiIsInJlbmRlckROUyIsImVhY2hETlMiLCJyZW5kZXJOZXR3b3JrIiwicHJpbnRlck1BQyIsImdldElkIiwic3Vic3RyaW5nIiwidmFsdWVQbGFjZWhvbGRlciIsIm5ldHdvcmtJbmZvUm93cyIsImxhYmVsIiwiZ2V0SXBBZGRyZXNzIiwicmVuZGVyTWVjaGFuaWNhbCIsInRvb2xoZWFkcyIsImNoYW1iZXIiLCJtZWNoYW5pY2FsSW5mb1Jvd3MiLCJyZW5kZXJFeHRydWRlciIsImdldEF0dGFjaGVkRXh0cnVkZXJzIiwiaXNEdWFsIiwiZXh0cnVkZXJDb21wb25lbnRzIiwiYXR0YWNoZWRFeHRydWRlciIsImV4dHJ1ZGVyIiwiZXh0cnVkZXJJbmZvUm93cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZW5kZXJNYXRlcmlhbEJheXMiLCJiYXlJbmRleCIsInNwb29sSW5mb1Jvd3MiLCJtYXRlcmlhbF90eXBlIiwibWF0ZXJpYWxfY29sb3JfbmFtZSIsImFtb3VudF9yZW1haW5pbmciLCJvcmlnaW5hbF9hbW91bnQiLCJsaW5lYXJfZGVuc2l0eSIsImZpcnN0X2xvYWRfZGF0ZSIsImZpcnN0X2xvYWRfc2VjcyIsIm1heF9odW1pZGl0eSIsInRhZ191aWQiLCJyZW5kZXIiLCJjbGFzc05hbWUiLCJvbkJhY2siLCJvbkNsb3NlIiwibWFyZ2luQm90dG9tIiwiZGlzcGxheU5hbWUiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJvYmplY3QiLCJpc1JlcXVpcmVkIiwiZnVuYyIsInN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxpQkFBRCxDQUFwQjs7QUFDQSxNQUFNRSxDQUFDLEdBQUdGLE9BQU8sQ0FBQyxRQUFELENBQWpCOztBQUNBLE1BQU1HLENBQUMsR0FBR0gsT0FBTyxDQUFDLEdBQUQsQ0FBakI7O0FBQ0EsTUFB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TUFBQSxTQUFTLEVBQUMsdUJBQWY7QUFBdUMsTUFBQSxPQUFPLEVBQUUsS0FBS0osS0FBTCxDQUFXNko7QUFBM0Qsb0JBQ0ksb0JBQUMsSUFBRDtBQUFNLE1BQUEsR0FBRyxFQUFDO0FBQVYsTUFESixDQVJKLENBREosQ0FESixlQWVJO0FBQUssTUFBQSxTQUFTLEVBQUM7QUFBZixvQkFDSTtBQUFLLE1BQUEsS0FBSyxFQUFFO0FBQUVDLFFBQUFBLFlBQVksRUFBRTtBQUFoQjtBQUFaLE9BQ0ssS0FBS2pELHVCQUFMLEVBREwsRUFFSyxLQUFLWSxhQUFMLEVBRkwsRUFHSyxLQUFLUSxnQkFBTCxFQUhMLEVBSUssS0FBS0ksY0FBTCxFQUpMLEVBS0ssS0FBS1Msa0JBQUwsRUFMTCxDQURKLENBZkosQ0FESjtBQTJCSDs7QUF4ZnFDOztBQTJmMUNqSixXQUFXLENBQUNrSyxXQUFaLEdBQTBCLGFBQTFCO0FBQ0FsSyxXQUFXLENBQUNtSyxTQUFaLEdBQXdCO0FBQ3BCdEosRUFBQUEsSUFBSSxFQUFFekIsS0FBSyxDQUFDZ0wsU0FBTixDQUFnQkMsTUFBaEIsQ0FBdUJDLFVBRFQ7QUFFcEJQLEVBQUFBLE1BQU0sRUFBRTNLLEtBQUssQ0FBQ2dMLFNBQU4sQ0FBZ0JHLElBQWhCLENBQXFCRCxVQUZUO0FBR3BCTixFQUFBQSxPQUFPLEVBQUU1SyxLQUFLLENBQUNnTCxTQUFOLENBQWdCRyxJQUFoQixDQUFxQkQsVUFIVjtBQUlwQi9KLEVBQUFBLE9BQU8sRUFBRW5CLEtBQUssQ0FBQ2dMLFNBQU4sQ0FBZ0JDLE1BQWhCLENBQXVCQyxVQUpaO0FBS3BCUixFQUFBQSxTQUFTLEVBQUUxSyxLQUFLLENBQUNnTCxTQUFOLENBQWdCSTtBQUxQLENBQXhCO0FBUUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjFLLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5jb25zdCBJc3ZnID0gcmVxdWlyZSgncmVhY3QtaW5saW5lc3ZnJyk7XHJcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuY29uc3QgcSA9IHJlcXVpcmUoJ3EnKTtcclxuY29uc3QgY2xhc3NOYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcclxuY29uc3QgQnV0dG9uID0gcmVxdWlyZSgnZWFnbGUtcHJpbnQvdmlld3MvdWkvYnV0dG9uJyk7XHJcblxyXG5jb25zdCB1dGlsID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbCcpO1xyXG5jb25zdCBOZXR3b3JrU3RhdGVFbnVtID0gcmVxdWlyZSgnLi4vLi4vLi4vY29uc3RhbnRzJykuTmV0d29ya1N0YXRlRW51bTtcclxuY29uc3QgSGVhZGVyU2VsZWN0QnV0dG9uID0gcmVxdWlyZSgnLi4vaGVhZGVyU2VsZWN0QnV0dG9uJyk7XHJcbmNvbnN0IFByaW50ZXJJbmZvUm93ID0gcmVxdWlyZSgnLi9wcmludGVySW5mb0NvbXBvbmVudHMvUHJpbnRlckluZm9Sb3cnKTtcclxuY29uc3QgUHJpbnRlckluZm9UaXRsZSA9IHJlcXVpcmUoJy4vcHJpbnRlckluZm9Db21wb25lbnRzL1ByaW50ZXJJbmZvVGl0bGUnKTtcclxuXHJcbmNsYXNzIFByaW50ZXJJbmZvIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIG5ld1ByaW50ZXJOYW1lOiAnJyxcclxuICAgICAgICAgICAgcHJpbnRlck5hbWU6IHRoaXMucHJvcHMucHJpbnRlci5nZXROYW1lKCksXHJcbiAgICAgICAgICAgIGRpc2FibGVVcGRhdGU6IHRydWUsXHJcbiAgICAgICAgICAgIG5ldHdvcms6IHt9LFxyXG4gICAgICAgICAgICBleHRydWRlcnM6IHt9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuX2kxOG4gPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnVHJhbnNsYXRpb25TZXJ2aWNlJyk7XHJcbiAgICAgICAgdGhpcy5fdHJhY2tpbmdTZXJ2aWNlID0gdGhpcy5wcm9wcy5mbHV4LmdldFNlcnZpY2UoJ1RyYWNraW5nU2VydmljZScpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgICAgICB0aGlzLmdldFByaW50ZXJJbmZvKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UHJpbnRlckluZm8oKSB7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya1N0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5wcmludGVyLmlzU2tldGNoUHJpbnRlcigpKSByZXR1cm4gdGhpcy5wcm9wcy5wcmludGVyLmdldE5ldHdvcmtTdGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucHJpbnRlci5pbnZva2UoJ05ldHdvcmtTdGF0ZScpLnRoZW4obmV0d29ya1N0YXRlID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ldHdvcmtJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAobmV0d29ya1N0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya0luZm8uc3VibmV0ID0gbmV0d29ya1N0YXRlLm5ldG1hc2s7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya0luZm8uZ2F0ZXdheSA9IG5ldHdvcmtTdGF0ZS5nYXRld2F5O1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldHdvcmtJbmZvLmRucyA9IG5ldHdvcmtTdGF0ZS5kbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV0d29ya0luZm8uc3RhdGUgPSBuZXR3b3JrU3RhdGUuc3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldHdvcmtTdGF0ZS5zdGF0ZSA9PT0gTmV0d29ya1N0YXRlRW51bS5zdGF0ZS5XSUZJKSBuZXR3b3JrSW5mby53aWZpID0gbmV0d29ya1N0YXRlLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBuZXR3b3JrSW5mby53aWZpID0gdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5uX2EnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXR3b3JrSW5mbztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgZXh0cnVkZXJTdGF0cyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucHJpbnRlci5nZXRBbGxFeHRydWRlckluZm8oKS50aGVuKGV4dHJ1ZGVyc0luZm8gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShleHRydWRlcnNJbmZvKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXh0cnVkZXJTdGF0cyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGV4dHJ1ZGVyc0luZm8ubWFwKChleHRydWRlckluZm8sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cnVkZXJTdGF0c1tpbmRleF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXA6IGV4dHJ1ZGVySW5mby5jdXJyZW50X3RlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRydWRlcl92ZXJzaW9uOiBleHRydWRlckluZm8uZXh0cnVkZXJfdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRfdGltZTogZXh0cnVkZXJJbmZvLmV4dHJ1ZGVyX3ByaW50X3RpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGFtZW50RXh0cnVkZWQ6IGV4dHJ1ZGVySW5mby5leHRydXNpb25fZGlzdGFuY2VfbW0gLyAxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXNzOiBleHRydWRlckluZm8uZXh0cnVzaW9uX21hc3NfZyAvIDEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlhbDogZXh0cnVkZXJJbmZvLnNlcmlhbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnNlcmlhbE5vRm9ybWF0KGV4dHJ1ZGVySW5mby5zZXJpYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ubl9hJyksXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJ1ZGVyU3RhdHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHN5c3RlbUluZm8gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByb3BzLnByaW50ZXIuZ2V0U3lzdGVtSW5mbygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IHNwb29sSW5mbyA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvcHMucHJpbnRlci5nZXRTcG9vbEluZm8oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBxLmFsbChbbmV0d29ya1N0YXRlKCksIGV4dHJ1ZGVyU3RhdHMoKSwgc3lzdGVtSW5mbygpLCBzcG9vbEluZm8oKV0pXHJcbiAgICAgICAgICAgIC50aGVuKChbbmV0d29yaywgZXh0cnVkZXJzLCBzeXN0ZW1JbmZvLCBzcG9vbEluZm9dKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0ZUNoYW5nZXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV0d29yayxcclxuICAgICAgICAgICAgICAgICAgICBleHRydWRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtSW5mbyxcclxuICAgICAgICAgICAgICAgICAgICBzcG9vbEluZm8sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShzdGF0ZUNoYW5nZXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5c3RlbUluZm87XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNYXRlcmlhbChleHRydWRlckluZGV4KSB7XHJcbiAgICAgICAgY29uc3QgcHJpbnRTZXR0aW5ncyA9IHRoaXMucHJvcHMuZmx1eC5zdG9yZSgnUHJpbnRTZXR0aW5nc1N0b3JlJykuZ2V0U3RhdGUoKTtcclxuICAgICAgICBjb25zdCBmaWxhbWVudEJheSA9XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuc3lzdGVtSW5mbyAmJiB0aGlzLnN0YXRlLnN5c3RlbUluZm8uZmlsYW1lbnRiYXlzXHJcbiAgICAgICAgICAgICAgICA/IHRoaXMuc3RhdGUuc3lzdGVtSW5mby5maWxhbWVudGJheXNbZXh0cnVkZXJJbmRleF1cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnN5c3RlbUluZm8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ucGxhY2VIb2xkZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmaWxhbWVudEJheSkge1xyXG4gICAgICAgICAgICBpZiAoZmlsYW1lbnRCYXkudGFnX3ByZXNlbnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNwb29sSW5mbyA9IHRoaXMuc3RhdGUuc3Bvb2xJbmZvO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwb29sSW5mbyAmJiBzcG9vbEluZm9bZXh0cnVkZXJJbmRleF0gJiYgc3Bvb2xJbmZvW2V4dHJ1ZGVySW5kZXhdLm1hdGVyaWFsX25hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXRpbC5nZXRNYXRlcmlhbFByZXR0eVN0cmluZ0Zyb21Db2RlKHNwb29sSW5mb1tleHRydWRlckluZGV4XS5tYXRlcmlhbF9uYW1lKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBzcG9vbCB0YWcsIGJ1dCB3ZSBkb24ndCBoYXZlIHNwb29sIGluZm9ybWF0aW9uLCB3ZSBhc3N1bWVcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIGJlY2F1c2Ugd2UncmUgc3RpbGwgd2FpdGluZyBmb3IgaXQsIHNvIHdlIHVzZSAnLi4uJ1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLnBsYWNlSG9sZGVyJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzcG9vbCB0YWcsIHRoZW4gdGhlcmUgaXMgbm8gaW5mbyB0byBkZXRlY3QsIHNvXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSB1c2UgJ1Vua25vd24gTWF0ZXJpYWwnIGFzIHRoZSBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8udW5rbm93bicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGZpbGFtZW50IGJheSwgZ2V0IG1hdGVyaWFsIGluZm8gZnJvbSB0aGUgcHJpbnQgc2V0dGluZ3Mgc3RvcmVcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHByaW50U2V0dGluZ3MubWF0ZXJpYWxzLnNlbGVjdGVkW2V4dHJ1ZGVySW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAobWF0ZXJpYWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxUcmFuc2xhdGlvbiA9IHByaW50U2V0dGluZ3MubWF0ZXJpYWxzLnRyYW5zbGF0aW9uc1ttYXRlcmlhbF0ubmFtZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRlcmlhbFRyYW5zbGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLnVua25vd24nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoZSByZWNpZXZlZCBzZXJpYWwgbnVtYmVyIGluICcxMjM0NScgZm9ybWF0IHRvICcwMDAwLTAwMDEtMjM0NScgZm9ybWF0XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2VyaWFsIC0gZXh0cnVkZXJzIHNlcmlhbCBudW1iZXIgcmVjaWV2ZWRcclxuICAgICAqKi9cclxuICAgIHNlcmlhbE5vRm9ybWF0KHNlcmlhbCkge1xyXG4gICAgICAgIGxldCBzZXJpYWxSZWNpZXZlZCA9IHNlcmlhbC50b1N0cmluZygpO1xyXG4gICAgICAgIHdoaWxlIChzZXJpYWxSZWNpZXZlZC5sZW5ndGggPCAxMikge1xyXG4gICAgICAgICAgICBzZXJpYWxSZWNpZXZlZCA9IGAwJHtzZXJpYWxSZWNpZXZlZH1gO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXJpYWxSZWNpZXZlZCA9IHNlcmlhbFJlY2lldmVkLm1hdGNoKC8uezR9L2cpLmpvaW4oJy0nKTtcclxuICAgICAgICByZXR1cm4gc2VyaWFsUmVjaWV2ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGV2ZW50IHRvIHRyYWNraW5nIHNlcnZpY2VcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gbWVzc2FnZSB0byB0cmFja1xyXG4gICAgICovXHJcbiAgICBhZGRUcmFja2luZ0V2ZW50KG5hbWUpIHtcclxuICAgICAgICBjb25zdCBtZXJnZWQgPSBfLm1lcmdlKHsgbmFtZSB9LCB0aGlzLnByb3BzLnByaW50ZXIuZ2V0VHJhY2tpbmdJbmZvKCkpO1xyXG4gICAgICAgIHRoaXMuX3RyYWNraW5nU2VydmljZS5hZGRFdmVudChtZXJnZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVByaW50ZXJOYW1lKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5kaXNhYmxlVXBkYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBkaXNhYmxlVXBkYXRlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLnByaW50ZXJcclxuICAgICAgICAgICAgICAgIC5pbnZva2UoJ0NoYW5nZU1hY2hpbmVOYW1lJywgW3RoaXMuc3RhdGUubmV3UHJpbnRlck5hbWVdKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJhY2tpbmdFdmVudCgnUHJpbnRlciBOYW1lIFVwZGF0ZSBTdWNjZXNzZnVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHByaW50ZXJOYW1lOiB0aGlzLnN0YXRlLm5ld1ByaW50ZXJOYW1lIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcy5wcmludGVyTmFtZUlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUcmFja2luZ0V2ZW50KCdQcmludGVyIE5hbWUgVXBkYXRlIEZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hZGRUcmFja2luZ0V2ZW50KCdQcmludGVyIE5hbWUgVXBkYXRlIEZhaWxlZCAtIGludmFsaWQgbmFtZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVJbnB1dENoYW5nZShlKSB7XHJcbiAgICAgICAgY29uc3QgbmV3TmFtZSA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgIGxldCBkaXNhYmxlVXBkYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKG5ld05hbWUubGVuZ3RoID4gMCAmJiBuZXdOYW1lLmxlbmd0aCA8IDE1MCkgZGlzYWJsZVVwZGF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnByaW50ZXIuaXNTa2V0Y2hQcmludGVyKCkpIGRpc2FibGVVcGRhdGUgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbmV3UHJpbnRlck5hbWU6IG5ld05hbWUsXHJcbiAgICAgICAgICAgIGRpc2FibGVVcGRhdGUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0TG9hZERhdGUoc2Vjc0Zyb21FcG9jaFRvTG9hZCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRvIGRlcml2ZSB0aGUgZGF0ZSB3aGVuIGEgc3Bvb2wgd2FzIGxvYWRlZCBpbiBib3QsIEZXIHByb3ZpZGVzIGEgY291cGxlIG9mIG9wdGlvbnM6XHJcbiAgICAgICAgICogMS4gZmlyc3RfbG9hZF9kYXRlID0gIyBvZiBkYXlzIHNpbmNlIEphbiAxc3QsIDIwMDAgKGFyYml0cmFyeSwgcmVxdWlyZXMgbW9yZSBKUyBkYXRlIGZpbmVzc2UgLSBzaG91bGQgYmUgZGVwcmljYXRlZClcclxuICAgICAgICAgKiAyLiBmaXJzdF9sb2FkX3NlY29uZHMgPSAjIG9mIHNlY29uZHMgc2luY2UgSmFuIDFzdCwgMTk3MCAoc3RhbmRhcmQgRXBvY2ggdGltZXN0YW1wIC0gYWxsIGNsaWVudHMgc2hvdWxkIHVzZSB0aGlzKVxyXG4gICAgICAgICAqIE5vdGU6IEpTIERhdGUgY29uc3RydWN0b3IgYWNjZXB0cyBtcyBzbyAoc2VjICogMTAwMCkgaXMgcGFzc2VkIGluIC0+IHRoZW4gcmVmb3JtYXR0ZWQgZm9yIHRoZSBVSVxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBjb25zdCBsb2FkRGF0ZSA9IG5ldyBEYXRlKHNlY3NGcm9tRXBvY2hUb0xvYWQgKiAxMDAwKTtcclxuICAgICAgICByZXR1cm4gbG9hZERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCkucmVwbGFjZSgvWy9dL2csICcuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0TWF0ZXJpYWxBbW91bnRzKHJlbWFpbmluZ01hdGVyaWFsLCBvcmlnaW5hbEFtb3VudCwgbGluZWFyRGVuc2l0eSkge1xyXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZ01hdGVyaWFsTWFzcyA9IE1hdGguZmxvb3IodXRpbC5maWxhbWVudExlbmd0aFRvTWFzcyhyZW1haW5pbmdNYXRlcmlhbCwgbGluZWFyRGVuc2l0eSkpO1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQW1vdW50TWFzcyA9IE1hdGguZmxvb3IodXRpbC5maWxhbWVudExlbmd0aFRvTWFzcyhvcmlnaW5hbEFtb3VudCwgbGluZWFyRGVuc2l0eSkpO1xyXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsVGV4dCA9IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8uZmlsYW1lbnRCYXkubWF0ZXJpYWxfYW1vdW50X3RleHQnLCB7XHJcbiAgICAgICAgICAgIHJlbWFpbmluZ01hdGVyaWFsTWFzcyxcclxuICAgICAgICAgICAgb3JpZ2luYWxBbW91bnRNYXNzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBtYXRlcmlhbFRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyVXBkYXRlUHJpbnRlck5hbWUoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uQ2xhc3MgPSBjbGFzc05hbWVzKCd1cGRhdGUtYnV0dG9uJywge1xyXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5zdGF0ZS5kaXNhYmxlVXBkYXRlLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBVcGRhdGVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICA8QnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luOiAnMCAxNXB4JywgcGFkZGluZzogJzhweCAxMnB4JyB9fVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J3NlY29uZGFyeSdcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzPXtidXR0b25DbGFzc31cclxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17dGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby51cGRhdGUnKX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnVwZGF0ZVByaW50ZXJOYW1lKCl9XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludGVySW5mb1BhbmVsJz5cclxuICAgICAgICAgICAgICAgIDxQcmludGVySW5mb1JvdyBsYWJlbD17dGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5wcmludGVyTmFtZScpfSB2YWx1ZT17dGhpcy5zdGF0ZS5wcmludGVyTmFtZX0gLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludGVyVXBkYXRlTmFtZSc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT0ndHJ1bmNhdGUnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkPSdpbnB1dFByaW50ZXJOYW1lJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9J3ByaW50ZXJOYW1lSW5wdXQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9J3RleHQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnN0YXRlLnByaW50ZXJOYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZXZlbnQgPT4gdGhpcy5oYW5kbGVJbnB1dENoYW5nZShldmVudCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5RG93bj17ZXZlbnQgPT4gKGV2ZW50LmtleSA9PT0gJ0VudGVyJyA/IHRoaXMudXBkYXRlUHJpbnRlck5hbWUoKSA6IG51bGwpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvRm9jdXM9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8VXBkYXRlQnV0dG9uIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxQcmludGVySW5mb1Jvd1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLmZpcm13YXJlJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMucHJvcHMucHJpbnRlci5nZXRJbmZvKCkuZmlybXdhcmVfdmVyc2lvbn1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyRE5TKCkge1xyXG4gICAgICAgIGlmICghIXRoaXMuc3RhdGUubmV0d29yay5kbnMgJiYgdGhpcy5zdGF0ZS5uZXR3b3JrLmRucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRucyA9IHRoaXMuc3RhdGUubmV0d29yay5kbnMubWFwKGVhY2hETlMgPT4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2Rucycga2V5PXtlYWNoRE5TfT5cclxuICAgICAgICAgICAgICAgICAgICB7ZWFjaEROU31cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRucztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5wbGFjZUhvbGRlcicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJOZXR3b3JrKCkge1xyXG4gICAgICAgIGNvbnN0IHByaW50ZXJNQUMgPSB0aGlzLnByb3BzLnByaW50ZXJcclxuICAgICAgICAgICAgLmdldElkKClcclxuICAgICAgICAgICAgLnN1YnN0cmluZygxOClcclxuICAgICAgICAgICAgLm1hdGNoKC8uezJ9L2cpXHJcbiAgICAgICAgICAgIC5qb2luKCc6Jyk7XHJcbiAgICAgICAgY29uc3QgdmFsdWVQbGFjZWhvbGRlciA9IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ucGxhY2VIb2xkZXInKTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV0d29ya0luZm9Sb3dzID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5uZXR3b3JrLmNvbm5lY3Rpb25UeXBlJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5uZXR3b3JrLnN0YXRlIHx8IHZhbHVlUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLm5ldHdvcmsuaXAnKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BzLnByaW50ZXIuZ2V0SXBBZGRyZXNzKCkgfHwgdmFsdWVQbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ubmV0d29yay5zdWJuZXQnKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnN0YXRlLm5ldHdvcmsuc3VibmV0IHx8IHZhbHVlUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLm5ldHdvcmsuZ2F0ZXdheScpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc3RhdGUubmV0d29yay5nYXRld2F5IHx8IHZhbHVlUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLm5ldHdvcmsuZG5zJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5yZW5kZXJETlMoKSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ubmV0d29yay53aWZpJyksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5zdGF0ZS5uZXR3b3JrLndpZmkgfHwgdmFsdWVQbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ubmV0d29yay5tYWMnKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBwcmludGVyTUFDIHx8IHZhbHVlUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByaW50ZXJJbmZvUGFuZWwnPlxyXG4gICAgICAgICAgICAgICAgPFByaW50ZXJJbmZvVGl0bGUgdGl0bGU9e3RoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ubmV0d29yay50aXRsZScpfSAvPlxyXG4gICAgICAgICAgICAgICAge25ldHdvcmtJbmZvUm93cy5tYXAocHJvcHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UHJpbnRlckluZm9Sb3cga2V5PXtgbmV0d29yayAke3Byb3BzLmxhYmVsfWB9IHsuLi5wcm9wc30gLz47XHJcbiAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJNZWNoYW5pY2FsKCkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlUGxhY2Vob2xkZXIgPSB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLnBsYWNlSG9sZGVyJyk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAhKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zeXN0ZW1JbmZvICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnN5c3RlbUluZm8udG9vbGhlYWRzICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnN5c3RlbUluZm8udG9vbGhlYWRzLmNoYW1iZXJcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1lY2hhbmljYWxJbmZvUm93cyA9IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ubWVjaGFuaWNhbC5jaGFtYmVyX3RlbXAnKSxcclxuICAgICAgICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuc3lzdGVtSW5mby50b29saGVhZHMuY2hhbWJlclswXS5jdXJyZW50X3RlbXBlcmF0dXJlICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5leHRydWRlci50ZW1wX3VuaXQnKSB8fCB2YWx1ZVBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludGVySW5mb1BhbmVsJz5cclxuICAgICAgICAgICAgICAgIDxQcmludGVySW5mb1RpdGxlIHRpdGxlPXtgJHt0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLm1lY2hhbmljYWwudGl0bGUnKX1gfSAvPlxyXG4gICAgICAgICAgICAgICAge21lY2hhbmljYWxJbmZvUm93cy5tYXAocHJvcHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UHJpbnRlckluZm9Sb3cga2V5PXtgbWVjaGFuaWNhbCAke3Byb3BzLmxhYmVsfWB9IHsuLi5wcm9wc30gLz47XHJcbiAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJFeHRydWRlcigpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZVBsYWNlaG9sZGVyID0gdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5wbGFjZUhvbGRlcicpO1xyXG4gICAgICAgIGNvbnN0IGV4dHJ1ZGVycyA9IHRoaXMucHJvcHMucHJpbnRlci5nZXRBdHRhY2hlZEV4dHJ1ZGVycygpO1xyXG4gICAgICAgIGNvbnN0IGlzRHVhbCA9IGV4dHJ1ZGVycy5sZW5ndGggPiAxO1xyXG4gICAgICAgIGNvbnN0IGV4dHJ1ZGVyQ29tcG9uZW50cyA9IGV4dHJ1ZGVycy5tYXAoKGF0dGFjaGVkRXh0cnVkZXIsIGV4dHJ1ZGVySW5kZXgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXh0cnVkZXIgPSB0aGlzLnN0YXRlLmV4dHJ1ZGVycyA/IHRoaXMuc3RhdGUuZXh0cnVkZXJzW2V4dHJ1ZGVySW5kZXhdIDogbnVsbDtcclxuICAgICAgICAgICAgLy8gYXQgTWV0aG9kIGxhdW5jaCwgS2FpdGVuIGlzbid0IHJldHVybmluZyBwcmludF90aW1lIChha2EgZXh0cnVzaW9uX3RpbWVfcylcclxuICAgICAgICAgICAgLy8gc28gb25seSBzaG93aW5nIG9uIHNpbmdsZSBleHRydXNpb24gYm90cyB1bnRpbCB3ZSBjYW4gZGlzcGxheSBzb21ldGhpbmdcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGV4dHJ1ZGVySW5mb1Jvd3MgPSBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8uZXh0cnVkZXIudGVtcCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRydWRlciAmJiBleHRydWRlci50ZW1wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGV4dHJ1ZGVyLnRlbXAgKyB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLmV4dHJ1ZGVyLnRlbXBfdW5pdCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHZhbHVlUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLmV4dHJ1ZGVyLnZlcnNpb24nKSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZXh0cnVkZXIgJiYgZXh0cnVkZXIuZXh0cnVkZXJfdmVyc2lvbiA/IGV4dHJ1ZGVyLmV4dHJ1ZGVyX3ZlcnNpb24gOiB2YWx1ZVBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5leHRydWRlci5tYXRlcmlhbCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmdldE1hdGVyaWFsKGV4dHJ1ZGVySW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICFpc0R1YWxcclxuICAgICAgICAgICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5leHRydWRlci5wcmludF90aW1lJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV4dHJ1ZGVyICYmIGV4dHJ1ZGVyLnByaW50X3RpbWUgPyBleHRydWRlci5wcmludF90aW1lIDogdmFsdWVQbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5leHRydWRlci5maWxhbWVudCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRydWRlciAmJiBleHRydWRlci5maWxhbWVudEV4dHJ1ZGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGV4dHJ1ZGVyLmZpbGFtZW50RXh0cnVkZWQpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5leHRydWRlci5maWxhbWVudF91bml0JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdmFsdWVQbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8uZXh0cnVkZXIubWFzcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRydWRlciAmJiBleHRydWRlci5tYXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGV4dHJ1ZGVyLm1hc3MpICsgdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5leHRydWRlci5tYXNzX3VuaXQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZVBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5leHRydWRlci5zZXJpYWwnKSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZXh0cnVkZXIgJiYgZXh0cnVkZXIuc2VyaWFsID8gZXh0cnVkZXIuc2VyaWFsIDogdmFsdWVQbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByaW50ZXJJbmZvUGFuZWwnIGtleT17ZXh0cnVkZXJJbmRleCArIDF9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxQcmludGVySW5mb1RpdGxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHt0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLmV4dHJ1ZGVyLnRpdGxlJyl9ICR7aXNEdWFsID8gZXh0cnVkZXJJbmRleCArIDEgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAge2V4dHJ1ZGVySW5mb1Jvd3MubWFwKHByb3BzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxQcmludGVySW5mb1JvdyBrZXk9e2BleHRydWRlciR7ZXh0cnVkZXJJbmRleH0gJHtwcm9wcy5sYWJlbH1gfSB7Li4ucHJvcHN9IC8+O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGV4dHJ1ZGVyQ29tcG9uZW50cztcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJNYXRlcmlhbEJheXMoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnN5c3RlbUluZm8gfHwgIXRoaXMuc3RhdGUuc3lzdGVtSW5mby5maWxhbWVudGJheXMgfHwgIXRoaXMuc3RhdGUuc3Bvb2xJbmZvKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3Bvb2xJbmZvID0gdGhpcy5zdGF0ZS5zcG9vbEluZm87XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuc3lzdGVtSW5mby5maWxhbWVudGJheXMubWFwKChmaWxhbWVudEJheSwgYmF5SW5kZXgpID0+IHtcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogSWYgdGhlcmUgaXMgYSBzcG9vbCB0YWcsIGJ1dCB3ZSBkb24ndCBoYXZlIHNwb29sIGluZm9ybWF0aW9uLCB3ZSBhc3N1bWVcclxuICAgICAgICAgICAgICogaXQncyBiZWNhdXNlIHdlJ3JlIHN0aWxsIHdhaXRpbmcgZm9yIGl0LCBzbyB3ZSB1c2UgJy4uLidcclxuICAgICAgICAgICAgICogSWYgdGhlcmUgaXMgbm8gc3Bvb2wgdGFnLCB0aGVuIHRoZXJlIGlzIG5vIGluZm8gdG8gZGV0ZWN0LCBzb1xyXG4gICAgICAgICAgICAgKiB3ZSB1c2UgJ05vdCBEZXRlY3RlZCcgYXMgdGhlIHBsYWNlaG9sZGVyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZVBsYWNlaG9sZGVyID1cclxuICAgICAgICAgICAgICAgIGZpbGFtZW50QmF5LnRhZ19wcmVzZW50ID09PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLnBsYWNlSG9sZGVyJylcclxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8ubm90X2RldGVjdGVkJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcG9vbEluZm9Sb3dzID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLmZpbGFtZW50QmF5Lm1hdGVyaWFsX3R5cGUnKSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Bvb2xJbmZvW2JheUluZGV4XSAmJiBzcG9vbEluZm9bYmF5SW5kZXhdLm1hdGVyaWFsX3R5cGUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB1dGlsLmdldE1hdGVyaWFsUHJldHR5U3RyaW5nRnJvbUNvZGUoc3Bvb2xJbmZvW2JheUluZGV4XS5tYXRlcmlhbF9uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLnVua25vd24nKSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8uZmlsYW1lbnRCYXkubWF0ZXJpYWxfY29sb3InKSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Bvb2xJbmZvW2JheUluZGV4XSAmJiBzcG9vbEluZm9bYmF5SW5kZXhdLm1hdGVyaWFsX2NvbG9yX25hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc3Bvb2xJbmZvW2JheUluZGV4XS5tYXRlcmlhbF9jb2xvcl9uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHZhbHVlUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiB0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLmZpbGFtZW50QmF5Lm1hdGVyaWFsX2Ftb3VudCcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcG9vbEluZm9bYmF5SW5kZXhdICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwb29sSW5mb1tiYXlJbmRleF0uYW1vdW50X3JlbWFpbmluZyAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwb29sSW5mb1tiYXlJbmRleF0ub3JpZ2luYWxfYW1vdW50ICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5mb3JtYXRNYXRlcmlhbEFtb3VudHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcG9vbEluZm9bYmF5SW5kZXhdLmFtb3VudF9yZW1haW5pbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcG9vbEluZm9bYmF5SW5kZXhdLm9yaWdpbmFsX2Ftb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwb29sSW5mb1tiYXlJbmRleF0ubGluZWFyX2RlbnNpdHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZVBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5maWxhbWVudEJheS5maXJzdF91c2VkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwb29sSW5mb1tiYXlJbmRleF0gJiYgc3Bvb2xJbmZvW2JheUluZGV4XS5maXJzdF9sb2FkX2RhdGUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmZvcm1hdExvYWREYXRlKHNwb29sSW5mb1tiYXlJbmRleF0uZmlyc3RfbG9hZF9zZWNzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZVBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5maWxhbWVudEJheS5oaWdoZXN0X2h1bWlkaXR5X2xldmVsJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwb29sSW5mb1tiYXlJbmRleF0gJiYgc3Bvb2xJbmZvW2JheUluZGV4XS5tYXhfaHVtaWRpdHkgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgJHtzcG9vbEluZm9bYmF5SW5kZXhdLm1heF9odW1pZGl0eX0lYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2YWx1ZVBsYWNlaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5faTE4bi50KCdtYjpwcmludGVySW5mby5maWxhbWVudEJheS50YWdfdWlkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwb29sSW5mb1tiYXlJbmRleF0gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Bvb2xJbmZvW2JheUluZGV4XS50YWdfdWlkICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGFnIFVJRCBjYW4gY29tZSB0aHJvdWdoIGFzIG51bGwgZnJvbSB0aGUgc3Bvb2wgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcG9vbEluZm9bYmF5SW5kZXhdLnRhZ191aWQgIT09IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc3Bvb2xJbmZvW2JheUluZGV4XS50YWdfdWlkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHZhbHVlUGxhY2Vob2xkZXIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludGVySW5mb1BhbmVsJyBrZXk9e2JheUluZGV4ICsgMX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFByaW50ZXJJbmZvVGl0bGUgdGl0bGU9e2Ake3RoaXMuX2kxOG4udCgnbWI6cHJpbnRlckluZm8uZmlsYW1lbnRCYXkudGl0bGUnKX0gJHtiYXlJbmRleCArIDF9YH0gLz5cclxuICAgICAgICAgICAgICAgICAgICB7c3Bvb2xJbmZvUm93cy5tYXAocHJvcHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFByaW50ZXJJbmZvUm93IGtleT17YCR7cHJvcHMubGFiZWx9IGJheSR7YmF5SW5kZXh9YH0gey4uLnByb3BzfSAvPjtcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake3RoaXMucHJvcHMuY2xhc3NOYW1lIHx8ICdwcmludGVySW5mbyd9IHByaW50ZXJQYW5lbGB9IHsuLi50aGlzLnByb3BzfT5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbnRlclBhbmVsSGVhZGVyJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3ByaW50ZXJQYW5lbEJhY2tCdXR0b24nIG9uQ2xpY2s9e3RoaXMucHJvcHMub25CYWNrfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJc3ZnIHNyYz0naWNvbnMvYmFjay1hcnJvdy5zdmcnIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbnRlclBhbmVsSGVhZGVyTGFiZWwnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPnt0aGlzLl9pMThuLnQoJ21iOnByaW50ZXJJbmZvLmhlYWRlcicpfTwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8SGVhZGVyU2VsZWN0QnV0dG9uIGZsdXg9e3RoaXMucHJvcHMuZmx1eH0gcHJpbnRlcj17dGhpcy5wcm9wcy5wcmludGVyfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ncHJpbnRlclBhbmVsQXJyb3dEb3duJyBvbkNsaWNrPXt0aGlzLnByb3BzLm9uQ2xvc2V9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPElzdmcgc3JjPSdpY29ucy9iYWNrLWFycm93LnN2ZycgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwcmludGVySW5mb0NvbnRhaW5lcic+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDUwIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJVcGRhdGVQcmludGVyTmFtZSgpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJOZXR3b3JrKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlck1lY2hhbmljYWwoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyRXh0cnVkZXIoKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMucmVuZGVyTWF0ZXJpYWxCYXlzKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuUHJpbnRlckluZm8uZGlzcGxheU5hbWUgPSAnUHJpbnRlckluZm8nO1xyXG5QcmludGVySW5mby5wcm9wVHlwZXMgPSB7XHJcbiAgICBmbHV4OiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICBvbkJhY2s6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICBvbkNsb3NlOiBSZWFjdC5Qcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgcHJpbnRlcjogUmVhY3QuUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkLFxyXG4gICAgY2xhc3NOYW1lOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcmludGVySW5mbztcclxuIl19
