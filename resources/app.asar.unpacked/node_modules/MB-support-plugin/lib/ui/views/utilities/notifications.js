'use strict';

const React = require('react');

const FluxComponent = require('eagle-print/views/flux_component');

const Checkbox = require('eagle-print/views/ui/input_checkbox');

const UtilityTabSet = require('./utilityTabSet');

class Notifications extends FluxComponent {
  constructor(props) {
    super(props);
    this.i18n = this.props.flux.getService('TranslationService');
    this.logger = this.props.flux.getService('LoggingService');
    this.tracking = this.props.flux.getService('TrackingService');
    this.state = {
      detectionEnabled: true,
      soundEnabled: true,
      analyticsEnabled: true
    };
  }

  componentDidMount() {
    const detectionDisabled = this.props.printer.getDisabledErrors().includes('filament_slip');
    const soundEnabled = this.props.printer.soundState;
    const analyticsEnabled = this.props.printer.analyticsState;
    this.setState({
      detectionDisabled,
      soundEnabled,
      analyticsEnabled
    });
  }

  handleEnableDetectionToggle() {
    this.setState({
      detectionDisabled: !this.state.detectionDisabled
    }, () => {
      this.props.printer.invoke('SetToolheadErrorVisibility', ['filament_slip', this.state.detectionDisabled]);
    });
  }

  handleSoundToggle() {
    this.setState({
      soundEnabled: !this.state.soundEnabled
    }, () => {
      this.props.printer.invoke('ToggleSound', [this.state.soundEnabled]);
    });
  }

  handleAnalyticsEnabled() {
    this.setState({
      analyticsEnabled: !this.state.analyticsEnabled
    }, () => {
      this.props.printer.invoke('SetAnalyticsEnabled', [this.state.analyticsEnabled]);
    });
  }

  renderFilamentErrorDetectionOption() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 20
      }
    }, /*#__PURE__*/React.createElement("label", null, this.i18n.t('mb:notifications.filamentErrorDetection.title')), /*#__PURE__*/React.createElement("p", null, this.i18n.t('mb:notifications.filamentErrorDetection.paragraph'))), /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 20
      }
    }, /*#__PURE__*/React.createElement(Checkbox, {
      ref: "enableJamDetectionCheckbox",
      label: this.i18n.t('mb:notifications.filamentErrorDetection.checkbox'),
      checked: !this.state.detectionDisabled,
      onChange: () => this.handleEnableDetectionToggle()
    })));
  }

  renderSoundOption() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 20
      }
    }, /*#__PURE__*/React.createElement("label", null, this.i18n.t('mb:notifications.sound.title')), /*#__PURE__*/React.createElement("p", null, this.i18n.t('mb:notifications.sound.paragraph'))), /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 20
      }
    }, /*#__PURE__*/React.createElement(Checkbox, {
      ref: "enableSoundCheckbox",
      label: this.i18n.t('mb:notifications.sound.checkbox'),
      checked: this.state.soundEnabled,
      onChange: () => this.handleSoundToggle()
    })));
  }

  renderAnalyticsOption() {
    return /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 20
      }
    }, /*#__PURE__*/React.createElement("label", null, this.i18n.t('mb:notifications.analytics.title')), /*#__PURE__*/React.createElement("p", null, this.i18n.t('mb:notifications.analytics.paragraph'))), /*#__PURE__*/React.createElement("div", {
      style: {
        marginBottom: 20
      }
    }, /*#__PURE__*/React.createElement(Checkbox, {
      ref: "enableAnalyticsCheckbox",
      label: this.i18n.t('mb:notifications.analytics.checkbox'),
      checked: this.state.analyticsEnabled,
      onChange: () => this.handleAnalyticsEnabled()
    })));
  }

  render() {
    const isSixthGen = this.props.printer.isSixthGen();
    return /*#__PURE__*/React.createElement(UtilityTabSet, {
      title: this.i18n.t('mb:notifications.header'),
      ref: c => this.panel = c,
      flux: this.props.flux,
      printer: this.props.printer,
      onBack: this.props.onBack,
      onClose: this.props.onClose
    }, /*#__PURE__*/React.createElement("div", {
      className: "panel-body"
    }, !isSixthGen ? this.renderFilamentErrorDetectionOption() : null, !isSixthGen ? this.renderSoundOption() : null, this.renderAnalyticsOption()));
  }

}

module.exports = Notifications;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmaWNhdGlvbnMuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJyZXF1aXJlIiwiRmx1eENvbXBvbmVudCIsIkNoZWNrYm94IiwiVXRpbGl0eVRhYlNldCIsIk5vdGlmaWNhdGlvbnMiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiaTE4biIsImZsdXgiLCJnZXRTZXJ2aWNlIiwibG9nZ2VyIiwidHJhY2tpbmciLCJzdGF0ZSIsImRldGVjdGlvbkVuYWJsZWQiLCJzb3VuZEVuYWJsZWQiLCJhbmFseXRpY3NFbmFibGVkIiwiY29tcG9uZW50RGlkTW91bnQiLCJkZXRlY3Rpb25EaXNhYmxlZCIsInByaW50ZXIiLCJnZXREaXNhYmxlZEVycm9ycyIsImluY2x1ZGVzIiwic291bmRTdGF0ZSIsImFuYWx5dGljc1N0YXRlIiwic2V0U3RhdGUiLCJoYW5kbGVFbmFibGVEZXRlY3Rpb25Ub2dnbGUiLCJpbnZva2UiLCJoYW5kbGVTb3VuZFRvZ2dsZSIsImhhbmRsZUFuYWx5dGljc0VuYWJsZWQiLCJyZW5kZXJGaWxhbWVudEVycm9yRGV0ZWN0aW9uT3B0aW9uIiwibWFyZ2luQm90dG9tIiwidCIsInJlbmRlclNvdW5kT3B0aW9uIiwicmVuZGVyQW5hbHl0aWNzT3B0aW9uIiwicmVuZGVyIiwiaXNTaXh0aEdlbiIsImMiLCJwYW5lbCIsIm9uQmFjayIsIm9uQ2xvc2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLE1BQU1DLGFBQWEsR0FBR0QsT0FBTyxDQUFDLGtDQUFELENBQTdCOztBQUNBLE1BQU1FLFFBQVEsR0FBR0YsT0FBTyxDQUFDLHFDQUFELENBQXhCOztBQUVBLE1BQU1HLGFBQWEsR0FBR0gsT0FBTyxDQUFDLGlCQUFELENBQTdCOztBQUVBLE1BQU1JLGFBQU4sU0FBNEJILGFBQTVCLENBQTBDO0FBQ3RDSSxFQUFBQSxXQUFXLENBQUNDLEtBQUQs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Q0FGWDtBQUdJLE1BQUEsT0FBTyxFQUFFLEtBQUtsQixLQUFMLENBQVdHLGdCQUh4QjtBQUlJLE1BQUEsUUFBUSxFQUFFLE1BQU0sS0FBS1ksc0JBQUw7QUFKcEIsTUFESixDQUxKLENBREo7QUFnQkg7O0FBRURNLEVBQUFBLE1BQU0sR0FBRztBQUNMLFVBQU1DLFVBQVUsR0FBRyxLQUFLNUIsS0FBTCxDQUFXWSxPQUFYLENBQW1CZ0IsVUFBbkIsRUFBbkI7QUFDQSx3QkFDSSxvQkFBQyxhQUFEO0FBQ0ksTUFBQSxLQUFLLEVBQUUsS0FBSzNCLElBQUwsQ0FBVXVCLENBQVYsQ0FBWSx5QkFBWixDQURYO0FBRUksTUFBQSxHQUFHLEVBQUVLLENBQUMsSUFBSyxLQUFLQyxLQUFMLEdBQWFELENBRjVCO0FBR0ksTUFBQSxJQUFJLEVBQUUsS0FBSzdCLEtBQUwsQ0FBV0UsSUFIckI7QUFJSSxNQUFBLE9BQU8sRUFBRSxLQUFLRixLQUFMLENBQVdZLE9BSnhCO0FBS0ksTUFBQSxNQUFNLEVBQUUsS0FBS1osS0FBTCxDQUFXK0IsTUFMdkI7QUFNSSxNQUFBLE9BQU8sRUFBRSxLQUFLL0IsS0FBTCxDQUFXZ0M7QUFOeEIsb0JBUUk7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLE9BQ0ssQ0FBQ0osVUFBRCxHQUFjLEtBQUtOLGtDQUFMLEVBQWQsR0FBMEQsSUFEL0QsRUFFSyxDQUFDTSxVQUFELEdBQWMsS0FBS0gsaUJBQUwsRUFBZCxHQUF5QyxJQUY5QyxFQUdLLEtBQUtDLHFCQUFMLEVBSEwsQ0FSSixDQURKO0FBZ0JIOztBQWxIcUM7O0FBb0gxQ08sTUFBTSxDQUFDQyxPQUFQLEdBQWlCcEMsYUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmNvbnN0IEZsdXhDb21wb25lbnQgPSByZXF1aXJlKCdlYWdsZS1wcmludC92aWV3cy9mbHV4X2NvbXBvbmVudCcpO1xyXG5jb25zdCBDaGVja2JveCA9IHJlcXVpcmUoJ2VhZ2xlLXByaW50L3ZpZXdzL3VpL2lucHV0X2NoZWNrYm94Jyk7XHJcblxyXG5jb25zdCBVdGlsaXR5VGFiU2V0ID0gcmVxdWlyZSgnLi91dGlsaXR5VGFiU2V0Jyk7XHJcblxyXG5jbGFzcyBOb3RpZmljYXRpb25zIGV4dGVuZHMgRmx1eENvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLmkxOG4gPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnVHJhbnNsYXRpb25TZXJ2aWNlJyk7XHJcbiAgICAgICAgdGhpcy5sb2dnZXIgPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnTG9nZ2luZ1NlcnZpY2UnKTtcclxuICAgICAgICB0aGlzLnRyYWNraW5nID0gdGhpcy5wcm9wcy5mbHV4LmdldFNlcnZpY2UoJ1RyYWNraW5nU2VydmljZScpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIGRldGVjdGlvbkVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIHNvdW5kRW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgYW5hbHl0aWNzRW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIGNvbnN0IGRldGVjdGlvbkRpc2FibGVkID0gdGhpcy5wcm9wcy5wcmludGVyLmdldERpc2FibGVkRXJyb3JzKCkuaW5jbHVkZXMoJ2ZpbGFtZW50X3NsaXAnKTtcclxuICAgICAgICBjb25zdCBzb3VuZEVuYWJsZWQgPSB0aGlzLnByb3BzLnByaW50ZXIuc291bmRTdGF0ZTtcclxuICAgICAgICBjb25zdCBhbmFseXRpY3NFbmFibGVkID0gdGhpcy5wcm9wcy5wcmludGVyLmFuYWx5dGljc1N0YXRlO1xyXG5cclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZGV0ZWN0aW9uRGlzYWJsZWQsIHNvdW5kRW5hYmxlZCwgYW5hbHl0aWNzRW5hYmxlZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVFbmFibGVEZXRlY3Rpb25Ub2dnbGUoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRldGVjdGlvbkRpc2FibGVkOiAhdGhpcy5zdGF0ZS5kZXRlY3Rpb25EaXNhYmxlZCB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucHJpbnRlci5pbnZva2UoJ1NldFRvb2xoZWFkRXJyb3JWaXNpYmlsaXR5JywgWydmaWxhbWVudF9zbGlwJywgdGhpcy5zdGF0ZS5kZXRlY3Rpb25EaXNhYmxlZF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZVNvdW5kVG9nZ2xlKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzb3VuZEVuYWJsZWQ6ICF0aGlzLnN0YXRlLnNvdW5kRW5hYmxlZCB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucHJpbnRlci5pbnZva2UoJ1RvZ2dsZVNvdW5kJywgW3RoaXMuc3RhdGUuc291bmRFbmFibGVkXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlQW5hbHl0aWNzRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgYW5hbHl0aWNzRW5hYmxlZDogIXRoaXMuc3RhdGUuYW5hbHl0aWNzRW5hYmxlZCB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMucHJpbnRlci5pbnZva2UoJ1NldEFuYWx5dGljc0VuYWJsZWQnLCBbdGhpcy5zdGF0ZS5hbmFseXRpY3NFbmFibGVkXSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyRmlsYW1lbnRFcnJvckRldGVjdGlvbk9wdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDIwIH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbD57dGhpcy5pMThuLnQoJ21iOm5vdGlmaWNhdGlvbnMuZmlsYW1lbnRFcnJvckRldGVjdGlvbi50aXRsZScpfTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+e3RoaXMuaTE4bi50KCdtYjpub3RpZmljYXRpb25zLmZpbGFtZW50RXJyb3JEZXRlY3Rpb24ucGFyYWdyYXBoJyl9PC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMjAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nZW5hYmxlSmFtRGV0ZWN0aW9uQ2hlY2tib3gnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0aGlzLmkxOG4udCgnbWI6bm90aWZpY2F0aW9ucy5maWxhbWVudEVycm9yRGV0ZWN0aW9uLmNoZWNrYm94Jyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9eyF0aGlzLnN0YXRlLmRldGVjdGlvbkRpc2FibGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy5oYW5kbGVFbmFibGVEZXRlY3Rpb25Ub2dnbGUoKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU291bmRPcHRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAyMCB9fT5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+e3RoaXMuaTE4bi50KCdtYjpub3RpZmljYXRpb25zLnNvdW5kLnRpdGxlJyl9PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8cD57dGhpcy5pMThuLnQoJ21iOm5vdGlmaWNhdGlvbnMuc291bmQucGFyYWdyYXBoJyl9PC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMjAgfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPENoZWNrYm94XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj0nZW5hYmxlU291bmRDaGVja2JveCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3RoaXMuaTE4bi50KCdtYjpub3RpZmljYXRpb25zLnNvdW5kLmNoZWNrYm94Jyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3RoaXMuc3RhdGUuc291bmRFbmFibGVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy5oYW5kbGVTb3VuZFRvZ2dsZSgpfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJBbmFseXRpY3NPcHRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAyMCB9fT5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWw+e3RoaXMuaTE4bi50KCdtYjpub3RpZmljYXRpb25zLmFuYWx5dGljcy50aXRsZScpfTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPHA+e3RoaXMuaTE4bi50KCdtYjpub3RpZmljYXRpb25zLmFuYWx5dGljcy5wYXJhZ3JhcGgnKX08L3A+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAyMCB9fT5cclxuICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPSdlbmFibGVBbmFseXRpY3NDaGVja2JveCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw9e3RoaXMuaTE4bi50KCdtYjpub3RpZmljYXRpb25zLmFuYWx5dGljcy5jaGVja2JveCcpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXt0aGlzLnN0YXRlLmFuYWx5dGljc0VuYWJsZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLmhhbmRsZUFuYWx5dGljc0VuYWJsZWQoKX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGlzU2l4dGhHZW4gPSB0aGlzLnByb3BzLnByaW50ZXIuaXNTaXh0aEdlbigpO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxVdGlsaXR5VGFiU2V0XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17dGhpcy5pMThuLnQoJ21iOm5vdGlmaWNhdGlvbnMuaGVhZGVyJyl9XHJcbiAgICAgICAgICAgICAgICByZWY9e2MgPT4gKHRoaXMucGFuZWwgPSBjKX1cclxuICAgICAgICAgICAgICAgIGZsdXg9e3RoaXMucHJvcHMuZmx1eH1cclxuICAgICAgICAgICAgICAgIHByaW50ZXI9e3RoaXMucHJvcHMucHJpbnRlcn1cclxuICAgICAgICAgICAgICAgIG9uQmFjaz17dGhpcy5wcm9wcy5vbkJhY2t9XHJcbiAgICAgICAgICAgICAgICBvbkNsb3NlPXt0aGlzLnByb3BzLm9uQ2xvc2V9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdwYW5lbC1ib2R5Jz5cclxuICAgICAgICAgICAgICAgICAgICB7IWlzU2l4dGhHZW4gPyB0aGlzLnJlbmRlckZpbGFtZW50RXJyb3JEZXRlY3Rpb25PcHRpb24oKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgeyFpc1NpeHRoR2VuID8gdGhpcy5yZW5kZXJTb3VuZE9wdGlvbigpIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5yZW5kZXJBbmFseXRpY3NPcHRpb24oKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L1V0aWxpdHlUYWJTZXQ+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGlmaWNhdGlvbnM7XHJcbiJdfQ==
