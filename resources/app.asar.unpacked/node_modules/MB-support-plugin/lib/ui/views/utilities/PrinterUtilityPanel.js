'use strict';

const React = require('react');

const FluxComponent = require('eagle-print/views/flux_component');

const R = require('ramda');

const path = require('path');

const {
  PrinterStateEnum,
  PrinterConnTypeEnum
} = require('../../../constants');

const UtilityTab = require('./utilityTab');

const UtilityHeader = require('./utilityHeader');

const UtilityTabSet = require('./utilityTabSet');

const PrinterInfo = require('./printerInfo');

const NetworkPreferences = require('./networkPreferences');

const FirmwareUpdatePanel = require('./firmwareUpdatePanel');

const CopyBotLogs = require('./copyBotLogs');

const Calibration = require('./calibration');

const ResetToFactory = require('./resetToFactory');

const Notifications = require('./notifications');

const FirmwareUpdateBanner = require('../firmwareUpdateBanner');

const PanelState = Object.freeze({
  MainMenu: 'default',
  // DEFAULT
  PrinterInfo: 'PrinterInfo',
  NetworkPreferences: 'NetworkPreferences',
  FirmwareUpdate: 'FirmwareUpdate',
  Calibration: 'Calibration',
  ResetToFactory: 'ResetToFactory',
  CopyBotLogs: 'CopyBotLogs',
  Notifications: 'Notifications'
});

class PrinterUtilityPanel extends FluxComponent {
  constructor(props) {
    super(props);
  }

  renderHeader() {
    const selectedPrinter = this.props.printer;
    return /*#__PURE__*/React.createElement("div", {
      tabKey: PanelState.MainMenu,
      style: {
        position: 'relative'
      }
    }, /*#__PURE__*/React.createElement(FirmwareUpdateBanner, {
      flux: this.getFlux(),
      printer: selectedPrinter,
      onBack: this.props.onBack
    }), /*#__PURE__*/React.createElement(UtilityHeader, {
      printer: this.props.printer,
      flux: this.props.flux
    }));
  }

  render() {
    const i18n = this.props.flux.getService('TranslationService');
    const selectedPrinter = this.props.printer;
    const status = selectedPrinter.getStatus() || {};
    const isSixthGen = selectedPrinter.isSixthGen();
    const isSketchPrinter = selectedPrinter.isSketchPrinter();
    return /*#__PURE__*/React.createElement(UtilityTabSet, R.merge(this.props, {
      title: i18n.t('mb:utility.header.utilities'),
      ref: c => this.panel = c,
      flux: this.props.flux,
      printer: this.props.printer,
      onBack: this.props.onBack
    }), this.renderHeader(), /*#__PURE__*/React.createElement(UtilityTab, R.merge(this.props, {
      tabKey: PanelState.PrinterInfo,
      tabName: i18n.t('mb:utility.category.printerinfo'),
      tabIcon: path.resolve(__dirname, '../images/Utilities_PrinterInfo.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: status.state === PrinterStateEnum.Unauthenticated
    }), /*#__PURE__*/React.createElement(PrinterInfo, {
      printer: selectedPrinter,
      onBack: () => this.panel.back(),
      onClose: this.props.onClose,
      flux: this.props.flux
    })), /*#__PURE__*/React.createElement(UtilityTab, R.merge(this.props, {
      tabKey: PanelState.NetworkPreferences,
      tabName: i18n.t('mb:utility.category.network'),
      tabIcon: path.resolve(__dirname, '../images/Utilities_Network.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: status.state === PrinterStateEnum.Unauthenticated || isSketchPrinter
    }), /*#__PURE__*/React.createElement(NetworkPreferences, {
      printer: selectedPrinter,
      onBack: () => this.panel.back(),
      onClose: this.props.onClose,
      flux: this.props.flux
    })), /*#__PURE__*/React.createElement(UtilityTab, R.merge(this.props, {
      tabKey: PanelState.FirmwareUpdate,
      tabName: i18n.t('mb:utility.category.firmware'),
      tabIcon: path.resolve(__dirname, '../images/firmware-update.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: status.state === PrinterStateEnum.Busy || status.state === PrinterStateEnum.Unauthenticated || isSketchPrinter
    }), /*#__PURE__*/React.createElement(FirmwareUpdatePanel, {
      printer: selectedPrinter,
      onBack: () => this.panel.back(),
      onClose: this.props.onClose,
      onUpdate: () => this.props.onBack(),
      flux: this.props.flux
    })), /*#__PURE__*/React.createElement(UtilityTab, R.merge(this.props, {
      tabKey: PanelState.CopyBotLogs,
      tabName: i18n.t('mb:utility.category.copyBotLogs'),
      tabIcon: path.resolve(__dirname, '../images/PBL_1_v3.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: selectedPrinter.getConnectionType() === PrinterConnTypeEnum.USB || isSketchPrinter
    }), /*#__PURE__*/React.createElement(CopyBotLogs, {
      printer: selectedPrinter,
      onBack: () => this.panel.back(),
      onClose: this.props.onClose,
      onUpdate: () => this.props.onBack(),
      flux: this.props.flux
    })), !isSixthGen ? /*#__PURE__*/React.createElement(UtilityTab, R.merge(this.props, {
      tabKey: PanelState.Calibration,
      tabName: i18n.t('mb:utility.category.calibration.header'),
      tabIcon: path.resolve(__dirname, '../images/calibration-utilities.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: isSketchPrinter
    }), /*#__PURE__*/React.createElement(Calibration, R.merge(this.props, {
      printer: selectedPrinter,
      onBack: () => this.panel.back(),
      onClose: this.props.onClose,
      onFinish: this.props.onBack,
      flux: this.props.flux
    }))) : null, /*#__PURE__*/React.createElement(UtilityTab, R.merge(this.props, {
      tabKey: PanelState.Notifications,
      tabName: i18n.t('mb:utility.category.notifications'),
      tabIcon: path.resolve(__dirname, '../images/notifications.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: status.state === PrinterStateEnum.Busy || status.state === PrinterStateEnum.Unauthenticated || isSketchPrinter
    }), /*#__PURE__*/React.createElement(Notifications, R.merge(this.props, {
      printer: selectedPrinter,
      onBack: () => this.panel.back(),
      onClose: this.props.onClose,
      onFinish: this.props.onBack,
      flux: this.props.flux
    }))), /*#__PURE__*/React.createElement(UtilityTab, R.merge(this.props, {
      tabKey: PanelState.ResetToFactory,
      tabName: i18n.t('mb:utility.category.resetToFactory'),
      tabIcon: path.resolve(__dirname, '../images/Utilities_Reset.svg'),
      onClick: tab => this.panel.select(tab),
      disabled: status.state === PrinterStateEnum.Busy || status.state === PrinterStateEnum.Unauthenticated || isSketchPrinter
    }), /*#__PURE__*/React.createElement(ResetToFactory, R.merge(this.props, {
      printer: selectedPrinter,
      onBack: () => this.panel.back(),
      onClose: this.props.onClose,
      onFinish: this.props.onBack,
      onResetSuccess: this.props.onResetSuccess,
      flux: this.props.flux
    }))));
  }

}

PrinterUtilityPanel.propTypes = {
  onBack: React.PropTypes.func.isRequired,
  onClose: React.PropTypes.func.isRequired,
  onResetSuccess: React.PropTypes.func.isRequired,
  printer: React.PropTypes.object.isRequired
};
module.exports = PrinterUtilityPanel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByaW50ZXJVdGlsaXR5UGFuZWwuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJyZXF1aXJlIiwiRmx1eENvbXBvbmVudCIsIlIiLCJwYXRoIiwiUHJpbnRlclN0YXRlRW51bSIsIlByaW50ZXJDb25uVHlwZUVudW0iLCJVdGlsaXR5VGFiIiwiVXRpbGl0eUhlYWRlciIsIlV0aWxpdHlUYWJTZXQiLCJQcmludGVySW5mbyIsIk5ldHdvcmtQcmVmZXJlbmNlcyIsIkZpcm13YXJlVXBkYXRlUGFuZWwiLCJDb3B5Qm90TG9ncyIsIkNhbGlicmF0aW9uIiwiUmVzZXRUb0ZhY3RvcnkiLCJOb3RpZmljYXRpb25zIiwiRmlybXdhcmVVcGRhdGVCYW5uZXIiLCJQYW5lbFN0YXRlIiwiT2JqZWN0IiwiZnJlZXplIiwiTWFpbk1lbnUiLCJGaXJtd2FyZVVwZGF0ZSIsIlByaW50ZXJVdGlsaXR5UGFuZWwiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwicmVuZGVySGVhZGVyIiwic2VsZWN0ZWRQcmludGVyIiwicHJpbnRlciIsInBvc2l0aW9uIiwiZ2V0Rmx1eCIsIm9uQmFjayIsImZsdXgiLCJyZW5kZXIiLCJpMThuIiwiZ2V0U2VydmljZSIsInN0YXR1cyIsImdldFN0YXR1cyIsImlzU2l4dGhHZW4iLCJpc1NrZXRjaFByaW50ZXIiLCJtZXJnZSIsInRpdGxlIiwidCIsInJlZiIsImMiLCJwYW5lbCIsInRhYktleSIsInRhYk5hbWUiLCJ0YWJJY29uIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIm9uQ2xpY2siLCJ0YWIiLCJzZWxlY3QiLCJkaXNhYmxlZCIsInN0YXRlIiwiVW5hdXRoZW50aWNhdGVkIiwiYmFjayIsIm9uQ2xvc2UiLCJCdXN5IiwiZ2V0Q29ubmVjdGlvblR5cGUiLCJVU0IiLCJvbkZpbmlzaCIsIm9uUmVzZXRTdWNjZXNzIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiZnVuYyIsImlzUmVxdWlyZWQiLCJvYmplY3QiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1h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RUFBRS9ELEtBQUssQ0FBQ2lFLFNBQU4sQ0FBZ0JDLElBQWhCLENBQXFCQyxVQUhUO0FBSTVCdkMsRUFBQUEsT0FBTyxFQUFFNUIsS0FBSyxDQUFDaUUsU0FBTixDQUFnQkcsTUFBaEIsQ0FBdUJEO0FBSkosQ0FBaEM7QUFPQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCL0MsbUJBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5jb25zdCBGbHV4Q29tcG9uZW50ID0gcmVxdWlyZSgnZWFnbGUtcHJpbnQvdmlld3MvZmx1eF9jb21wb25lbnQnKTtcclxuY29uc3QgUiA9IHJlcXVpcmUoJ3JhbWRhJyk7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcblxyXG5jb25zdCB7IFByaW50ZXJTdGF0ZUVudW0sIFByaW50ZXJDb25uVHlwZUVudW0gfSA9IHJlcXVpcmUoJy4uLy4uLy4uL2NvbnN0YW50cycpO1xyXG5jb25zdCBVdGlsaXR5VGFiID0gcmVxdWlyZSgnLi91dGlsaXR5VGFiJyk7XHJcbmNvbnN0IFV0aWxpdHlIZWFkZXIgPSByZXF1aXJlKCcuL3V0aWxpdHlIZWFkZXInKTtcclxuY29uc3QgVXRpbGl0eVRhYlNldCA9IHJlcXVpcmUoJy4vdXRpbGl0eVRhYlNldCcpO1xyXG5jb25zdCBQcmludGVySW5mbyA9IHJlcXVpcmUoJy4vcHJpbnRlckluZm8nKTtcclxuY29uc3QgTmV0d29ya1ByZWZlcmVuY2VzID0gcmVxdWlyZSgnLi9uZXR3b3JrUHJlZmVyZW5jZXMnKTtcclxuY29uc3QgRmlybXdhcmVVcGRhdGVQYW5lbCA9IHJlcXVpcmUoJy4vZmlybXdhcmVVcGRhdGVQYW5lbCcpO1xyXG5jb25zdCBDb3B5Qm90TG9ncyA9IHJlcXVpcmUoJy4vY29weUJvdExvZ3MnKTtcclxuY29uc3QgQ2FsaWJyYXRpb24gPSByZXF1aXJlKCcuL2NhbGlicmF0aW9uJyk7XHJcbmNvbnN0IFJlc2V0VG9GYWN0b3J5ID0gcmVxdWlyZSgnLi9yZXNldFRvRmFjdG9yeScpO1xyXG5jb25zdCBOb3RpZmljYXRpb25zID0gcmVxdWlyZSgnLi9ub3RpZmljYXRpb25zJyk7XHJcbmNvbnN0IEZpcm13YXJlVXBkYXRlQmFubmVyID0gcmVxdWlyZSgnLi4vZmlybXdhcmVVcGRhdGVCYW5uZXInKTtcclxuXHJcbmNvbnN0IFBhbmVsU3RhdGUgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIE1haW5NZW51OiAnZGVmYXVsdCcsIC8vIERFRkFVTFRcclxuICAgIFByaW50ZXJJbmZvOiAnUHJpbnRlckluZm8nLFxyXG4gICAgTmV0d29ya1ByZWZlcmVuY2VzOiAnTmV0d29ya1ByZWZlcmVuY2VzJyxcclxuICAgIEZpcm13YXJlVXBkYXRlOiAnRmlybXdhcmVVcGRhdGUnLFxyXG4gICAgQ2FsaWJyYXRpb246ICdDYWxpYnJhdGlvbicsXHJcbiAgICBSZXNldFRvRmFjdG9yeTogJ1Jlc2V0VG9GYWN0b3J5JyxcclxuICAgIENvcHlCb3RMb2dzOiAnQ29weUJvdExvZ3MnLFxyXG4gICAgTm90aWZpY2F0aW9uczogJ05vdGlmaWNhdGlvbnMnLFxyXG59KTtcclxuXHJcbmNsYXNzIFByaW50ZXJVdGlsaXR5UGFuZWwgZXh0ZW5kcyBGbHV4Q29tcG9uZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckhlYWRlcigpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3RlZFByaW50ZXIgPSB0aGlzLnByb3BzLnByaW50ZXI7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgdGFiS2V5PXtQYW5lbFN0YXRlLk1haW5NZW51fSBzdHlsZT17eyBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fT5cclxuICAgICAgICAgICAgICAgIDxGaXJtd2FyZVVwZGF0ZUJhbm5lciBmbHV4PXt0aGlzLmdldEZsdXgoKX0gcHJpbnRlcj17c2VsZWN0ZWRQcmludGVyfSBvbkJhY2s9e3RoaXMucHJvcHMub25CYWNrfSAvPlxyXG4gICAgICAgICAgICAgICAgPFV0aWxpdHlIZWFkZXIgcHJpbnRlcj17dGhpcy5wcm9wcy5wcmludGVyfSBmbHV4PXt0aGlzLnByb3BzLmZsdXh9IC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGkxOG4gPSB0aGlzLnByb3BzLmZsdXguZ2V0U2VydmljZSgnVHJhbnNsYXRpb25TZXJ2aWNlJyk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRQcmludGVyID0gdGhpcy5wcm9wcy5wcmludGVyO1xyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IHNlbGVjdGVkUHJpbnRlci5nZXRTdGF0dXMoKSB8fCB7fTtcclxuICAgICAgICBjb25zdCBpc1NpeHRoR2VuID0gc2VsZWN0ZWRQcmludGVyLmlzU2l4dGhHZW4oKTtcclxuICAgICAgICBjb25zdCBpc1NrZXRjaFByaW50ZXIgPSBzZWxlY3RlZFByaW50ZXIuaXNTa2V0Y2hQcmludGVyKCk7XHJcblxyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxVdGlsaXR5VGFiU2V0XHJcbiAgICAgICAgICAgICAgICB7Li4uUi5tZXJnZSh0aGlzLnByb3BzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGkxOG4udCgnbWI6dXRpbGl0eS5oZWFkZXIudXRpbGl0aWVzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmOiBjID0+ICh0aGlzLnBhbmVsID0gYyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmx1eDogdGhpcy5wcm9wcy5mbHV4LFxyXG4gICAgICAgICAgICAgICAgICAgIHByaW50ZXI6IHRoaXMucHJvcHMucHJpbnRlcixcclxuICAgICAgICAgICAgICAgICAgICBvbkJhY2s6IHRoaXMucHJvcHMub25CYWNrLFxyXG4gICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIHt0aGlzLnJlbmRlckhlYWRlcigpfVxyXG4gICAgICAgICAgICAgICAgPFV0aWxpdHlUYWJcclxuICAgICAgICAgICAgICAgICAgICB7Li4uUi5tZXJnZSh0aGlzLnByb3BzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYktleTogUGFuZWxTdGF0ZS5QcmludGVySW5mbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiTmFtZTogaTE4bi50KCdtYjp1dGlsaXR5LmNhdGVnb3J5LnByaW50ZXJpbmZvJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkljb246IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9pbWFnZXMvVXRpbGl0aWVzX1ByaW50ZXJJbmZvLnN2ZycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0YWIgPT4gdGhpcy5wYW5lbC5zZWxlY3QodGFiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHN0YXR1cy5zdGF0ZSA9PT0gUHJpbnRlclN0YXRlRW51bS5VbmF1dGhlbnRpY2F0ZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPFByaW50ZXJJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXI9e3NlbGVjdGVkUHJpbnRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25CYWNrPXsoKSA9PiB0aGlzLnBhbmVsLmJhY2soKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17dGhpcy5wcm9wcy5vbkNsb3NlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbHV4PXt0aGlzLnByb3BzLmZsdXh9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgIDwvVXRpbGl0eVRhYj5cclxuICAgICAgICAgICAgICAgIDxVdGlsaXR5VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgey4uLlIubWVyZ2UodGhpcy5wcm9wcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJLZXk6IFBhbmVsU3RhdGUuTmV0d29ya1ByZWZlcmVuY2VzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJOYW1lOiBpMThuLnQoJ21iOnV0aWxpdHkuY2F0ZWdvcnkubmV0d29yaycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJJY29uOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vaW1hZ2VzL1V0aWxpdGllc19OZXR3b3JrLnN2ZycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0YWIgPT4gdGhpcy5wYW5lbC5zZWxlY3QodGFiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHN0YXR1cy5zdGF0ZSA9PT0gUHJpbnRlclN0YXRlRW51bS5VbmF1dGhlbnRpY2F0ZWQgfHwgaXNTa2V0Y2hQcmludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxOZXR3b3JrUHJlZmVyZW5jZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRlcj17c2VsZWN0ZWRQcmludGVyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkJhY2s9eygpID0+IHRoaXMucGFuZWwuYmFjaygpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXt0aGlzLnByb3BzLm9uQ2xvc2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsdXg9e3RoaXMucHJvcHMuZmx1eH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9VdGlsaXR5VGFiPlxyXG4gICAgICAgICAgICAgICAgPFV0aWxpdHlUYWJcclxuICAgICAgICAgICAgICAgICAgICB7Li4uUi5tZXJnZSh0aGlzLnByb3BzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYktleTogUGFuZWxTdGF0ZS5GaXJtd2FyZVVwZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiTmFtZTogaTE4bi50KCdtYjp1dGlsaXR5LmNhdGVnb3J5LmZpcm13YXJlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkljb246IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9pbWFnZXMvZmlybXdhcmUtdXBkYXRlLnN2ZycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0YWIgPT4gdGhpcy5wYW5lbC5zZWxlY3QodGFiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuc3RhdGUgPT09IFByaW50ZXJTdGF0ZUVudW0uQnVzeSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLnN0YXRlID09PSBQcmludGVyU3RhdGVFbnVtLlVuYXV0aGVudGljYXRlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTa2V0Y2hQcmludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxGaXJtd2FyZVVwZGF0ZVBhbmVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXI9e3NlbGVjdGVkUHJpbnRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25CYWNrPXsoKSA9PiB0aGlzLnBhbmVsLmJhY2soKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17dGhpcy5wcm9wcy5vbkNsb3NlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZT17KCkgPT4gdGhpcy5wcm9wcy5vbkJhY2soKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmx1eD17dGhpcy5wcm9wcy5mbHV4fVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1V0aWxpdHlUYWI+XHJcbiAgICAgICAgICAgICAgICA8VXRpbGl0eVRhYlxyXG4gICAgICAgICAgICAgICAgICAgIHsuLi5SLm1lcmdlKHRoaXMucHJvcHMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiS2V5OiBQYW5lbFN0YXRlLkNvcHlCb3RMb2dzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJOYW1lOiBpMThuLnQoJ21iOnV0aWxpdHkuY2F0ZWdvcnkuY29weUJvdExvZ3MnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiSWNvbjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uL2ltYWdlcy9QQkxfMV92My5zdmcnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGFiID0+IHRoaXMucGFuZWwuc2VsZWN0KHRhYiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBzZWxlY3RlZFByaW50ZXIuZ2V0Q29ubmVjdGlvblR5cGUoKSA9PT0gUHJpbnRlckNvbm5UeXBlRW51bS5VU0IgfHwgaXNTa2V0Y2hQcmludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxDb3B5Qm90TG9nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmludGVyPXtzZWxlY3RlZFByaW50ZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQmFjaz17KCkgPT4gdGhpcy5wYW5lbC5iYWNrKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U9e3RoaXMucHJvcHMub25DbG9zZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25VcGRhdGU9eygpID0+IHRoaXMucHJvcHMub25CYWNrKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsdXg9e3RoaXMucHJvcHMuZmx1eH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9VdGlsaXR5VGFiPlxyXG4gICAgICAgICAgICAgICAgeyFpc1NpeHRoR2VuID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxVdGlsaXR5VGFiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsuLi5SLm1lcmdlKHRoaXMucHJvcHMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYktleTogUGFuZWxTdGF0ZS5DYWxpYnJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYk5hbWU6IGkxOG4udCgnbWI6dXRpbGl0eS5jYXRlZ29yeS5jYWxpYnJhdGlvbi5oZWFkZXInKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkljb246IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9pbWFnZXMvY2FsaWJyYXRpb24tdXRpbGl0aWVzLnN2ZycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGFiID0+IHRoaXMucGFuZWwuc2VsZWN0KHRhYiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogaXNTa2V0Y2hQcmludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxDYWxpYnJhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLlIubWVyZ2UodGhpcy5wcm9wcywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ZXI6IHNlbGVjdGVkUHJpbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJhY2s6ICgpID0+IHRoaXMucGFuZWwuYmFjaygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6IHRoaXMucHJvcHMub25DbG9zZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkZpbmlzaDogdGhpcy5wcm9wcy5vbkJhY2ssXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmx1eDogdGhpcy5wcm9wcy5mbHV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9VdGlsaXR5VGFiPlxyXG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICA8VXRpbGl0eVRhYlxyXG4gICAgICAgICAgICAgICAgICAgIHsuLi5SLm1lcmdlKHRoaXMucHJvcHMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiS2V5OiBQYW5lbFN0YXRlLk5vdGlmaWNhdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYk5hbWU6IGkxOG4udCgnbWI6dXRpbGl0eS5jYXRlZ29yeS5ub3RpZmljYXRpb25zJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkljb246IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9pbWFnZXMvbm90aWZpY2F0aW9ucy5zdmcnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljazogdGFiID0+IHRoaXMucGFuZWwuc2VsZWN0KHRhYiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLnN0YXRlID09PSBQcmludGVyU3RhdGVFbnVtLkJ1c3kgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cy5zdGF0ZSA9PT0gUHJpbnRlclN0YXRlRW51bS5VbmF1dGhlbnRpY2F0ZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2tldGNoUHJpbnRlcixcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8Tm90aWZpY2F0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4uUi5tZXJnZSh0aGlzLnByb3BzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludGVyOiBzZWxlY3RlZFByaW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJhY2s6ICgpID0+IHRoaXMucGFuZWwuYmFjaygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5wcm9wcy5vbkNsb3NlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25GaW5pc2g6IHRoaXMucHJvcHMub25CYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmx1eDogdGhpcy5wcm9wcy5mbHV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9VdGlsaXR5VGFiPlxyXG4gICAgICAgICAgICAgICAgPFV0aWxpdHlUYWJcclxuICAgICAgICAgICAgICAgICAgICB7Li4uUi5tZXJnZSh0aGlzLnByb3BzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYktleTogUGFuZWxTdGF0ZS5SZXNldFRvRmFjdG9yeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiTmFtZTogaTE4bi50KCdtYjp1dGlsaXR5LmNhdGVnb3J5LnJlc2V0VG9GYWN0b3J5JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYkljb246IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9pbWFnZXMvVXRpbGl0aWVzX1Jlc2V0LnN2ZycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiB0YWIgPT4gdGhpcy5wYW5lbC5zZWxlY3QodGFiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuc3RhdGUgPT09IFByaW50ZXJTdGF0ZUVudW0uQnVzeSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLnN0YXRlID09PSBQcmludGVyU3RhdGVFbnVtLlVuYXV0aGVudGljYXRlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTa2V0Y2hQcmludGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxSZXNldFRvRmFjdG9yeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Li4uUi5tZXJnZSh0aGlzLnByb3BzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludGVyOiBzZWxlY3RlZFByaW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkJhY2s6ICgpID0+IHRoaXMucGFuZWwuYmFjaygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbG9zZTogdGhpcy5wcm9wcy5vbkNsb3NlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25GaW5pc2g6IHRoaXMucHJvcHMub25CYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SZXNldFN1Y2Nlc3M6IHRoaXMucHJvcHMub25SZXNldFN1Y2Nlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbHV4OiB0aGlzLnByb3BzLmZsdXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICA8L1V0aWxpdHlUYWI+XHJcbiAgICAgICAgICAgIDwvVXRpbGl0eVRhYlNldD5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5QcmludGVyVXRpbGl0eVBhbmVsLnByb3BUeXBlcyA9IHtcclxuICAgIG9uQmFjazogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIG9uQ2xvc2U6IFJlYWN0LlByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXHJcbiAgICBvblJlc2V0U3VjY2VzczogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIHByaW50ZXI6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJpbnRlclV0aWxpdHlQYW5lbDtcclxuIl19
