'use strict';

const React = require('react');

const MenuItemData = require('eagle-print/views/menu/menu_item_data');

class ButtonWithDropdown extends React.Component {
  constructor(props) {
    super(props);
  }

  openContextMenu(event) {
    event.preventDefault();
    event.stopPropagation();
    const menuItems = this.props.menuItems.map(menuItem => {
      return new MenuItemData({
        path: menuItem.path,
        label: menuItem.label,
        action: menuItem.action
      });
    });
    this.props.flux.getService('MenuService').renderContextMenu(menuItems, event.clientX, event.clientY);
  }

  getDropdown(disabled, dropdownClasses) {
    return /*#__PURE__*/React.createElement("div", {
      id: "dropdown",
      className: `buttonDropdown ${dropdownClasses}${disabled ? ' disabled' : ''}`,
      onClick: disabled ? undefined : event => this.openContextMenu(event)
    }, /*#__PURE__*/React.createElement("div", {
      className: "buttonDropdownLabel"
    }, "..."));
  }

  render() {
    const disabled = this.props.disabled;
    const classes = this.props.classes ? this.props.classes : '';
    return /*#__PURE__*/React.createElement("div", {
      className: "buttonWithDropdownContainer"
    }, /*#__PURE__*/React.createElement("div", {
      id: this.props.id,
      className: `button ${classes}`,
      onClick: disabled ? undefined : this.props.onClick
    }, /*#__PURE__*/React.createElement("div", {
      className: "buttonLabel"
    }, this.props.label)), this.getDropdown(disabled, this.props.dropdownClasses));
  }

}

ButtonWithDropdown.displayName = 'ButtonWithDropdown';
ButtonWithDropdown.propTypes = {
  flux: React.PropTypes.object.isRequired,
  id: React.PropTypes.string.isRequired,
  label: React.PropTypes.string.isRequired,
  onClick: React.PropTypes.func.isRequired,
  disabled: React.PropTypes.bool,
  menuItems: React.PropTypes.array.isRequired,
  classes: React.PropTypes.string,
  dropdownClasses: React.PropTypes.string
};
module.exports = ButtonWithDropdown;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1dHRvbldpdGhEcm9wZG93bi5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJNZW51SXRlbURhdGEiLCJCdXR0b25XaXRoRHJvcGRvd24iLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwib3BlbkNvbnRleHRNZW51IiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIm1lbnVJdGVtcyIsIm1hcCIsIm1lbnVJdGVtIiwicGF0aCIsImxhYmVsIiwiYWN0aW9uIiwiZmx1eCIsImdldFNlcnZpY2UiLCJyZW5kZXJDb250ZXh0TWVudSIsImNsaWVudFgiLCJjbGllbnRZIiwiZ2V0RHJvcGRvd24iLCJkaXNhYmxlZCIsImRyb3Bkb3duQ2xhc3NlcyIsInVuZGVmaW5lZCIsInJlbmRlciIsImNsYXNzZXMiLCJpZCIsIm9uQ2xpY2siLCJkaXNwbGF5TmFtZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJzdHJpbmciLCJmdW5jIiwiYm9vbCIsImFycmF5IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxNQUFNQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyx1Q0FBRCxDQUE1Qjs7QUFFQSxNQUFNRSxrQkFBTixTQUFpQ0gsS0FBSyxDQUFDSSxTQUF2QyxDQUFpRDtBQUM3Q0MsRUFBQUEsV0FBVyxDQUFDQyxLQUFELEVBQVE7QUFDZixVQUFNQSxLQUFOO0FBQ0g7O0FBRURDLEVBQUFBLGVBQWUsQ0FBQ0MsS0FBRCxFQUFRO0FBQ25CQSxJQUFBQSxLQUFLLENBQUNDLGNBQU47QUFDQUQsSUFBQUEsS0FBSyxDQUFDRSxlQUFOO0FBQ0EsVUFBTUMsU0FBUyxHQUFHLEtBQUtMLEtBQUwsQ0FBV0ssU0FBWCxDQUFxQkMsR0FBckIsQ0FBeUJDLFFBQVEsSUFBSTtBQUNuRCxhQUFPLElBQUlYLFlBQUosQ0FBaUI7QUFDcEJZLFFBQUFBLElBQUksRUFBRUQsUUFBUSxDQUFDQyxJQURLO0FBRXBCQyxRQUFBQSxLQUFLLEVBQUVGLFFBQVEsQ0FBQ0UsS0FGSTtBQUdwQkMsUUFBQUEsTUFBTSxFQUFFSCxRQUFRLENBQUNHO0FBSEcsT0FBakIsQ0FBUDtBQUtILEtBTmlCLENBQWxCO0FBT0EsU0FBS1YsS0FBTCxDQUFXVyxJQUFYLENBQWdCQyxVQUFoQixDQUEyQixhQUEzQixFQUEwQ0MsaUJBQTFDLENBQTREUixTQUE1RCxFQUF1RUgsS0FBSyxDQUFDWSxPQUE3RSxFQUFzRlosS0FBSyxDQUFDYSxPQUE1RjtBQUNIOztBQUVEQyxFQUFBQSxXQUFXLENBQUNDLFFBQUQsRUFBV0MsZUFBWCxFQUE0QjtBQUNuQyx3QkFDSTtBQUNJLE1BQUEsRUFBRSxFQUFDLFVBRFA7QUFFSSxNQUFBLFNBQVMsRUFBRyxrQkFBaUJBLGVBQWdCLEdBQUVELFFBQVEsR0FBRyxXQUFILEdBQWlCLEVBQUcsRUFGL0U7QUFHSSxNQUFBLE9BQU8sRUFBRUEsUUFBUSxHQUFHRSxTQUFILEdBQWVqQixLQUFLLElBQUksS0FBS0QsZUFBTCxDQUFxQkMsS0FBckI7QUFIN0Msb0JBS0k7QUFBSyxNQUFBLFNBQVMsRUFBQztBQUFmLGFBTEosQ0FESjtBQVNIOztBQUVEa0IsRUFBQUEsTUFBTSxHQUFHO0FBQ0wsVUFBTUgsUUFBUSxHQUFHLEtBQUtqQixLQUFMLENBQVdpQixRQUE1QjtBQUNBLFVBQU1JLE9BQU8sR0FBRyxLQUFLckIsS0FBTCxDQUFXcUIsT0FBWCxHQUFxQixLQUFLckIsS0FBTCxDQUFXcUIsT0FBaEMsR0FBMEMsRUFBMUQ7QUFDQSx3QkFDSTtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsb0JBQ0k7QUFDSSxNQUFBLEVBQUUsRUFBRSxLQUFLckIsS0FBTCxDQUFXc0IsRUFEbkI7QUFFSSxNQUFBLFNBQVMsRUFBRyxVQUFTRCxPQUFRLEVBRmpDO0FBR0ksTUFBQSxPQUFPLEVBQUVKLFFBQVEsR0FBR0UsU0FBSCxHQUFlLEtBQUtuQixLQUFMLENBQVd1QjtBQUgvQyxvQkFLSTtBQUFLLE1BQUEsU0FBUyxFQUFDO0FBQWYsT0FBOEIsS0FBS3ZCLEtBQUwsQ0FBV1MsS0FBekMsQ0FMSixDQURKLEVBUUssS0FBS08sV0FBTCxDQUFpQkMsUUFBakIsRUFBMkIsS0FBS2pCLEtBQUwsQ0FBV2tCLGVBQXRDLENBUkwsQ0FESjtBQVlIOztBQTdDNEM7O0FBZ0RqRHJCLGtCQUFrQixDQUFDMkIsV0FBbkIsR0FBaUMsb0JBQWpDO0FBQ0EzQixrQkFBa0IsQ0FBQzRCLFNBQW5CLEdBQStCO0FBQzNCZCxFQUFBQSxJQUFJLEVBQUVqQixLQUFLLENBQUNnQyxTQUFOLENBQWdCQyxNQUFoQixDQUF1QkMsVUFERjtBQUUzQk4sRUFBQUEsRUFBRSxFQUFFNUIsS0FBSyxDQUFDZ0MsU0FBTixDQUFnQkcsTUFBaEIsQ0FBdUJELFVBRkE7QUFHM0JuQixFQUFBQSxLQUFLLEVBQUVmLEtBQUssQ0FBQ2dDLFNBQU4sQ0FBZ0JHLE1BQWhCLENBQXVCRCxVQUhIO0FBSTNCTCxFQUFBQSxPQUFPLEVBQUU3QixLQUFLLENBQUNnQyxTQUFOLENBQWdCSSxJQUFoQixDQUFxQkYsVUFKSDtBQUszQlgsRUFBQUEsUUFBUSxFQUFFdkIsS0FBSyxDQUFDZ0MsU0FBTixDQUFnQkssSUFMQztBQU0zQjFCLEVBQUFBLFNBQVMsRUFBRVgsS0FBSyxDQUFDZ0MsU0FBTixDQUFnQk0sS0FBaEIsQ0FBc0JKLFVBTk47QUFPM0JQLEVBQUFBLE9BQU8sRUFBRTNCLEtBQUssQ0FBQ2dDLFNBQU4sQ0FBZ0JHLE1BUEU7QUFRM0JYLEVBQUFBLGVBQWUsRUFBRXhCLEtBQUssQ0FBQ2dDLFNBQU4sQ0FBZ0JHO0FBUk4sQ0FBL0I7QUFXQUksTUFBTSxDQUFDQyxPQUFQLEdBQWlCckMsa0JBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xyXG5jb25zdCBNZW51SXRlbURhdGEgPSByZXF1aXJlKCdlYWdsZS1wcmludC92aWV3cy9tZW51L21lbnVfaXRlbV9kYXRhJyk7XHJcblxyXG5jbGFzcyBCdXR0b25XaXRoRHJvcGRvd24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkNvbnRleHRNZW51KGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBtZW51SXRlbXMgPSB0aGlzLnByb3BzLm1lbnVJdGVtcy5tYXAobWVudUl0ZW0gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lbnVJdGVtRGF0YSh7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBtZW51SXRlbS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IG1lbnVJdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBtZW51SXRlbS5hY3Rpb24sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucHJvcHMuZmx1eC5nZXRTZXJ2aWNlKCdNZW51U2VydmljZScpLnJlbmRlckNvbnRleHRNZW51KG1lbnVJdGVtcywgZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RHJvcGRvd24oZGlzYWJsZWQsIGRyb3Bkb3duQ2xhc3Nlcykge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGlkPSdkcm9wZG93bidcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGJ1dHRvbkRyb3Bkb3duICR7ZHJvcGRvd25DbGFzc2VzfSR7ZGlzYWJsZWQgPyAnIGRpc2FibGVkJyA6ICcnfWB9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtkaXNhYmxlZCA/IHVuZGVmaW5lZCA6IGV2ZW50ID0+IHRoaXMub3BlbkNvbnRleHRNZW51KGV2ZW50KX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2J1dHRvbkRyb3Bkb3duTGFiZWwnPi4uLjwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICBjb25zdCBkaXNhYmxlZCA9IHRoaXMucHJvcHMuZGlzYWJsZWQ7XHJcbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IHRoaXMucHJvcHMuY2xhc3NlcyA/IHRoaXMucHJvcHMuY2xhc3NlcyA6ICcnO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdidXR0b25XaXRoRHJvcGRvd25Db250YWluZXInPlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGlkPXt0aGlzLnByb3BzLmlkfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGJ1dHRvbiAke2NsYXNzZXN9YH1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtkaXNhYmxlZCA/IHVuZGVmaW5lZCA6IHRoaXMucHJvcHMub25DbGlja31cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYnV0dG9uTGFiZWwnPnt0aGlzLnByb3BzLmxhYmVsfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5nZXREcm9wZG93bihkaXNhYmxlZCwgdGhpcy5wcm9wcy5kcm9wZG93bkNsYXNzZXMpfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5CdXR0b25XaXRoRHJvcGRvd24uZGlzcGxheU5hbWUgPSAnQnV0dG9uV2l0aERyb3Bkb3duJztcclxuQnV0dG9uV2l0aERyb3Bkb3duLnByb3BUeXBlcyA9IHtcclxuICAgIGZsdXg6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QuaXNSZXF1aXJlZCxcclxuICAgIGlkOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLmlzUmVxdWlyZWQsXHJcbiAgICBsYWJlbDogUmVhY3QuUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgb25DbGljazogUmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcclxuICAgIGRpc2FibGVkOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcclxuICAgIG1lbnVJdGVtczogUmVhY3QuUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXHJcbiAgICBjbGFzc2VzOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgZHJvcGRvd25DbGFzc2VzOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCdXR0b25XaXRoRHJvcGRvd247XHJcbiJdfQ==
