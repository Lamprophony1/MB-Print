"use strict";

const R = require('ramda');

const React = require('react');

const DOM = React.DOM; // HELPERS

const disableClass = R.curry((disabled, className) => className + (disabled ? ' disabled' : ''));
const errorClass = R.curry((hasError, className) => className + (hasError ? ' error' : ''));

const listBoxClassName = ({
  disabled,
  error
}, className) => R.pipe(disableClass(disabled), errorClass(error))(className);

const listboxButton = ({
  label,
  onClick,
  disabled
}) => DOM.button({
  className: disableClass(disabled, 'list-box-button'),
  onClick: disabled ? () => {} : onClick
}, label);

const listboxItem = (onSelect, disabled) => ({
  label,
  value,
  selected,
  disabled: itemDisabled
}) => DOM.a({
  key: value,
  className: disableClass(itemDisabled, `list-box-item${selected ? ' list-box-item-selected' : ''}`),
  onClick: disabled || itemDisabled ? () => {} : () => onSelect(value)
}, label);

const listboxItems = (onSelect, items, disabled, emptyLabel) => !items || items.length > 0 ? R.map(listboxItem(onSelect, disabled), items) : DOM.em({}, emptyLabel); // PUBLIC COMPONENT


const Listbox = ({
  items,
  newItem,
  onAdd,
  onRemove,
  onSelect,
  onChange,
  placeholder,
  disabled,
  addLabel,
  removeLabel,
  className,
  emptyLabel,
  error
}) => DOM.div({
  className: `list-box ${className || ''}`
}, DOM.div({
  className: 'list-box-items'
}, listboxItems(onSelect, items, disabled, emptyLabel)), DOM.div({
  className: 'list-box-add-remove'
}, DOM.input({
  className: listBoxClassName({
    disabled,
    error
  }, 'list-box-input'),
  type: 'text',
  onChange: e => onChange(e.target.value),
  value: newItem,
  placeholder,
  disabled
}), listboxButton({
  label: addLabel || 'Add',
  onClick: onAdd,
  disabled
}), listboxButton({
  label: removeLabel || 'Remove',
  onClick: onRemove,
  disabled
})));

Listbox.propTypes = {
  items: React.PropTypes.array.isRequired,
  newItem: React.PropTypes.string,
  onAdd: React.PropTypes.func,
  onRemove: React.PropTypes.func,
  onSelect: React.PropTypes.func
};
Listbox.defaultProps = {
  onAdd: () => {},
  onRemove: () => {},
  onSelect: () => {}
};
module.exports = Listbox;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpc3Rib3guanMiXSwibmFtZXMiOlsiUiIsInJlcXVpcmUiLCJSZWFjdCIsIkRPTSIsImRpc2FibGVDbGFzcyIsImN1cnJ5IiwiZGlzYWJsZWQiLCJjbGFzc05hbWUiLCJlcnJvckNsYXNzIiwiaGFzRXJyb3IiLCJsaXN0Qm94Q2xhc3NOYW1lIiwiZXJyb3IiLCJwaXBlIiwibGlzdGJveEJ1dHRvbiIsImxhYmVsIiwib25DbGljayIsImJ1dHRvbiIsImxpc3Rib3hJdGVtIiwib25TZWxlY3QiLCJ2YWx1ZSIsInNlbGVjdGVkIiwiaXRlbURpc2FibGVkIiwiYSIsImtleSIsImxpc3Rib3hJdGVtcyIsIml0ZW1zIiwiZW1wdHlMYWJlbCIsImxlbmd0aCIsIm1hcCIsImVtIiwiTGlzdGJveCIsIm5ld0l0ZW0iLCJvbkFkZCIsIm9uUmVtb3ZlIiwib25DaGFuZ2UiLCJwbGFjZWhvbGRlciIsImFkZExhYmVsIiwicmVtb3ZlTGFiZWwiLCJkaXYiLCJpbnB1dCIsInR5cGUiLCJlIiwidGFyZ2V0IiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYXJyYXkiLCJpc1JlcXVpcmVkIiwic3RyaW5nIiwiZnVuYyIsImRlZmF1bHRQcm9wcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsQ0FBQyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFqQjs7QUFDQSxNQUFNQyxLQUFLLEdBQUdELE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLE1BQU1FLEdBQUcsR0FBR0QsS0FBSyxDQUFDQyxHQUFsQixDLENBRUE7O0FBRUEsTUFBTUMsWUFBWSxHQUFHSixDQUFDLENBQUNLLEtBQUYsQ0FBUSxDQUFDQyxRQUFELEVBQVdDLFNBQVgsS0FBeUJBLFNBQVMsSUFBSUQsUUFBUSxHQUFHLFdBQUgsR0FBaUIsRUFBN0IsQ0FBMUMsQ0FBckI7QUFFQSxNQUFNRSxVQUFVLEdBQUdSLENBQUMsQ0FBQ0ssS0FBRixDQUFRLENBQUNJLFFBQUQsRUFBV0YsU0FB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QU0sQ0FBRTtBQUhDLENBQXZCO0FBTUFnQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJyQixPQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFIgPSByZXF1aXJlKCdyYW1kYScpO1xyXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XHJcbmNvbnN0IERPTSA9IFJlYWN0LkRPTTtcclxuXHJcbi8vIEhFTFBFUlNcclxuXHJcbmNvbnN0IGRpc2FibGVDbGFzcyA9IFIuY3VycnkoKGRpc2FibGVkLCBjbGFzc05hbWUpID0+IGNsYXNzTmFtZSArIChkaXNhYmxlZCA/ICcgZGlzYWJsZWQnIDogJycpKTtcclxuXHJcbmNvbnN0IGVycm9yQ2xhc3MgPSBSLmN1cnJ5KChoYXNFcnJvciwgY2xhc3NOYW1lKSA9PiBjbGFzc05hbWUgKyAoaGFzRXJyb3IgPyAnIGVycm9yJyA6ICcnKSk7XHJcblxyXG5jb25zdCBsaXN0Qm94Q2xhc3NOYW1lID0gKHsgZGlzYWJsZWQsIGVycm9yIH0sIGNsYXNzTmFtZSkgPT5cclxuICAgIFIucGlwZShcclxuICAgICAgICBkaXNhYmxlQ2xhc3MoZGlzYWJsZWQpLFxyXG4gICAgICAgIGVycm9yQ2xhc3MoZXJyb3IpXHJcbiAgICApKGNsYXNzTmFtZSk7XHJcblxyXG5jb25zdCBsaXN0Ym94QnV0dG9uID0gKHsgbGFiZWwsIG9uQ2xpY2ssIGRpc2FibGVkIH0pID0+XHJcbiAgICBET00uYnV0dG9uKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgY2xhc3NOYW1lOiBkaXNhYmxlQ2xhc3MoZGlzYWJsZWQsICdsaXN0LWJveC1idXR0b24nKSxcclxuICAgICAgICAgICAgb25DbGljazogZGlzYWJsZWQgPyAoKSA9PiB7fSA6IG9uQ2xpY2ssXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbFxyXG4gICAgKTtcclxuXHJcbmNvbnN0IGxpc3Rib3hJdGVtID0gKG9uU2VsZWN0LCBkaXNhYmxlZCkgPT4gKHsgbGFiZWwsIHZhbHVlLCBzZWxlY3RlZCwgZGlzYWJsZWQ6IGl0ZW1EaXNhYmxlZCB9KSA9PlxyXG4gICAgRE9NLmEoXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBrZXk6IHZhbHVlLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6IGRpc2FibGVDbGFzcyhpdGVtRGlzYWJsZWQsIGBsaXN0LWJveC1pdGVtJHtzZWxlY3RlZCA/ICcgbGlzdC1ib3gtaXRlbS1zZWxlY3RlZCcgOiAnJ31gKSxcclxuICAgICAgICAgICAgb25DbGljazogZGlzYWJsZWQgfHwgaXRlbURpc2FibGVkID8gKCkgPT4ge30gOiAoKSA9PiBvblNlbGVjdCh2YWx1ZSksXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsYWJlbFxyXG4gICAgKTtcclxuXHJcbmNvbnN0IGxpc3Rib3hJdGVtcyA9IChvblNlbGVjdCwgaXRlbXMsIGRpc2FibGVkLCBlbXB0eUxhYmVsKSA9PlxyXG4gICAgIWl0ZW1zIHx8IGl0ZW1zLmxlbmd0aCA+IDAgPyBSLm1hcChsaXN0Ym94SXRlbShvblNlbGVjdCwgZGlzYWJsZWQpLCBpdGVtcykgOiBET00uZW0oe30sIGVtcHR5TGFiZWwpO1xyXG5cclxuLy8gUFVCTElDIENPTVBPTkVOVFxyXG5cclxuY29uc3QgTGlzdGJveCA9ICh7XHJcbiAgICBpdGVtcyxcclxuICAgIG5ld0l0ZW0sXHJcbiAgICBvbkFkZCxcclxuICAgIG9uUmVtb3ZlLFxyXG4gICAgb25TZWxlY3QsXHJcbiAgICBvbkNoYW5nZSxcclxuICAgIHBsYWNlaG9sZGVyLFxyXG4gICAgZGlzYWJsZWQsXHJcbiAgICBhZGRMYWJlbCxcclxuICAgIHJlbW92ZUxhYmVsLFxyXG4gICAgY2xhc3NOYW1lLFxyXG4gICAgZW1wdHlMYWJlbCxcclxuICAgIGVycm9yLFxyXG59KSA9PlxyXG4gICAgRE9NLmRpdihcclxuICAgICAgICB7IGNsYXNzTmFtZTogYGxpc3QtYm94ICR7Y2xhc3NOYW1lIHx8ICcnfWAgfSxcclxuICAgICAgICBET00uZGl2KHsgY2xhc3NOYW1lOiAnbGlzdC1ib3gtaXRlbXMnIH0sIGxpc3Rib3hJdGVtcyhvblNlbGVjdCwgaXRlbXMsIGRpc2FibGVkLCBlbXB0eUxhYmVsKSksXHJcbiAgICAgICAgRE9NLmRpdihcclxuICAgICAgICAgICAgeyBjbGFzc05hbWU6ICdsaXN0LWJveC1hZGQtcmVtb3ZlJyB9LFxyXG4gICAgICAgICAgICBET00uaW5wdXQoe1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBsaXN0Qm94Q2xhc3NOYW1lKHsgZGlzYWJsZWQsIGVycm9yIH0sICdsaXN0LWJveC1pbnB1dCcpLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U6IGUgPT4gb25DaGFuZ2UoZS50YXJnZXQudmFsdWUpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IG5ld0l0ZW0sXHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcixcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkLFxyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgbGlzdGJveEJ1dHRvbih7IGxhYmVsOiBhZGRMYWJlbCB8fCAnQWRkJywgb25DbGljazogb25BZGQsIGRpc2FibGVkIH0pLFxyXG4gICAgICAgICAgICBsaXN0Ym94QnV0dG9uKHsgbGFiZWw6IHJlbW92ZUxhYmVsIHx8ICdSZW1vdmUnLCBvbkNsaWNrOiBvblJlbW92ZSwgZGlzYWJsZWQgfSlcclxuICAgICAgICApXHJcbiAgICApO1xyXG5cclxuTGlzdGJveC5wcm9wVHlwZXMgPSB7XHJcbiAgICBpdGVtczogUmVhY3QuUHJvcFR5cGVzLmFycmF5LmlzUmVxdWlyZWQsXHJcbiAgICBuZXdJdGVtOiBSZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgb25BZGQ6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgb25SZW1vdmU6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG4gICAgb25TZWxlY3Q6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxyXG59O1xyXG5cclxuTGlzdGJveC5kZWZhdWx0UHJvcHMgPSB7XHJcbiAgICBvbkFkZDogKCkgPT4ge30sXHJcbiAgICBvblJlbW92ZTogKCkgPT4ge30sXHJcbiAgICBvblNlbGVjdDogKCkgPT4ge30sXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IExpc3Rib3g7XHJcbiJdfQ==
