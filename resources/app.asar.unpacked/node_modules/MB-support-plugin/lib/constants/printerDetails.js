'use strict';

const Immutable = require('immutable');

const Dispatch = Object.freeze({
  AcknowledgeCompleted: 'MB_PRINTER_DETAILS_ACKNOWLEDGE_COMPLETED',
  AcknowledgeError: 'MB_PRINTER_DETAILS_ACKNOWLEDGE_ERROR',
  AcknowledgeResumeError: 'MB_PRINTER_DETAILS_ACKNOWLEDGE_RESUME_ERROR',
  AcknowledgeFailure: 'MB_PRINTER_DETAILS_ACKNOWLEDGE_FAILURE',
  AcknowledgeSuccess: 'MB_PRINTER_DETAILS_ACKNOWLEDGE_SUCCESS',
  Suspend: 'MB_PRINTER_DETAILS_SUSPEND',
  Resume: 'MB_PRINTER_DETAILS_RESUME',
  Cancel: 'MB_PRINTER_DETAILS_CANCEL',
  StopFilament: 'MB_PRINTER_DETAILS_STOP_FILAMENT',
  PrintAgain: 'MB_PRINTER_DETAILS_PRINT_AGAIN',
  ShowPanelDetails: 'MB_PRINTER_DETAILS_SHOW_PANEL_DETAILS',
  ShowPanelFilament: 'MB_PRINTER_DETAILS_SHOW_PANEL_FILAMENT',
  ShowPanelUtilities: 'MB_PRINTER_DETAILS_SHOW_PANEL_UTILITIES',
  System: 'MB_PRINTER_DETAILS_SYSTEM_NOTIFICATION',
  State: 'MB_PRINTER_DETAILS_STATE_NOTIFICATION',
  Status: 'MB_PRINTER_DETAILS_STATUS_NOTIFICATION',
  ButtonWait: 'MB_PRINTER_DETAILS_BUTTON_WAIT',
  ExtruderChange: 'MB_PRINTER_DETAILS_EXTRUDER_CHANGE',
  NetworkChange: 'MB_PRINTER_DETAILS_NETWORK_CHANGE'
});
const PanelStates = Object.freeze({
  Details: 'Details',
  // The Default
  Utilities: 'Utilities',
  Filament: 'Filament'
}); // NOTE: the `status` in `enabled` and `shouldShow` is referring to the object
// returned by `printerDetailsStatus` in mb-plugin/lib/utils/printerDetails.js
//
// - `enabled` refers to whether the button can be clicked or not
// - `shouldShow` refers to whether the button is rendered or not
// - `default` will show if no other button is shown for the given printer state

const ActionButtons = Immutable.Map({
  pause: {
    label: i18n => i18n.t('printer_details.pause'),
    icon: () => 'icons/pause.svg',
    order: 0,
    enabled: status => status.can.suspend,
    shouldShow: status => status.can.suspend || !status.has.process,
    onClick: (actions, id) => () => actions.resume(id),
    default: true
  },
  continue: {
    label: i18n => i18n.t('mb:printerStatus.state.continue'),
    icon: () => 'icons/done_button.svg',
    order: 0,
    enabled: status => !status.is.pending,
    shouldShow: status => status.can.acknowledgeError,
    onClick: (actions, id) => () => actions.acknowledgeResumeError(id)
  },
  acknowledgeError: {
    label: i18n => i18n.t('mb:errors.button_text.OK'),
    icon: () => 'icons/done_button.svg',
    order: 0,
    enabled: status => !status.is.pending,
    shouldShow: status => status.has.acknowledgableError && !status.can.acknowledgeFailure,
    onClick: (actions, id) => () => actions.acknowledgeError(id)
  },
  acknowledgeFailure: {
    label: i18n => i18n.t('mb:errors.button_text.OK'),
    icon: () => 'icons/done_button.svg',
    order: 0,
    enabled: status => !status.is.pending,
    shouldShow: status => status.can.acknowledgeFailure && status.has.extruder,
    onClick: (actions, id) => () => actions.acknowledgeFailure(id)
  },
  acknowledgeSuccess: {
    label: i18n => i18n.t('mb:errors.button_text.OK'),
    icon: () => 'icons/done_button.svg',
    order: 0,
    enabled: status => !status.is.pending,
    shouldShow: status => status.can.acknowledgeSuccess,
    onClick: (actions, id) => () => actions.acknowledgeSuccess(id)
  },
  stopFilament: {
    label: i18n => i18n.t('mb:errors.button_text.OK'),
    icon: () => 'icons/done_button.svg',
    order: 0,
    enabled: status => !status.is.pending && !status.step.unloadingFilament,
    shouldShow: status => status.can.stopFilament,
    onClick: (actions, id) => () => actions.stopFilament(id)
  },
  printAgain: {
    label: i18n => i18n.t('mb:printer_details.print_again'),
    icon: () => 'icons/reprint_button.svg',
    order: 0,
    enabled: status => !status.is.pending,
    shouldShow: status => (status.step.failed || status.step.completed) && status.can.printAgain && !status.can.acknowledgeFailure,
    onClick: (actions, id) => () => actions.printAgain(id)
  },
  resume: {
    label: i18n => i18n.t('printer_details.resume'),
    icon: () => 'icons/resume-start.svg',
    order: 0,
    enabled: status => !status.is.pending && !status.step.suspending,
    shouldShow: status => status.can.resume && status.has.extruder,
    onClick: (actions, id) => () => actions.resume(id)
  },
  attachExtruder: {
    label: i18n => i18n.t('mb:printer_details.attach_extruder'),
    icon: () => 'icons/attach_extruder.svg',
    order: 0,
    enabled: status => !status.is.pending,
    shouldShow: status => !status.has.extruder && !status.has.dualExtruders && !status.has.error,
    onClick: (actions, id) => () => actions.attachExtruder(id)
  },
  cancel: {
    label: i18n => i18n.t('printer_details.cancel'),
    icon: () => 'icons/cancel-print.svg',
    order: 1,
    enabled: status => status.can.cancel,
    shouldShow: status => !status.step.completed,
    onClick: (actions, id) => () => actions.cancel(id),
    default: true
  },
  done: {
    label: i18n => i18n.t('mb:printer_details.done'),
    icon: () => 'icons/done_button.svg',
    order: 1,
    enabled: status => !status.is.pending,
    shouldShow: status => status.step.completed,
    onClick: (actions, id) => () => actions.done(id)
  },
  filament: {
    label: i18n => i18n.t('mb:filament.button'),
    icon: status => {
      return status.has.dualExtruders ? 'icons/filament-dual.svg' : 'icons/filament.svg';
    },
    order: 2,
    enabled: status => !!(status.is.authenticated && status.has.extruder && (status.is.idle || status.can.loadFilament || status.can.unloadFilament)),
    shouldShow: () => true,
    onClick: actions => () => actions.filament(),
    default: true
  },
  utilities: {
    label: i18n => i18n.t('printer_details.utilities'),
    icon: () => 'icons/utilities.svg',
    order: 3,
    enabled: status => !!(status.is.authenticated && status.has.state),
    shouldShow: () => true,
    onClick: actions => () => actions.utilities()
  }
});

const ProgressButtons = id => Immutable.Map({
  clear_build_plate: (i18n, actions) => ({
    label: i18n.t('mb:start_print'),
    primary: true,
    onClick: () => actions.acknowledgeBuildPlateCleared(id)
  }),
  clear_filament: (i18n, actions) => ({
    label: i18n.t('mb:errors.button_text.unload_filament'),
    onClick: () => actions.clearFilament(id)
  }),
  remove_filament: (i18n, actions) => ({
    label: i18n.t('mb:errors.button_text.runZCal'),
    onClick: () => actions.zCalFilament(id)
  })
});

module.exports = {
  Dispatch,
  PanelStates,
  ActionButtons,
  ProgressButtons
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByaW50ZXJEZXRhaWxzLmpzIl0sIm5hbWVzIjpbIkltbXV0YWJsZSIsInJlcXVpcmUiLCJEaXNwYXRjaCIsIk9iamVjdCIsImZyZWV6ZSIsIkFja25vd2xlZGdlQ29tcGxldGVkIiwiQWNrbm93bGVkZ2VFcnJvciIsIkFja25vd2xlZGdlUmVzdW1lRXJyb3IiLCJBY2tub3dsZWRnZUZhaWx1cmUiLCJBY2tub3dsZWRnZVN1Y2Nlc3MiLCJTdXNwZW5kIiwiUmVzdW1lIiwiQ2FuY2VsIiwiU3RvcEZpbGFtZW50IiwiUHJpbnRBZ2FpbiIsIlNob3dQYW5lbERldGFpbHMiLCJTaG93UGFuZWxGaWxhbWVudCIsIlNob3dQYW5lbFV0aWxpdGllcyIsIlN5c3RlbSIsIlN0YXRlIiwiU3RhdHVzIiwiQnV0dG9uV2FpdCIsIkV4dHJ1ZGVyQ2hhbmdlIiwiTmV0d29ya0NoYW5nZSIsIlBhbmVsU3RhdGVzIiwiRGV0YWlscyIsIlV0aWxpdGllcyIsIkZpbGFtZW50IiwiQWN0aW9uQnV0dG9ucyIsIk1hcCIsInBhdXNlIiwibGFiZWwiLCJpMThuIiwidCIsImljb24iLCJvcmRlciIsImVuYWJsZWQiLCJzdGF0dXMiLCJjYW4iLCJzdXNwZW5kIiwic2hvdWxkU2hvdyIsImhhcyIsInByb2Nlc3MiLCJvbkNsaWNrIiwiYWN0aW9ucyIsImlkIiwicmVzdW1lIiwiZGVmYXVsdCIsImNvbnRpbnVlIiwiaXMiLCJwZW5kaW5nIiwiYWNrbm93bGVkZ2VFcnJvciIsImFja25vd2xlZGdlUmVzdW1lRXJyb3IiLCJhY2tub3dsZWRnYWJsZUVycm9yIiwiYWNrbm93bGVkZ2VGYWlsdXJlIiwiZXh0cnVkZXIiLCJhY2tub3dsZWRnZVN1Y2Nlc3MiLCJzdG9wRmlsYW1lbnQiLCJzdGVwIiwidW5sb2FkaW5nRmlsYW1lbnQiLCJwcmludEFnYWluIiwiZmFpbGVkIiwiY29tcGxldGVkIiwic3VzcGVuZGluZyIsImF0dGFjaEV4dHJ1ZGVyIiwiZHVhbEV4dHJ1ZGVycyIsImVycm9yIiwiY2FuY2VsIiwiZG9uZSIsImZpbGFtZW50IiwiYXV0aGVudGljYXRlZCIsImlkbGUiLCJsb2FkRmlsYW1lbnQiLCJ1bmxvYWRGaWxhbWVudCIsInV0aWxpdGllcyIsInN0YXRlIiwiUHJvZ3Jlc3NCdXR0b25zIiwiY2xlYXJfYnVpbGRfcGxhdGUiLCJwcmltYXJ5IiwiYWNrbm93bGVkZ2VCdWlsZFBsYXRlQ2xlYXJlZCIsImNsZWFyX2ZpbGFtZW50IiwiY2xlYXJGaWxhbWVudCIsInJlbW92ZV9maWxhbWVudCIsInpDYWxGaWxhbWVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE1BQU1BLFNBQVMsR0FBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBekI7O0FBRUEsTUFBTUMsUUFBUSxHQUFHQyxNQUFNLENBQUNDLE1BQVAsQ0FBYztBQUMzQkMsRUFBQUEsb0JBQW9CLEVBQUUsMENBREs7QUFFM0JDLEVBQUFBLGdCQUFnQixFQUFFLHNDQUZTO0FBRzNCQyxFQUFBQSxzQkFBc0IsRUFBRSw2Q0FIRztBQUkzQkMsRUFBQUEsa0JBQWtCLEVBQUUsd0NBSk87QUFLM0JDLEVBQUFBLGtCQUFrQixFQUFFLHdDQUxPO0FBTTNCQyxFQUFBQSxPQUFPLEVBQUUsNEJBTmtCO0FBTzNCQyxFQUFBQSxNQUFNLEVBQUUsMkJBUG1CO0FBUTNCQyxFQUFBQSxNQUFNLEVBQUUsMkJBUm1CO0FBUzNCQyxFQUFBQSxZQUFZLEVBQUUsa0NBVGE7QUFVM0JDLEVBQUFBLFVBQVUsRUFBRSxnQ0FWZTtBQVczQkMsRUFBQUEsZ0JBQWdCLEVBQUUsdUNBWFM7QUFZM0JDLEVBQUFBLGlCQUFpQixFQUFFLHdDQVpRO0FBYTNCQyxFQUFBQSxrQkFBa0IsRUFBRSx5Q0FiTztBQWMzQkMsRUFBQUEsTUFBTSxFQUFFLHdDQWRtQjtBQWUzQkMsRUFBQUEsS0FBSyxFQUFFLHVDQWZvQjtBQWdCM0JDLEVBQUFBLE1BQU0sRUFBRSx3Q0FoQm1CO0FBaUIzQkMsRUFBQUEsVUFBVSxFQUFFLGdDQWpCZTtBQWtCM0JDLEVBQUFB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Tyx1Q0FBUCxDQUR5QjtBQUVoQ1UsSUFBQUEsT0FBTyxFQUFFLE1BQU1DLE9BQU8sQ0FBQ3FDLGFBQVIsQ0FBc0JwQyxFQUF0QjtBQUZpQixHQUFwQixDQU5OO0FBVVZxQyxFQUFBQSxlQUFlLEVBQUUsQ0FBQ2xELElBQUQsRUFBT1ksT0FBUCxNQUFvQjtBQUNqQ2IsSUFBQUEsS0FBSyxFQUFFQyxJQUFJLENBQUNDLENBQUwsQ0FBTywrQkFBUCxDQUQwQjtBQUVqQ1UsSUFBQUEsT0FBTyxFQUFFLE1BQU1DLE9BQU8sQ0FBQ3VDLFlBQVIsQ0FBcUJ0QyxFQUFyQjtBQUZrQixHQUFwQjtBQVZQLENBQWQsQ0FESjs7QUFpQkF1QyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFDYm5GLEVBQUFBLFFBRGE7QUFFYnNCLEVBQUFBLFdBRmE7QUFHYkksRUFBQUEsYUFIYTtBQUliZ0QsRUFBQUE7QUFKYSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IEltbXV0YWJsZSA9IHJlcXVpcmUoJ2ltbXV0YWJsZScpO1xyXG5cclxuY29uc3QgRGlzcGF0Y2ggPSBPYmplY3QuZnJlZXplKHtcclxuICAgIEFja25vd2xlZGdlQ29tcGxldGVkOiAnTUJfUFJJTlRFUl9ERVRBSUxTX0FDS05PV0xFREdFX0NPTVBMRVRFRCcsXHJcbiAgICBBY2tub3dsZWRnZUVycm9yOiAnTUJfUFJJTlRFUl9ERVRBSUxTX0FDS05PV0xFREdFX0VSUk9SJyxcclxuICAgIEFja25vd2xlZGdlUmVzdW1lRXJyb3I6ICdNQl9QUklOVEVSX0RFVEFJTFNfQUNLTk9XTEVER0VfUkVTVU1FX0VSUk9SJyxcclxuICAgIEFja25vd2xlZGdlRmFpbHVyZTogJ01CX1BSSU5URVJfREVUQUlMU19BQ0tOT1dMRURHRV9GQUlMVVJFJyxcclxuICAgIEFja25vd2xlZGdlU3VjY2VzczogJ01CX1BSSU5URVJfREVUQUlMU19BQ0tOT1dMRURHRV9TVUNDRVNTJyxcclxuICAgIFN1c3BlbmQ6ICdNQl9QUklOVEVSX0RFVEFJTFNfU1VTUEVORCcsXHJcbiAgICBSZXN1bWU6ICdNQl9QUklOVEVSX0RFVEFJTFNfUkVTVU1FJyxcclxuICAgIENhbmNlbDogJ01CX1BSSU5URVJfREVUQUlMU19DQU5DRUwnLFxyXG4gICAgU3RvcEZpbGFtZW50OiAnTUJfUFJJTlRFUl9ERVRBSUxTX1NUT1BfRklMQU1FTlQnLFxyXG4gICAgUHJpbnRBZ2FpbjogJ01CX1BSSU5URVJfREVUQUlMU19QUklOVF9BR0FJTicsXHJcbiAgICBTaG93UGFuZWxEZXRhaWxzOiAnTUJfUFJJTlRFUl9ERVRBSUxTX1NIT1dfUEFORUxfREVUQUlMUycsXHJcbiAgICBTaG93UGFuZWxGaWxhbWVudDogJ01CX1BSSU5URVJfREVUQUlMU19TSE9XX1BBTkVMX0ZJTEFNRU5UJyxcclxuICAgIFNob3dQYW5lbFV0aWxpdGllczogJ01CX1BSSU5URVJfREVUQUlMU19TSE9XX1BBTkVMX1VUSUxJVElFUycsXHJcbiAgICBTeXN0ZW06ICdNQl9QUklOVEVSX0RFVEFJTFNfU1lTVEVNX05PVElGSUNBVElPTicsXHJcbiAgICBTdGF0ZTogJ01CX1BSSU5URVJfREVUQUlMU19TVEFURV9OT1RJRklDQVRJT04nLFxyXG4gICAgU3RhdHVzOiAnTUJfUFJJTlRFUl9ERVRBSUxTX1NUQVRVU19OT1RJRklDQVRJT04nLFxyXG4gICAgQnV0dG9uV2FpdDogJ01CX1BSSU5URVJfREVUQUlMU19CVVRUT05fV0FJVCcsXHJcbiAgICBFeHRydWRlckNoYW5nZTogJ01CX1BSSU5URVJfREVUQUlMU19FWFRSVURFUl9DSEFOR0UnLFxyXG4gICAgTmV0d29ya0NoYW5nZTogJ01CX1BSSU5URVJfREVUQUlMU19ORVRXT1JLX0NIQU5HRScsXHJcbn0pO1xyXG5cclxuY29uc3QgUGFuZWxTdGF0ZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIERldGFpbHM6ICdEZXRhaWxzJywgLy8gVGhlIERlZmF1bHRcclxuICAgIFV0aWxpdGllczogJ1V0aWxpdGllcycsXHJcbiAgICBGaWxhbWVudDogJ0ZpbGFtZW50JyxcclxufSk7XHJcblxyXG4vLyBOT1RFOiB0aGUgYHN0YXR1c2AgaW4gYGVuYWJsZWRgIGFuZCBgc2hvdWxkU2hvd2AgaXMgcmVmZXJyaW5nIHRvIHRoZSBvYmplY3RcclxuLy8gcmV0dXJuZWQgYnkgYHByaW50ZXJEZXRhaWxzU3RhdHVzYCBpbiBtYi1wbHVnaW4vbGliL3V0aWxzL3ByaW50ZXJEZXRhaWxzLmpzXHJcbi8vXHJcbi8vIC0gYGVuYWJsZWRgIHJlZmVycyB0byB3aGV0aGVyIHRoZSBidXR0b24gY2FuIGJlIGNsaWNrZWQgb3Igbm90XHJcbi8vIC0gYHNob3VsZFNob3dgIHJlZmVycyB0byB3aGV0aGVyIHRoZSBidXR0b24gaXMgcmVuZGVyZWQgb3Igbm90XHJcbi8vIC0gYGRlZmF1bHRgIHdpbGwgc2hvdyBpZiBubyBvdGhlciBidXR0b24gaXMgc2hvd24gZm9yIHRoZSBnaXZlbiBwcmludGVyIHN0YXRlXHJcbmNvbnN0IEFjdGlvbkJ1dHRvbnMgPSBJbW11dGFibGUuTWFwKHtcclxuICAgIHBhdXNlOiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdwcmludGVyX2RldGFpbHMucGF1c2UnKSxcclxuICAgICAgICBpY29uOiAoKSA9PiAnaWNvbnMvcGF1c2Uuc3ZnJyxcclxuICAgICAgICBvcmRlcjogMCxcclxuICAgICAgICBlbmFibGVkOiBzdGF0dXMgPT4gc3RhdHVzLmNhbi5zdXNwZW5kLFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PiBzdGF0dXMuY2FuLnN1c3BlbmQgfHwgIXN0YXR1cy5oYXMucHJvY2VzcyxcclxuICAgICAgICBvbkNsaWNrOiAoYWN0aW9ucywgaWQpID0+ICgpID0+IGFjdGlvbnMucmVzdW1lKGlkKSxcclxuICAgICAgICBkZWZhdWx0OiB0cnVlLFxyXG4gICAgfSxcclxuICAgIGNvbnRpbnVlOiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdtYjpwcmludGVyU3RhdHVzLnN0YXRlLmNvbnRpbnVlJyksXHJcbiAgICAgICAgaWNvbjogKCkgPT4gJ2ljb25zL2RvbmVfYnV0dG9uLnN2ZycsXHJcbiAgICAgICAgb3JkZXI6IDAsXHJcbiAgICAgICAgZW5hYmxlZDogc3RhdHVzID0+ICFzdGF0dXMuaXMucGVuZGluZyxcclxuICAgICAgICBzaG91bGRTaG93OiBzdGF0dXMgPT4gc3RhdHVzLmNhbi5hY2tub3dsZWRnZUVycm9yLFxyXG4gICAgICAgIG9uQ2xpY2s6IChhY3Rpb25zLCBpZCkgPT4gKCkgPT4gYWN0aW9ucy5hY2tub3dsZWRnZVJlc3VtZUVycm9yKGlkKSxcclxuICAgIH0sXHJcbiAgICBhY2tub3dsZWRnZUVycm9yOiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdtYjplcnJvcnMuYnV0dG9uX3RleHQuT0snKSxcclxuICAgICAgICBpY29uOiAoKSA9PiAnaWNvbnMvZG9uZV9idXR0b24uc3ZnJyxcclxuICAgICAgICBvcmRlcjogMCxcclxuICAgICAgICBlbmFibGVkOiBzdGF0dXMgPT4gIXN0YXR1cy5pcy5wZW5kaW5nLFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PiBzdGF0dXMuaGFzLmFja25vd2xlZGdhYmxlRXJyb3IgJiYgIXN0YXR1cy5jYW4uYWNrbm93bGVkZ2VGYWlsdXJlLFxyXG4gICAgICAgIG9uQ2xpY2s6IChhY3Rpb25zLCBpZCkgPT4gKCkgPT4gYWN0aW9ucy5hY2tub3dsZWRnZUVycm9yKGlkKSxcclxuICAgIH0sXHJcbiAgICBhY2tub3dsZWRnZUZhaWx1cmU6IHtcclxuICAgICAgICBsYWJlbDogaTE4biA9PiBpMThuLnQoJ21iOmVycm9ycy5idXR0b25fdGV4dC5PSycpLFxyXG4gICAgICAgIGljb246ICgpID0+ICdpY29ucy9kb25lX2J1dHRvbi5zdmcnLFxyXG4gICAgICAgIG9yZGVyOiAwLFxyXG4gICAgICAgIGVuYWJsZWQ6IHN0YXR1cyA9PiAhc3RhdHVzLmlzLnBlbmRpbmcsXHJcbiAgICAgICAgc2hvdWxkU2hvdzogc3RhdHVzID0+IHN0YXR1cy5jYW4uYWNrbm93bGVkZ2VGYWlsdXJlICYmIHN0YXR1cy5oYXMuZXh0cnVkZXIsXHJcbiAgICAgICAgb25DbGljazogKGFjdGlvbnMsIGlkKSA9PiAoKSA9PiBhY3Rpb25zLmFja25vd2xlZGdlRmFpbHVyZShpZCksXHJcbiAgICB9LFxyXG4gICAgYWNrbm93bGVkZ2VTdWNjZXNzOiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdtYjplcnJvcnMuYnV0dG9uX3RleHQuT0snKSxcclxuICAgICAgICBpY29uOiAoKSA9PiAnaWNvbnMvZG9uZV9idXR0b24uc3ZnJyxcclxuICAgICAgICBvcmRlcjogMCxcclxuICAgICAgICBlbmFibGVkOiBzdGF0dXMgPT4gIXN0YXR1cy5pcy5wZW5kaW5nLFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PiBzdGF0dXMuY2FuLmFja25vd2xlZGdlU3VjY2VzcyxcclxuICAgICAgICBvbkNsaWNrOiAoYWN0aW9ucywgaWQpID0+ICgpID0+IGFjdGlvbnMuYWNrbm93bGVkZ2VTdWNjZXNzKGlkKSxcclxuICAgIH0sXHJcbiAgICBzdG9wRmlsYW1lbnQ6IHtcclxuICAgICAgICBsYWJlbDogaTE4biA9PiBpMThuLnQoJ21iOmVycm9ycy5idXR0b25fdGV4dC5PSycpLFxyXG4gICAgICAgIGljb246ICgpID0+ICdpY29ucy9kb25lX2J1dHRvbi5zdmcnLFxyXG4gICAgICAgIG9yZGVyOiAwLFxyXG4gICAgICAgIGVuYWJsZWQ6IHN0YXR1cyA9PiAhc3RhdHVzLmlzLnBlbmRpbmcgJiYgIXN0YXR1cy5zdGVwLnVubG9hZGluZ0ZpbGFtZW50LFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PiBzdGF0dXMuY2FuLnN0b3BGaWxhbWVudCxcclxuICAgICAgICBvbkNsaWNrOiAoYWN0aW9ucywgaWQpID0+ICgpID0+IGFjdGlvbnMuc3RvcEZpbGFtZW50KGlkKSxcclxuICAgIH0sXHJcbiAgICBwcmludEFnYWluOiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdtYjpwcmludGVyX2RldGFpbHMucHJpbnRfYWdhaW4nKSxcclxuICAgICAgICBpY29uOiAoKSA9PiAnaWNvbnMvcmVwcmludF9idXR0b24uc3ZnJyxcclxuICAgICAgICBvcmRlcjogMCxcclxuICAgICAgICBlbmFibGVkOiBzdGF0dXMgPT4gIXN0YXR1cy5pcy5wZW5kaW5nLFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PlxyXG4gICAgICAgICAgICAoc3RhdHVzLnN0ZXAuZmFpbGVkIHx8IHN0YXR1cy5zdGVwLmNvbXBsZXRlZCkgJiYgc3RhdHVzLmNhbi5wcmludEFnYWluICYmICFzdGF0dXMuY2FuLmFja25vd2xlZGdlRmFpbHVyZSxcclxuICAgICAgICBvbkNsaWNrOiAoYWN0aW9ucywgaWQpID0+ICgpID0+IGFjdGlvbnMucHJpbnRBZ2FpbihpZCksXHJcbiAgICB9LFxyXG4gICAgcmVzdW1lOiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdwcmludGVyX2RldGFpbHMucmVzdW1lJyksXHJcbiAgICAgICAgaWNvbjogKCkgPT4gJ2ljb25zL3Jlc3VtZS1zdGFydC5zdmcnLFxyXG4gICAgICAgIG9yZGVyOiAwLFxyXG5cclxuICAgICAgICBlbmFibGVkOiBzdGF0dXMgPT4gIXN0YXR1cy5pcy5wZW5kaW5nICYmICFzdGF0dXMuc3RlcC5zdXNwZW5kaW5nLFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PiBzdGF0dXMuY2FuLnJlc3VtZSAmJiBzdGF0dXMuaGFzLmV4dHJ1ZGVyLFxyXG4gICAgICAgIG9uQ2xpY2s6IChhY3Rpb25zLCBpZCkgPT4gKCkgPT4gYWN0aW9ucy5yZXN1bWUoaWQpLFxyXG4gICAgfSxcclxuICAgIGF0dGFjaEV4dHJ1ZGVyOiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdtYjpwcmludGVyX2RldGFpbHMuYXR0YWNoX2V4dHJ1ZGVyJyksXHJcbiAgICAgICAgaWNvbjogKCkgPT4gJ2ljb25zL2F0dGFjaF9leHRydWRlci5zdmcnLFxyXG4gICAgICAgIG9yZGVyOiAwLFxyXG4gICAgICAgIGVuYWJsZWQ6IHN0YXR1cyA9PiAhc3RhdHVzLmlzLnBlbmRpbmcsXHJcbiAgICAgICAgc2hvdWxkU2hvdzogc3RhdHVzID0+ICFzdGF0dXMuaGFzLmV4dHJ1ZGVyICYmICFzdGF0dXMuaGFzLmR1YWxFeHRydWRlcnMgJiYgIXN0YXR1cy5oYXMuZXJyb3IsXHJcbiAgICAgICAgb25DbGljazogKGFjdGlvbnMsIGlkKSA9PiAoKSA9PiBhY3Rpb25zLmF0dGFjaEV4dHJ1ZGVyKGlkKSxcclxuICAgIH0sXHJcbiAgICBjYW5jZWw6IHtcclxuICAgICAgICBsYWJlbDogaTE4biA9PiBpMThuLnQoJ3ByaW50ZXJfZGV0YWlscy5jYW5jZWwnKSxcclxuICAgICAgICBpY29uOiAoKSA9PiAnaWNvbnMvY2FuY2VsLXByaW50LnN2ZycsXHJcbiAgICAgICAgb3JkZXI6IDEsXHJcbiAgICAgICAgZW5hYmxlZDogc3RhdHVzID0+IHN0YXR1cy5jYW4uY2FuY2VsLFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PiAhc3RhdHVzLnN0ZXAuY29tcGxldGVkLFxyXG4gICAgICAgIG9uQ2xpY2s6IChhY3Rpb25zLCBpZCkgPT4gKCkgPT4gYWN0aW9ucy5jYW5jZWwoaWQpLFxyXG4gICAgICAgIGRlZmF1bHQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgZG9uZToge1xyXG4gICAgICAgIGxhYmVsOiBpMThuID0+IGkxOG4udCgnbWI6cHJpbnRlcl9kZXRhaWxzLmRvbmUnKSxcclxuICAgICAgICBpY29uOiAoKSA9PiAnaWNvbnMvZG9uZV9idXR0b24uc3ZnJyxcclxuICAgICAgICBvcmRlcjogMSxcclxuICAgICAgICBlbmFibGVkOiBzdGF0dXMgPT4gIXN0YXR1cy5pcy5wZW5kaW5nLFxyXG4gICAgICAgIHNob3VsZFNob3c6IHN0YXR1cyA9PiBzdGF0dXMuc3RlcC5jb21wbGV0ZWQsXHJcbiAgICAgICAgb25DbGljazogKGFjdGlvbnMsIGlkKSA9PiAoKSA9PiBhY3Rpb25zLmRvbmUoaWQpLFxyXG4gICAgfSxcclxuICAgIGZpbGFtZW50OiB7XHJcbiAgICAgICAgbGFiZWw6IGkxOG4gPT4gaTE4bi50KCdtYjpmaWxhbWVudC5idXR0b24nKSxcclxuICAgICAgICBpY29uOiBzdGF0dXMgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdHVzLmhhcy5kdWFsRXh0cnVkZXJzID8gJ2ljb25zL2ZpbGFtZW50LWR1YWwuc3ZnJyA6ICdpY29ucy9maWxhbWVudC5zdmcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3JkZXI6IDIsXHJcbiAgICAgICAgZW5hYmxlZDogc3RhdHVzID0+XHJcbiAgICAgICAgICAgICEhKFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzLmlzLmF1dGhlbnRpY2F0ZWQgJiZcclxuICAgICAgICAgICAgICAgIHN0YXR1cy5oYXMuZXh0cnVkZXIgJiZcclxuICAgICAgICAgICAgICAgIChzdGF0dXMuaXMuaWRsZSB8fCBzdGF0dXMuY2FuLmxvYWRGaWxhbWVudCB8fCBzdGF0dXMuY2FuLnVubG9hZEZpbGFtZW50KVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgIHNob3VsZFNob3c6ICgpID0+IHRydWUsXHJcbiAgICAgICAgb25DbGljazogYWN0aW9ucyA9PiAoKSA9PiBhY3Rpb25zLmZpbGFtZW50KCksXHJcbiAgICAgICAgZGVmYXVsdDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICB1dGlsaXRpZXM6IHtcclxuICAgICAgICBsYWJlbDogaTE4biA9PiBpMThuLnQoJ3ByaW50ZXJfZGV0YWlscy51dGlsaXRpZXMnKSxcclxuICAgICAgICBpY29uOiAoKSA9PiAnaWNvbnMvdXRpbGl0aWVzLnN2ZycsXHJcbiAgICAgICAgb3JkZXI6IDMsXHJcbiAgICAgICAgZW5hYmxlZDogc3RhdHVzID0+ICEhKHN0YXR1cy5pcy5hdXRoZW50aWNhdGVkICYmIHN0YXR1cy5oYXMuc3RhdGUpLFxyXG4gICAgICAgIHNob3VsZFNob3c6ICgpID0+IHRydWUsXHJcbiAgICAgICAgb25DbGljazogYWN0aW9ucyA9PiAoKSA9PiBhY3Rpb25zLnV0aWxpdGllcygpLFxyXG4gICAgfSxcclxufSk7XHJcblxyXG5jb25zdCBQcm9ncmVzc0J1dHRvbnMgPSBpZCA9PlxyXG4gICAgSW1tdXRhYmxlLk1hcCh7XHJcbiAgICAgICAgY2xlYXJfYnVpbGRfcGxhdGU6IChpMThuLCBhY3Rpb25zKSA9PiAoe1xyXG4gICAgICAgICAgICBsYWJlbDogaTE4bi50KCdtYjpzdGFydF9wcmludCcpLFxyXG4gICAgICAgICAgICBwcmltYXJ5OiB0cnVlLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBhY3Rpb25zLmFja25vd2xlZGdlQnVpbGRQbGF0ZUNsZWFyZWQoaWQpLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGNsZWFyX2ZpbGFtZW50OiAoaTE4biwgYWN0aW9ucykgPT4gKHtcclxuICAgICAgICAgICAgbGFiZWw6IGkxOG4udCgnbWI6ZXJyb3JzLmJ1dHRvbl90ZXh0LnVubG9hZF9maWxhbWVudCcpLFxyXG4gICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiBhY3Rpb25zLmNsZWFyRmlsYW1lbnQoaWQpLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIHJlbW92ZV9maWxhbWVudDogKGkxOG4sIGFjdGlvbnMpID0+ICh7XHJcbiAgICAgICAgICAgIGxhYmVsOiBpMThuLnQoJ21iOmVycm9ycy5idXR0b25fdGV4dC5ydW5aQ2FsJyksXHJcbiAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IGFjdGlvbnMuekNhbEZpbGFtZW50KGlkKSxcclxuICAgICAgICB9KSxcclxuICAgIH0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBEaXNwYXRjaCxcclxuICAgIFBhbmVsU3RhdGVzLFxyXG4gICAgQWN0aW9uQnV0dG9ucyxcclxuICAgIFByb2dyZXNzQnV0dG9ucyxcclxufTtcclxuIl19
